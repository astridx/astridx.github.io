(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"+qE3":function(e,t,n){"use strict";var o,i="object"==typeof Reflect?Reflect:null,r=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};o=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,o){function i(){void 0!==r&&e.removeListener("error",r),n([].slice.call(arguments))}var r;"error"!==t&&(r=function(n){e.removeListener(t,i),o(n)},e.once("error",r)),e.once(t,i)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function h(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,n,o){var i,r,s,a;if(u(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),s=r[t]),void 0===s)s=r[t]=n,++e._eventsCount;else if("function"==typeof s?s=r[t]=o?[n,s]:[s,n]:o?s.unshift(n):s.push(n),(i=h(e))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var o={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(o);return i.listener=n,o.wrapFn=i,i}function d(e,t,n){var o=e._events;if(void 0===o)return[];var i=o[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length)}function v(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),o=0;o<t;++o)n[o]=e[o];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return h(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var u=c.length,h=m(c,u);for(n=0;n<u;++n)r(h[n],this,t)}return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){return u(t),this.on(e,p(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,p(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,o,i,r,s;if(u(t),void 0===(o=this._events))return this;if(void 0===(n=o[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){s=n[r].listener,i=r;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(o[e]=n[0]),void 0!==o.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,o;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,r=Object.keys(n);for(o=0;o<r.length;++o)"removeListener"!==(i=r[o])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this},a.prototype.listeners=function(e){return d(this,e,!0)},a.prototype.rawListeners=function(e){return d(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},a.prototype.listenerCount=v,a.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]}},"5IdC":function(e,t){function n(e,t){var n=e.getCenter(),o=e.getZoom(),i=e.getBearing(),r=e.getPitch();t.forEach((function(e){e.jumpTo({center:n,zoom:o,bearing:i,pitch:r})}))}e.exports=function(){var e,t=arguments.length;if(1===t)e=arguments[0];else{e=[];for(var o=0;o<t;o++)e.push(arguments[o])}var i=[];function r(){e.forEach((function(e,t){e.on("move",i[t])}))}function s(){e.forEach((function(e,t){e.off("move",i[t])}))}function a(e,t){s(),n(e,t),r()}return e.forEach((function(t,n){i[n]=a.bind(null,t,e.filter((function(e,t){return t!==n})))})),r(),function(){s(),i=[]}}},"6btO":function(e,t,n){"use strict";var o=n("5IdC"),i=n("+qE3").EventEmitter;function r(e,t,n,r){if(this.options=r||{},this._mapA=e,this._mapB=t,this._horizontal="horizontal"===this.options.orientation,this._onDown=this._onDown.bind(this),this._onMove=this._onMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._ev=new i,this._swiper=document.createElement("div"),this._swiper.className=this._horizontal?"compare-swiper-horizontal":"compare-swiper-vertical",this._controlContainer=document.createElement("div"),this._controlContainer.className=this._horizontal?"mapboxgl-compare mapboxgl-compare-horizontal":"mapboxgl-compare",this._controlContainer.className=this._controlContainer.className,this._controlContainer.appendChild(this._swiper),"string"==typeof n&&document.body.querySelectorAll){var s=document.body.querySelectorAll(n)[0];if(!s)throw new Error("Cannot find element with specified container selector.");s.appendChild(this._controlContainer)}else{if(!(n instanceof Element&&n.appendChild))throw new Error("Invalid container specified. Must be CSS selector or HTML element.");n.appendChild(this._controlContainer)}this._bounds=t.getContainer().getBoundingClientRect();var a=(this._horizontal?this._bounds.height:this._bounds.width)/2;this._setPosition(a),this._clearSync=o(e,t),this._onResize=function(){this._bounds=t.getContainer().getBoundingClientRect(),this.currentPosition&&this._setPosition(this.currentPosition)}.bind(this),t.on("resize",this._onResize),this.options&&this.options.mousemove&&(e.getContainer().addEventListener("mousemove",this._onMove),t.getContainer().addEventListener("mousemove",this._onMove)),this._swiper.addEventListener("mousedown",this._onDown),this._swiper.addEventListener("touchstart",this._onDown)}r.prototype={_setPointerEvents:function(e){this._controlContainer.style.pointerEvents=e,this._swiper.style.pointerEvents=e},_onDown:function(e){e.touches?(document.addEventListener("touchmove",this._onMove),document.addEventListener("touchend",this._onTouchEnd)):(document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onMouseUp))},_setPosition:function(e){e=Math.min(e,this._horizontal?this._bounds.height:this._bounds.width);var t=this._horizontal?"translate(0, "+e+"px)":"translate("+e+"px, 0)";this._controlContainer.style.transform=t,this._controlContainer.style.WebkitTransform=t;var n=this._horizontal?"rect(0, 999em, "+e+"px, 0)":"rect(0, "+e+"px, "+this._bounds.height+"px, 0)",o=this._horizontal?"rect("+e+"px, 999em, "+this._bounds.height+"px,0)":"rect(0, 999em, "+this._bounds.height+"px,"+e+"px)";this._mapA.getContainer().style.clip=n,this._mapB.getContainer().style.clip=o,this.currentPosition=e},_onMove:function(e){this.options&&this.options.mousemove&&this._setPointerEvents(e.touches?"auto":"none"),this._horizontal?this._setPosition(this._getY(e)):this._setPosition(this._getX(e))},_onMouseUp:function(){document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onMouseUp),this.fire("slideend",{currentPosition:this.currentPosition})},_onTouchEnd:function(){document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onTouchEnd)},_getX:function(e){var t=(e=e.touches?e.touches[0]:e).clientX-this._bounds.left;return t<0&&(t=0),t>this._bounds.width&&(t=this._bounds.width),t},_getY:function(e){var t=(e=e.touches?e.touches[0]:e).clientY-this._bounds.top;return t<0&&(t=0),t>this._bounds.height&&(t=this._bounds.height),t},setSlider:function(e){this._setPosition(e)},on:function(e,t){return this._ev.on(e,t),this},fire:function(e,t){return this._ev.emit(e,t),this},off:function(e,t){return this._ev.removeListener(e,t),this},remove:function(){this._clearSync(),this._mapB.off("resize",this._onResize);var e=this._mapA.getContainer();e&&(e.style.clip=null,e.removeEventListener("mousemove",this._onMove));var t=this._mapB.getContainer();t&&(t.style.clip=null,t.removeEventListener("mousemove",this._onMove)),this._swiper.removeEventListener("mousedown",this._onDown),this._swiper.removeEventListener("touchstart",this._onDown),this._controlContainer.remove()}},window.mapboxgl?mapboxgl.Compare=r:e.exports=r},Yvkc:function(e,t,n){},qj6O:function(e,t,n){"use strict";n.r(t);var o=n("q1tI"),i=n.n(o),r=(n("rG3h"),n("ntAx")),s=n("4ZJM"),a=n.n(s),c=n("Sa8L"),u=n("2jDm"),h=n("uDWs"),l=n.n(h),f=n("i8i4"),p=n("Mpt7"),d=c.c.div.withConfig({componentId:"sc-15x1yte-0"})([""]),v=c.c.img.withConfig({componentId:"sc-15x1yte-1"})(["box-sizing:border-box;border:2px solid ",";box-shadow:0 1px 5px rgba(0,0,0,0.65);margin:0;"," &:not(:first-child){margin-left:0.25rem;}"],(function(e){return e.isActive?Object(c.e)("colors.highlight.500"):"#fff"}),(function(e){var t=e.size;return Object(c.b)(["width:",";height:",";border-radius:",";"],t,t,t)})),m=function(e){return"https://api.mapbox.com/styles/v1/mapbox/"+e.styleID+"/tiles/256/"+e.z+"/"+e.x+"/"+e.y+"?access_token="+e.token},_=function(e){var t=e.map,n=e.token,r=e.styles,s=e.tile,a=e.size,c=e.onChange;console.log("render StyleSelector"),t.on("style.load",(function(){console.log("style load")}));var u=Object(o.useState)(r[0]),h=u[0],l=u[1],f=Object(o.useState)(!1),_=f[0],g=f[1],y=Object(o.useRef)(null);t.once("style.load",(function(){y.current=Object(p.a)(t.getStyle())}));var b=function(e){if(console.log("handle click",e),g(!1),e!==h){l(e);var n=y.current,o=Object(p.a)(t.getStyle()),i=n.get("sources"),r=n.get("layers"),s=o.get("sources").filter((function(e,t){return!i.has(t)})),a=o.get("layers").filter((function(e){return!r.includes(e)}));t.setStyle("mapbox://styles/mapbox/"+e),t.once("style.load",(function(){console.log("on style update"),y.current=Object(p.a)(t.getStyle()),s.forEach((function(e,n){t.addSource(n,e.toJS())})),a.forEach((function(e){t.addLayer(e.toJS())})),c(e)}))}},w=function(){g(!0)};if(2===r.length){var E=h===r[0]?r[1]:r[0];return i.a.createElement(d,null,i.a.createElement(v,{size:a,src:m(Object.assign({styleID:E,token:n},s)),onClick:function(){return b(E)}}))}var x=r.filter((function(e){return e!==h}))[0];return i.a.createElement(d,{onMouseEnter:w,onMouseLeave:function(){g(!1)}},_?i.a.createElement(i.a.Fragment,null,i.a.createElement(v,{size:a,src:m(Object.assign({styleID:x,token:n},s)),onClick:function(){return b(x)}}),r.filter((function(e){return e!==x})).map((function(e){return i.a.createElement(v,{key:e,isActive:e===h,size:a,src:m(Object.assign({styleID:e,token:n},s)),onClick:function(){return b(e)}})}))):i.a.createElement(v,{size:a,src:m(Object.assign({styleID:x,token:n},s)),onClick:w}))};_.defaultProps={map:null,tile:{x:0,y:0,z:0},size:"64px",onChange:function(){}};var g=function(){function e(e){var t=e.styles,n=e.token,o=e.position;this.styles=t,this.token=n,this.position=o}var t=e.prototype;return t.onAdd=function(e){console.log("onAdd"),this.map=e;var t=this.styles,n=this.token;return this.container=document.createElement("div"),this.container.classList.add("mapboxgl-ctrl"),this.container.classList.add("mapboxgl-ctrl-style-selector"),this.container.style.float="none !important",this.container.style.cursor="pointer",Object(f.render)(i.a.createElement(_,{map:e,styles:t,token:n}),this.container),this.container},t.init=function(){console.log("init");var e=this.map,t=this.styles,n=this.token,o=this.container;Object(f.render)(i.a.createElement(_,{map:e,styles:t,token:n}),o)},t.onRemove=function(){this.map=null,this.container.parentNode.removeChild(this.container)},e}(),y=n("orsu"),b=n.n(y),w=n("6btO"),E=n.n(w),x=(n("Yvkc"),n("jFb6")),L=c.c.div.withConfig({componentId:"sc-1nmtvt1-0"})(["width:",";height:",";position:relative;flex:1 0 auto;"],(function(e){return e.width}),(function(e){return e.height})),C=function(e){var t=e.width,n=e.height,r=e.zoom,s=e.center,c=e.bounds,h=(e.padding,e.styles),f=e.sources,p=e.layers,d=e.minZoom,v=e.maxZoom,m=e.directions,_=x.siteMetadata.mapboxToken;if(_||console.error("ERROR: Mapbox token is required in gatsby-config.js siteMetadata"),!u.a)return null;var y=Object(o.useRef)(null),w=Object(o.useRef)(null),C=Object(o.useRef)(null),O=Object(o.useRef)(null);return Object(o.useEffect)((function(){var e=s,t=r;if(c&&4===c.length){var n=function(e,t,n){void 0===n&&(n=0);var o=e.width,i=e.height,r=l.a.viewport(t,[o,i],void 0,void 0,void 0,!0),s=Math.max(r.zoom-1,0)*(1-n);return{center:r.center,zoom:s}}(y.current,w.current,c);e=n.center,t=n.zoom}a.a.accessToken=_;var o=new a.a.Map({container:"eins",style:"mapbox://styles/mapbox/"+h[0],center:e,zoom:t,minZoom:d,maxZoom:v});C.current=o,window.map=o;var i=new a.a.Map({container:"zwei",style:"mapbox://styles/mapbox/"+h[3],center:e,zoom:t,minZoom:d,maxZoom:v});O.current=i,window.map2=i;new E.a(o,i,"#swipewrapper",{});return i.addControl(new a.a.NavigationControl,"top-right"),h.length>1&&o.addControl(new g({styles:h,token:_}),"bottom-left"),o.on("load",(function(){var e;console.log("map onload"),Object.entries(f).forEach((function(e){var t=e[0],n=e[1];o.addSource(t,n)})),p.forEach((function(e){o.addLayer(e)})),m.forEach((function(t){t.pois.forEach((function(e){(new a.a.Marker).setLngLat([e[0],e[1]]).setPopup(new a.a.Popup({offset:25}).setText(e[2])).addTo(o)})),(e=new b.a(t)).setOrigin(t.origin),e.setDestination(t.destination),o.addControl(e,"top-right")}))})),function(){o.remove()}}),[]),i.a.createElement(L,{id:"swipewrapper",width:t,height:n},i.a.createElement("div",{id:"eins",style:{top:0,position:"absolute",width:"100%",bottom:0}}),i.a.createElement("div",{id:"zwei",style:{top:0,position:"absolute",width:"100%",bottom:0}}))};C.defaultProps={width:"auto",height:"100%",center:[7.221275,50.326111],zoom:9.5,bounds:null,minZoom:0,maxZoom:24,styles:["streets-v11","light-v9","dark-v9","satellite-v9"],padding:.1,sources:{},layers:[],directions:[]};var O=C;t.default=function(){return i.a.createElement(r.a,{title:"Full Screen Map"},i.a.createElement(O,null))}}}]);
//# sourceMappingURL=component---src-pages-map-swipe-jsx-34ad9c4c270f92e214f3.js.map