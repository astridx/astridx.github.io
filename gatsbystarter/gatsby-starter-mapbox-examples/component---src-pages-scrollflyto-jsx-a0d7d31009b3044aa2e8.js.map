{"version":3,"sources":["webpack:///./src/components/Scrollflyto/SingleScrollflyto.jsx","webpack:///./src/components/Scrollflyto/Scrollflyto.jsx","webpack:///./src/constants/scrollflyto.js","webpack:///./src/pages/scrollflyto.jsx","webpack:///./node_modules/mapbox-gl-style-switcher/dist/index.js","webpack:///./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/createClass.js","webpack:///./src/components/Map/StyleSelector.jsx","webpack:///./src/components/Map/index.jsx","webpack:///./src/components/Map/util.js","webpack:///./src/components/Sidebar/index.jsx","webpack:///./node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/classCallCheck.js"],"names":["SingleScollflytoWrapper","styled","section","SingleScollflyto","title","text","id","ScrollflytoContainer","ScrollflytoWrapper","div","Scrollflyto","props","scrollflyto","map","item","index","SingleScrollflyto","key","bearing","center","zoom","pitch","duration","speed","Wrapper","Flex","MapPage","useState","setSrollPosition","handleScroll","element","bounds","activeName","i","length","document","getElementById","getBoundingClientRect","top","window","innerHeight","bottom","setActiveChapter","chapterName","flyTo","setAttribute","position","pageYOffset","useEffect","addEventListener","removeEventListener","Layout","Sidebar","p","Map","_classCallCheck","_createClass","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","F","s","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","return","arr","len","arr2","defineProperty","exports","MapboxStyleSwitcherControl","styles","defaultStyle","this","DEFAULT_STYLES","DEFAULT_STYLE","onDocumentClick","bind","_this","controlContainer","createElement","classList","add","mapStyleContainer","styleButton","type","_step","_iterator","style","styleElement","innerText","replace","dataset","uri","JSON","stringify","event","srcElement","contains","setStyle","parse","display","elms","getElementsByClassName","remove","appendChild","parentNode","removeChild","undefined","target","_defineProperties","descriptor","enumerable","configurable","writable","module","Constructor","protoProps","staticProps","Basemap","img","isActive","themeGet","size","css","getSrc","styleID","z","x","y","token","StyleSelector","tile","onChange","console","log","on","basemap","setBasemap","isOpen","setIsOpen","baseStyleRef","useRef","once","current","fromJS","getStyle","handleBasemapClick","newBasemap","baseStyle","snapshot","baseSources","get","baseLayers","userSources","filter","_","has","userLayers","layer","includes","forEach","source","addSource","toJS","addLayer","toggleOpen","nextBasemap","src","onClick","onMouseEnter","onMouseLeave","defaultProps","Plugin","onAdd","container","float","cursor","render","init","onRemove","width","height","padding","sources","layers","minZoom","maxZoom","directions","scale","styleSwitcher","layerSwitcher","mapboxToken","siteMetadata","error","hasWindow","mapNode","mapRef","mapCenter","mapZoom","viewport","geoViewport","Math","max","getCenterAndZoom","mapboxgl","accessToken","addControl","NavigationControl","direction","entries","directionData","pois","poi","Marker","setLngLat","setPopup","Popup","offset","setText","addTo","MapboxDirections","setOrigin","origin","setDestination","destination","ScaleControl","maxWidth","unit","ss","ls","ref","Box","attrs","flex","InnerWrapper","flexDirection","allowScroll","children","instance"],"mappings":"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","file":"component---src-pages-scrollflyto-jsx-a0d7d31009b3044aa2e8.js","sourcesContent":["import React from 'react'\nimport styled, { themeGet } from 'style'\n\nconst SingleScollflyto = ({ title, text }) => {\n  return (\n    <SingleScollflytoWrapper>\n      <section id={title}>\n        <h3>{title}</h3>\n        <p>{text}</p>\n      </section>\n    </SingleScollflytoWrapper>\n  )\n}\n\nconst SingleScollflytoWrapper = styled.section`\n  margin: 200px 0;\n  padding: 25px 50px;\n  line-height: 25px;\n  border-bottom: 1px solid #ddd;\n  color: gray;\n  font-size: 13px;\n}\nsection.active {\n  color: black;\n}\nsection:last-child {\n  border-bottom: none;\n  margin-bottom: 400px;\n}\n`\n\nexport default SingleScollflyto\n","import React from 'react'\nimport SingleScrollflyto from './SingleScrollflyto'\nimport styled from 'style'\n\nconst Scrollflyto = props => {\n  return (\n    <ScrollflytoContainer>\n      <ScrollflytoWrapper>\n        {props.scrollflyto.map((item, index) => (\n          <SingleScrollflyto key={index} title={item.title} text={item.text} />\n        ))}\n      </ScrollflytoWrapper>\n    </ScrollflytoContainer>\n  )\n}\n\nconst ScrollflytoContainer = styled.section`\n  max-height: 400px;\n`\n\nconst ScrollflytoWrapper = styled.div`\n  font-family: sans-serif;\n  background-color: #fafafa;\n`\n\nexport default Scrollflyto\n","export default [\n  {\n    title: 'Bitte scrollen Sie nach unten,',\n    text: 'um weitere Sehenswürdigkeiten zu sehen.',\n    bearing: 27,\n    center: [7.2212, 50.3261],\n    zoom: 16.5,\n    pitch: 20,\n  },\n  {\n    title: 'Genovevaburg',\n    text:\n      'Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industrys standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.',\n    bearing: 27,\n    center: [7.221275, 50.326111],\n    zoom: 17.5,\n    pitch: 20,\n  },\n  {\n    title: 'Pfarrkirche Herz-Jesu',\n    text:\n      'Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industrys standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.',\n    duration: 50,\n    center: [7.222546, 50.327054],\n    bearing: 150,\n    zoom: 18,\n    speed: 1.1,\n    pitch: 0,\n  },\n  {\n    title: 'Obertor',\n    text:\n      'Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industrys standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.',\n    bearing: 90,\n    center: [7.21869, 50.328],\n    zoom: 17,\n    pitch: 40,\n  },\n  {\n    title: 'Pfarrkirche St. Clemens',\n    text:\n      'Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industrys standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.',\n    bearing: 90,\n    center: [7.223178, 50.329886],\n    zoom: 18.3,\n  },\n  {\n    title: 'Grubenfelder',\n    text:\n      'Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industrys standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.',\n    bearing: 90,\n    center: [7.24091, 50.33454],\n    zoom: 15.2,\n    pitch: 40,\n  },\n  {\n    title: 'Katzenberg',\n    text:\n      'Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industrys standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.',\n    bearing: 90,\n    center: [7.243889, 50.32],\n    zoom: 14.5,\n    pitch: 20,\n  },\n  {\n    title: 'Schloss Bürressheim',\n    text:\n      'Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industrys standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.',\n    bearing: 90,\n    center: [7.179708, 50.352792],\n    zoom: 12.3,\n    pitch: 20,\n  },\n]\n","import React, { useEffect, useState } from 'react'\nimport Layout from 'components/Layout'\nimport Map from 'components/Map'\nimport Scrollflyto from '../components/Scrollflyto/Scrollflyto'\nimport scrollflyto from '../constants/scrollflyto'\nimport styled from 'style'\nimport Sidebar from 'components/Sidebar'\nimport { Box, Flex } from 'components/Grid'\n\nconst MapPage = () => {\n  const [scrollPosition, setSrollPosition] = useState(0)\n  const handleScroll = () => {\n    var activeName = scrollflyto[0].title\n    for (var i = 0; i < scrollflyto.length; i++) {\n      if (isElementOnScreen(scrollflyto[i].title)) {\n        setActiveChapter(scrollflyto[i].title, i)\n        break\n      }\n    }\n\n    function setActiveChapter(chapterName, i) {\n      if (chapterName === activeName) return\n\n      map.flyTo(scrollflyto[i])\n\n      document.getElementById(chapterName).setAttribute('class', 'active')\n      document.getElementById(activeName).setAttribute('class', '')\n\n      activeName = chapterName\n    }\n\n    function isElementOnScreen(id) {\n      var element = document.getElementById(id)\n      var bounds = element.getBoundingClientRect()\n      return bounds.top < window.innerHeight && bounds.bottom > 0\n    }\n    const position = window.pageYOffset\n    setSrollPosition(position)\n  }\n\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll, true)\n\n    return () => {\n      window.removeEventListener('scroll', handleScroll)\n    }\n  }, [])\n\n  return (\n    <Layout title=\"Map with Sidebar\">\n      <Wrapper>\n        <Sidebar>\n          <Box p=\"1rem\">\n            <Scrollflyto scrollflyto={scrollflyto} />\n          </Box>\n        </Sidebar>\n        <Map />\n      </Wrapper>\n    </Layout>\n  )\n}\n\n// this wrapper needs to be 100% to force map and sidebar to fill the full space\nconst Wrapper = styled(Flex)`\n  height: 100%;\n`\n\nexport default MapPage\n","\"use strict\";\n\nvar _classCallCheck = require(\"/home/astrid/git/javascript/gatsby_plugins_starter/gitrepos/gatsby-starter-mapbox-examples/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/home/astrid/git/javascript/gatsby_plugins_starter/gitrepos/gatsby-starter-mapbox-examples/node_modules/babel-preset-gatsby/node_modules/@babel/runtime/helpers/createClass\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar MapboxStyleSwitcherControl = /*#__PURE__*/function () {\n  function MapboxStyleSwitcherControl(styles, defaultStyle) {\n    _classCallCheck(this, MapboxStyleSwitcherControl);\n\n    this.styles = styles || MapboxStyleSwitcherControl.DEFAULT_STYLES;\n    this.defaultStyle = defaultStyle || MapboxStyleSwitcherControl.DEFAULT_STYLE;\n    this.onDocumentClick = this.onDocumentClick.bind(this);\n  }\n\n  _createClass(MapboxStyleSwitcherControl, [{\n    key: \"getDefaultPosition\",\n    value: function getDefaultPosition() {\n      var defaultPosition = \"top-right\";\n      return defaultPosition;\n    }\n  }, {\n    key: \"onAdd\",\n    value: function onAdd(map) {\n      var _this = this;\n\n      this.map = map;\n      this.controlContainer = document.createElement(\"div\");\n      this.controlContainer.classList.add(\"mapboxgl-ctrl\");\n      this.controlContainer.classList.add(\"mapboxgl-ctrl-group\");\n      this.mapStyleContainer = document.createElement(\"div\");\n      this.styleButton = document.createElement(\"button\");\n      this.styleButton.type = \"button\";\n      this.mapStyleContainer.classList.add(\"mapboxgl-style-list\");\n\n      var _iterator = _createForOfIteratorHelper(this.styles),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var style = _step.value;\n          var styleElement = document.createElement(\"button\");\n          styleElement.type = \"button\";\n          styleElement.innerText = style.title;\n          styleElement.classList.add(style.title.replace(/[^a-z0-9-]/gi, '_'));\n          styleElement.dataset.uri = JSON.stringify(style.uri);\n          styleElement.addEventListener(\"click\", function (event) {\n            var srcElement = event.srcElement;\n\n            if (srcElement.classList.contains(\"active\")) {\n              return;\n            }\n\n            _this.map.setStyle(JSON.parse(srcElement.dataset.uri));\n\n            _this.mapStyleContainer.style.display = \"none\";\n            _this.styleButton.style.display = \"block\";\n\n            var elms = _this.mapStyleContainer.getElementsByClassName(\"active\");\n\n            while (elms[0]) {\n              elms[0].classList.remove(\"active\");\n            }\n\n            srcElement.classList.add(\"active\");\n          });\n\n          if (style.title === this.defaultStyle) {\n            styleElement.classList.add(\"active\");\n          }\n\n          this.mapStyleContainer.appendChild(styleElement);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this.styleButton.classList.add(\"mapboxgl-ctrl-icon\");\n      this.styleButton.classList.add(\"mapboxgl-style-switcher\");\n      this.styleButton.addEventListener(\"click\", function () {\n        _this.styleButton.style.display = \"none\";\n        _this.mapStyleContainer.style.display = \"block\";\n      });\n      document.addEventListener(\"click\", this.onDocumentClick);\n      this.controlContainer.appendChild(this.styleButton);\n      this.controlContainer.appendChild(this.mapStyleContainer);\n      return this.controlContainer;\n    }\n  }, {\n    key: \"onRemove\",\n    value: function onRemove() {\n      if (!this.controlContainer || !this.controlContainer.parentNode || !this.map || !this.styleButton) {\n        return;\n      }\n\n      this.styleButton.removeEventListener(\"click\", this.onDocumentClick);\n      this.controlContainer.parentNode.removeChild(this.controlContainer);\n      document.removeEventListener(\"click\", this.onDocumentClick);\n      this.map = undefined;\n    }\n  }, {\n    key: \"onDocumentClick\",\n    value: function onDocumentClick(event) {\n      if (this.controlContainer && !this.controlContainer.contains(event.target) && this.mapStyleContainer && this.styleButton) {\n        this.mapStyleContainer.style.display = \"none\";\n        this.styleButton.style.display = \"block\";\n      }\n    }\n  }]);\n\n  return MapboxStyleSwitcherControl;\n}();\n\nMapboxStyleSwitcherControl.DEFAULT_STYLE = \"Streets\";\nMapboxStyleSwitcherControl.DEFAULT_STYLES = [{\n  title: \"Dark\",\n  uri: \"mapbox://styles/mapbox/dark-v10\"\n}, {\n  title: \"Light\",\n  uri: \"mapbox://styles/mapbox/light-v10\"\n}, {\n  title: \"Outdoors\",\n  uri: \"mapbox://styles/mapbox/outdoors-v11\"\n}, {\n  title: \"Satellite\",\n  uri: \"mapbox://styles/mapbox/satellite-streets-v11\"\n}, {\n  title: \"Streets\",\n  uri: \"mapbox://styles/mapbox/streets-v11\"\n}];\nexports.MapboxStyleSwitcherControl = MapboxStyleSwitcherControl;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","import React, { useState, useRef } from 'react'\nimport { render } from 'react-dom'\nimport PropTypes from 'prop-types'\nimport { fromJS } from 'immutable'\n\nimport styled, { css, themeGet } from 'style'\n\nconst Wrapper = styled.div`\n  /* cursor: pointer;\n  position: absolute;\n  left: 10px;\n  bottom: 24px;\n  z-index: 999; */\n`\n\nconst Basemap = styled.img`\n  box-sizing: border-box;\n  border: 2px solid\n    ${({ isActive }) => (isActive ? themeGet('colors.highlight.500') : '#fff')};\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.65);\n  margin: 0;\n\n  ${({ size }) => css`\n    width: ${size};\n    height: ${size};\n    border-radius: ${size};\n  `}\n\n  &:not(:first-child) {\n    margin-left: 0.25rem;\n  }\n`\n\nconst getSrc = ({ styleID, z, x, y, token }) =>\n  `https://api.mapbox.com/styles/v1/mapbox/${styleID}/tiles/256/${z}/${x}/${y}?access_token=${token}`\n\nconst StyleSelector = ({ map, token, styles, tile, size, onChange }) => {\n  console.log('render StyleSelector')\n\n  map.on('style.load', () => {\n    console.log('style load')\n  })\n\n  const [basemap, setBasemap] = useState(styles[0])\n  const [isOpen, setIsOpen] = useState(false)\n  const baseStyleRef = useRef(null)\n\n  map.once('style.load', () => {\n    baseStyleRef.current = fromJS(map.getStyle())\n  })\n\n  const handleBasemapClick = newBasemap => {\n    console.log('handle click', newBasemap)\n    setIsOpen(false)\n\n    if (newBasemap === basemap) return\n\n    setBasemap(newBasemap)\n\n    const { current: baseStyle } = baseStyleRef\n\n    const snapshot = fromJS(map.getStyle())\n    const baseSources = baseStyle.get('sources')\n    const baseLayers = baseStyle.get('layers')\n\n    // diff the sources and layers to find those added by the user\n    const userSources = snapshot\n      .get('sources')\n      .filter((_, key) => !baseSources.has(key))\n    const userLayers = snapshot\n      .get('layers')\n      .filter(layer => !baseLayers.includes(layer))\n\n    map.setStyle(`mapbox://styles/mapbox/${newBasemap}`)\n\n    map.once('style.load', () => {\n      console.log('on style update')\n      // after new style has loaded\n      // save it so that we can diff with it on next change\n      // and re-add the sources / layers back on it\n\n      // save base for new style\n      baseStyleRef.current = fromJS(map.getStyle())\n\n      userSources.forEach((source, id) => {\n        map.addSource(id, source.toJS())\n      })\n\n      userLayers.forEach(layer => {\n        map.addLayer(layer.toJS())\n      })\n\n      onChange(newBasemap)\n    })\n  }\n\n  const toggleOpen = () => {\n    setIsOpen(true)\n  }\n\n  const toggleClosed = () => {\n    setIsOpen(false)\n  }\n\n  // if there are only 2 options, render as a toggle\n  if (styles.length === 2) {\n    const nextBasemap = basemap === styles[0] ? styles[1] : styles[0]\n\n    return (\n      <Wrapper>\n        <Basemap\n          size={size}\n          src={getSrc({ styleID: nextBasemap, token, ...tile })}\n          onClick={() => handleBasemapClick(nextBasemap)}\n        />\n      </Wrapper>\n    )\n  }\n\n  const nextBasemap = styles.filter(style => style !== basemap)[0]\n\n  return (\n    <Wrapper onMouseEnter={toggleOpen} onMouseLeave={toggleClosed}>\n      {isOpen ? (\n        <>\n          <Basemap\n            size={size}\n            src={getSrc({ styleID: nextBasemap, token, ...tile })}\n            onClick={() => handleBasemapClick(nextBasemap)}\n          />\n          {styles\n            .filter(style => style !== nextBasemap)\n            .map(styleID => (\n              <Basemap\n                key={styleID}\n                isActive={styleID === basemap}\n                size={size}\n                src={getSrc({ styleID, token, ...tile })}\n                onClick={() => handleBasemapClick(styleID)}\n              />\n            ))}\n        </>\n      ) : (\n        <Basemap\n          size={size}\n          src={getSrc({ styleID: nextBasemap, token, ...tile })}\n          onClick={toggleOpen}\n        />\n      )}\n    </Wrapper>\n  )\n}\n\nStyleSelector.propTypes = {\n  map: PropTypes.object,\n  token: PropTypes.string.isRequired,\n  // list of mapbox style IDs\n  styles: PropTypes.arrayOf(PropTypes.string).isRequired,\n  tile: PropTypes.shape({\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired,\n    z: PropTypes.number.isRequired,\n  }),\n  size: PropTypes.string,\n  onChange: PropTypes.func,\n}\n\nStyleSelector.defaultProps = {\n  map: null,\n  tile: {\n    x: 0,\n    y: 0,\n    z: 0,\n  },\n  size: '64px',\n  onChange: () => {},\n}\n\n// Wrap in a Mapbox GL plugin so that we can construct the above React element on map init\n// TODO: pass props through\nclass Plugin {\n  constructor({ styles, token, position }) {\n    this.styles = styles\n    this.token = token\n    this.position = position\n  }\n\n  onAdd(map) {\n    console.log('onAdd')\n    this.map = map\n\n    const { styles, token } = this\n\n    this.container = document.createElement('div')\n    this.container.classList.add('mapboxgl-ctrl')\n    this.container.classList.add('mapboxgl-ctrl-style-selector')\n    this.container.style.float = 'none !important'\n    this.container.style.cursor = 'pointer'\n\n    render(\n      <StyleSelector map={map} styles={styles} token={token} />,\n      this.container\n    )\n\n    return this.container\n  }\n\n  init() {\n    console.log('init')\n    const { map, styles, token, container } = this\n    render(<StyleSelector map={map} styles={styles} token={token} />, container)\n  }\n\n  onRemove() {\n    this.map = null\n    this.container.parentNode.removeChild(this.container)\n  }\n}\n\nexport default Plugin\n","/* eslint-disable max-len, no-underscore-dangle */\nimport React, { useEffect, useRef, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport mapboxgl from 'mapbox-gl'\nimport 'mapbox-gl/dist/mapbox-gl.css'\nimport styled from 'style'\nimport { hasWindow } from 'util/dom'\nimport { getCenterAndZoom } from './util'\nimport StyleSelector from './StyleSelector'\nimport MapboxDirections from '@mapbox/mapbox-gl-directions/dist/mapbox-gl-directions'\nimport { MapboxStyleSwitcherControl } from 'mapbox-gl-style-switcher'\nimport 'mapbox-gl-style-switcher/styles.css'\nimport { siteMetadata } from '../../../gatsby-config'\n\n// This wrapper must be positioned relative for the map to be able to lay itself out properly\nconst Wrapper = styled.div`\n  width: ${({ width }) => width};\n  height: ${({ height }) => height};\n  position: relative;\n  flex: 1 0 auto;\n`\n\nconst Map = ({\n  width,\n  height,\n  zoom,\n  center,\n  bounds,\n  padding,\n  styles,\n  sources,\n  layers,\n  minZoom,\n  maxZoom,\n  directions,\n  scale,\n  styleSwitcher,\n  layerSwitcher,\n}) => {\n  const { mapboxToken } = siteMetadata\n\n  if (!mapboxToken) {\n    console.error(\n      'ERROR: Mapbox token is required in gatsby-config.js siteMetadata'\n    )\n  }\n\n  // if there is no window, we cannot render this component\n  if (!hasWindow) {\n    return null\n  }\n\n  // this ref holds the map DOM node so that we can pass it into Mapbox GL\n  const mapNode = useRef(null)\n\n  // this ref holds the map object once we have instantiated it, so that we\n  // can use it in other hooks\n  const mapRef = useRef(null)\n  // construct the map within an effect that has no dependencies\n  // this allows us to construct it only once at the time the\n  // component is constructed.\n  useEffect(() => {\n    let mapCenter = center\n    let mapZoom = zoom\n\n    // If bounds are available, use these to establish center and zoom when map first loads\n    if (bounds && bounds.length === 4) {\n      const { center: boundsCenter, zoom: boundsZoom } = getCenterAndZoom(\n        mapNode.current,\n        bounds,\n        padding\n      )\n      mapCenter = boundsCenter\n      mapZoom = boundsZoom\n    }\n\n    // Token must be set before constructing map\n    mapboxgl.accessToken = mapboxToken\n\n    const map = new mapboxgl.Map({\n      container: mapNode.current,\n      style: `mapbox://styles/mapbox/${styles[0]}`,\n      center: mapCenter,\n      zoom: mapZoom,\n      minZoom,\n      maxZoom,\n    })\n    mapRef.current = map\n    window.map = map // for easier debugging and querying via console\n\n    map.addControl(new mapboxgl.NavigationControl(), 'top-right')\n\n    if (styles.length > 1) {\n      map.addControl(\n        new StyleSelector({\n          styles,\n          token: mapboxToken,\n        }),\n        'bottom-left'\n      )\n    }\n\n    map.on('load', () => {\n      console.log('map onload')\n      // add sources\n\n      Object.entries(sources).forEach(([id, source]) => {\n        map.addSource(id, source)\n      })\n\n      // add layers\n      layers.forEach(layer => {\n        map.addLayer(layer)\n      })\n\n      var direction\n      directions.forEach(directionData => {\n        directionData.pois.forEach(poi => {\n          new mapboxgl.Marker()\n            .setLngLat([poi[0], poi[1]])\n            .setPopup(new mapboxgl.Popup({ offset: 25 }).setText(poi[2]))\n            .addTo(map)\n        })\n        direction = new MapboxDirections(directionData)\n        direction.setOrigin(directionData.origin)\n        direction.setDestination(directionData.destination)\n        map.addControl(direction, 'top-right')\n      })\n\n      scale.forEach(s => {\n        map.addControl(\n          new mapboxgl.ScaleControl({\n            maxWidth: s.maxWidth,\n            unit: s.unit,\n          })\n        )\n      })\n\n      styleSwitcher.forEach(ss => {\n        console.log(ss.styles + ss.position)\n        map.addControl(new MapboxStyleSwitcherControl(ss.styles, ss.position))\n        /*   map.addControl(\n          \n        );*/\n      })\n\n      layerSwitcher.forEach(ls => {\n        console.log(ls)\n      })\n    })\n\n    // hook up map events here, such as click, mouseenter, mouseleave\n    // e.g., map.on('click', (e) => {})\n\n    // when this component is destroyed, remove the map\n    return () => {\n      map.remove()\n    }\n  }, [])\n\n  // You can use other `useEffect` hooks to update the state of the map\n  // based on incoming props.  Just beware that you might need to add additional\n  // refs to share objects or state between hooks.\n\n  return (\n    <Wrapper width={width} height={height}>\n      <div ref={mapNode} style={{ width: '100%', height: '100%' }} />\n      {/* <StyleSelector map={mapRef.current} styles={styles} token={mapboxToken} /> */}\n    </Wrapper>\n  )\n}\n\nMap.propTypes = {\n  width: PropTypes.string,\n  height: PropTypes.string,\n  center: PropTypes.arrayOf(PropTypes.number),\n  zoom: PropTypes.number,\n  bounds: PropTypes.arrayOf(PropTypes.number),\n  minZoom: PropTypes.number,\n  maxZoom: PropTypes.number,\n  styles: PropTypes.arrayOf(PropTypes.string),\n  padding: PropTypes.number,\n  sources: PropTypes.object,\n  layers: PropTypes.arrayOf(PropTypes.object),\n  directions: PropTypes.arrayOf(PropTypes.object),\n  scale: PropTypes.arrayOf(PropTypes.object),\n  styleSwitcher: PropTypes.arrayOf(PropTypes.object),\n  layerSwitcher: PropTypes.arrayOf(PropTypes.object),\n}\n\nMap.defaultProps = {\n  width: 'auto',\n  height: '100%',\n  center: [7.221275, 50.326111],\n  zoom: 9.5,\n  bounds: null,\n  minZoom: 0,\n  maxZoom: 24,\n  styles: ['streets-v11'],\n  padding: 0.1, // padding around bounds as a proportion\n  sources: {},\n  layers: [],\n  directions: [],\n  scale: [],\n  styleSwitcher: [],\n  layerSwitcher: [],\n}\n\nexport default Map\n","import geoViewport from '@mapbox/geo-viewport'\n\n/**\n * Calculate the appropriate center and zoom to fit the bounds, given padding.\n * @param {Element} - map DOM node used to calculate height and width in screen pixels of map\n * @param {Array(number)} bounds - [xmin, ymin, xmax, ymax]\n * @param {float} padding - proportion of calculated zoom level to zoom out by, to pad the bounds\n */\nexport const getCenterAndZoom = (mapNode, bounds, padding = 0) => {\n  const { width, height } = mapNode\n  const viewport = geoViewport.viewport(\n    bounds,\n    [width, height],\n    undefined,\n    undefined,\n    undefined,\n    true\n  )\n\n  // Zoom out slightly to pad around bounds\n\n  const zoom = Math.max(viewport.zoom - 1, 0) * (1 - padding)\n\n  return { center: viewport.center, zoom }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { Box, Flex } from 'components/Grid'\nimport styled, { themeGet } from 'style'\n\n// This sidebar is responsive: it shrinks a bit in smaller viewports, then eventually expands to fill the full width\nconst Wrapper = styled(Box).attrs({\n  width: ['100%', '350px', '470px'],\n  flex: '0 0 auto',\n})`\n  border-right: 1px solid ${themeGet('colors.grey.800')};\n  height: 100%;\n`\n\n// The inner wrapper provides the scroll container for the sidebar\n// which allows vertical scrolling by default\nconst InnerWrapper = styled(Flex).attrs({\n  flexDirection: 'column',\n  flex: '1 1 auto',\n})`\n  overflow-x: hidden;\n  overflow-y: ${({ allowScroll }) => (allowScroll ? 'auto' : 'hidden')};\n  height: 100%;\n`\n\nconst Sidebar = ({ children, allowScroll }) => (\n  <Wrapper>\n    <InnerWrapper allowScroll={allowScroll}>{children}</InnerWrapper>\n  </Wrapper>\n)\n\nSidebar.propTypes = {\n  children: PropTypes.node.isRequired,\n  allowScroll: PropTypes.bool,\n}\n\nSidebar.defaultProps = {\n  allowScroll: true,\n}\n\nexport default Sidebar\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;"],"sourceRoot":""}