(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();class Dl{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const re=Dl,mn={PROPERTYCHANGE:"propertychange"};class $l{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const Rs=$l;function xs(i,t){return i>t?1:i<t?-1:0}function Is(i,t,e){const n=i.length;if(i[0]<=t)return 0;if(t<=i[n-1])return n-1;let s;if(e>0){for(s=1;s<n;++s)if(i[s]<t)return s-1}else if(e<0){for(s=1;s<n;++s)if(i[s]<=t)return s}else for(s=1;s<n;++s){if(i[s]==t)return s;if(i[s]<t)return typeof e=="function"?e(t,i[s-1],i[s])>0?s-1:s:i[s-1]-t<t-i[s]?s-1:s}return n-1}function Fl(i,t){const e=Array.isArray(t)?t:[t],n=e.length;for(let s=0;s<n;s++)i[i.length]=e[s]}function mi(i,t){const e=i.length;if(e!==t.length)return!1;for(let n=0;n<e;n++)if(i[n]!==t[n])return!1;return!0}function kl(i,t,e){const n=t||xs;return i.every(function(s,r){if(r===0)return!0;const o=n(i[r-1],s);return!(o>0||e&&o===0)})}function ni(){return!0}function pi(){return!1}function ii(){}function Vl(i){let t=!1,e,n,s;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==s||!mi(r,n))&&(t=!0,s=this,n=r,e=i.apply(this,arguments)),e}}function Ei(i){for(const t in i)delete i[t]}function zl(i){let t;for(t in i)return!1;return!t}class Kl extends Rs{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),s=n[t]||(n[t]=[]);s.includes(e)||s.push(e)}dispatchEvent(t){const e=typeof t=="string",n=e?t:t.type,s=this.listeners_&&this.listeners_[n];if(!s)return;const r=e?new re(t):t;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];let l;for(let c=0,h=s.length;c<h;++c)if("handleEvent"in s[c]?l=s[c].handleEvent(r):l=s[c].call(this,r),l===!1||r.propagationStopped){l=!1;break}if(--o[n]===0){let c=a[n];for(delete a[n];c--;)this.removeEventListener(n,ii);delete o[n]}return l}disposeInternal(){this.listeners_&&Ei(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){const n=this.listeners_&&this.listeners_[t];if(n){const s=n.indexOf(e);s!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[s]=ii,++this.pendingRemovals_[t]):(n.splice(s,1),n.length===0&&delete this.listeners_[t]))}}}const Ls=Kl,S={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function M(i,t,e,n,s){if(n&&n!==i&&(e=e.bind(n)),s){const o=e;e=function(){i.removeEventListener(t,e),o.apply(this,arguments)}}const r={target:i,type:t,listener:e};return i.addEventListener(t,e),r}function si(i,t,e,n){return M(i,t,e,n,!0)}function j(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),Ei(i))}class yi extends Ls{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(S.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=M(this,t[r],e);return s}return M(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const s=t.length;n=new Array(s);for(let r=0;r<s;++r)n[r]=si(this,t[r],e)}else n=si(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)Gl(n);else if(Array.isArray(t))for(let s=0,r=t.length;s<r;++s)this.removeEventListener(t[s],e);else this.removeEventListener(t,e)}}yi.prototype.on;yi.prototype.once;yi.prototype.un;function Gl(i){if(Array.isArray(i))for(let t=0,e=i.length;t<e;++t)j(i[t]);else j(i)}const ko=yi;function G(){throw new Error("Unimplemented abstract method.")}let jl=0;function st(i){return i.ol_uid||(i.ol_uid=String(++jl))}class vr extends re{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}class Yl extends ko{constructor(t){super(),this.on,this.once,this.un,st(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new vr(n,t,e)),n=mn.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new vr(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const s=this.values_||(this.values_={});if(n)s[t]=e;else{const r=s[t];s[t]=e,r!==e&&this.notify(t,r)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],zl(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}const Ut=Yl,Ul={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class Wl extends Error{constructor(t){const e=Ul[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}const Vo=Wl,mt={ADD:"add",REMOVE:"remove"},Tr={LENGTH:"length"};class Dn extends re{constructor(t,e,n){super(t),this.element=e,this.index=n}}class Hl extends Ut{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let n=0,s=this.array_.length;n<s;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,s=e.length;n<s;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Tr.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Dn(mt.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,s=e.length;n<s;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Dn(mt.REMOVE,e,t)),e}setAt(t,e){const n=this.getLength();if(t>=n){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const s=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Dn(mt.REMOVE,s,t)),this.dispatchEvent(new Dn(mt.ADD,e,t))}updateLength_(){this.set(Tr.LENGTH,this.array_.length)}assertUnique_(t,e){for(let n=0,s=this.array_.length;n<s;++n)if(this.array_[n]===t&&n!==e)throw new Vo(58)}}const zt=Hl,ee=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Xl=ee.includes("firefox"),Zl=ee.includes("safari")&&!ee.includes("chrom");Zl&&(ee.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ee));const Bl=ee.includes("webkit")&&!ee.includes("edge"),ql=ee.includes("macintosh"),zo=typeof devicePixelRatio<"u"?devicePixelRatio:1,Ko=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Ql=typeof Image<"u"&&Image.prototype.decode,Go=function(){let i=!1;try{const t=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return i}();function D(i,t){if(!i)throw new Vo(t)}new Array(6);function Ke(){return[1,0,0,1,0,0]}function lt(i,t){const e=t[0],n=t[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t}function pn(i,t,e,n,s,r,o,a){const l=Math.sin(r),c=Math.cos(r);return i[0]=n*c,i[1]=s*l,i[2]=-n*l,i[3]=s*c,i[4]=o*n*c-a*n*l+t,i[5]=o*s*l+a*s*c+e,i}function jo(i,t){const e=Jl(t);D(e!==0,32);const n=t[0],s=t[1],r=t[2],o=t[3],a=t[4],l=t[5];return i[0]=o/e,i[1]=-s/e,i[2]=-r/e,i[3]=n/e,i[4]=(r*l-o*a)/e,i[5]=-(n*l-s*a)/e,i}function Jl(i){return i[0]*i[3]-i[1]*i[2]}let Cr;function tc(i){const t="matrix("+i.join(", ")+")";if(Ko)return t;const e=Cr||(Cr=document.createElement("div"));return e.style.transform=t,e.style.transform}const q={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function br(i){const t=Ee();for(let e=0,n=i.length;e<n;++e)qn(t,i[e]);return t}function ec(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i.slice()}function Yo(i,t,e){let n,s;return t<i[0]?n=i[0]-t:i[2]<t?n=t-i[2]:n=0,e<i[1]?s=i[1]-e:i[3]<e?s=e-i[3]:s=0,n*n+s*s}function Os(i,t){return Uo(i,t[0],t[1])}function nc(i,t){return i[0]<=t[0]&&t[2]<=i[2]&&i[1]<=t[1]&&t[3]<=i[3]}function Uo(i,t,e){return i[0]<=t&&t<=i[2]&&i[1]<=e&&e<=i[3]}function Ar(i,t){const e=i[0],n=i[1],s=i[2],r=i[3],o=t[0],a=t[1];let l=q.UNKNOWN;return o<e?l=l|q.LEFT:o>s&&(l=l|q.RIGHT),a<n?l=l|q.BELOW:a>r&&(l=l|q.ABOVE),l===q.UNKNOWN&&(l=q.INTERSECTING),l}function Ee(){return[1/0,1/0,-1/0,-1/0]}function We(i,t,e,n,s){return s?(s[0]=i,s[1]=t,s[2]=e,s[3]=n,s):[i,t,e,n]}function vi(i){return We(1/0,1/0,-1/0,-1/0,i)}function ic(i,t){const e=i[0],n=i[1];return We(e,n,e,n,t)}function sc(i,t,e,n,s){const r=vi(s);return Wo(r,i,t,e,n)}function os(i,t){return i[0]==t[0]&&i[2]==t[2]&&i[1]==t[1]&&i[3]==t[3]}function rc(i,t){return t[0]<i[0]&&(i[0]=t[0]),t[2]>i[2]&&(i[2]=t[2]),t[1]<i[1]&&(i[1]=t[1]),t[3]>i[3]&&(i[3]=t[3]),i}function qn(i,t){t[0]<i[0]&&(i[0]=t[0]),t[0]>i[2]&&(i[2]=t[0]),t[1]<i[1]&&(i[1]=t[1]),t[1]>i[3]&&(i[3]=t[1])}function Wo(i,t,e,n,s){for(;e<n;e+=s)oc(i,t[e],t[e+1]);return i}function oc(i,t,e){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}function Ho(i,t){let e;return e=t(Ti(i)),e||(e=t(Ci(i)),e)||(e=t(bi(i)),e)||(e=t(ye(i)),e)?e:!1}function as(i){let t=0;return Ss(i)||(t=X(i)*St(i)),t}function Ti(i){return[i[0],i[1]]}function Ci(i){return[i[2],i[1]]}function En(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function ac(i,t){let e;return t==="bottom-left"?e=Ti(i):t==="bottom-right"?e=Ci(i):t==="top-left"?e=ye(i):t==="top-right"?e=bi(i):D(!1,13),e}function ls(i,t,e,n,s){const[r,o,a,l,c,h,u,d]=cs(i,t,e,n);return We(Math.min(r,a,c,u),Math.min(o,l,h,d),Math.max(r,a,c,u),Math.max(o,l,h,d),s)}function cs(i,t,e,n){const s=t*n[0]/2,r=t*n[1]/2,o=Math.cos(e),a=Math.sin(e),l=s*o,c=s*a,h=r*o,u=r*a,d=i[0],f=i[1];return[d-l+u,f-c-h,d-l-u,f-c+h,d+l-u,f+c+h,d+l+u,f+c-h,d-l+u,f-c-h]}function St(i){return i[3]-i[1]}function fn(i,t,e){const n=e||Ee();return Cn(i,t)?(i[0]>t[0]?n[0]=i[0]:n[0]=t[0],i[1]>t[1]?n[1]=i[1]:n[1]=t[1],i[2]<t[2]?n[2]=i[2]:n[2]=t[2],i[3]<t[3]?n[3]=i[3]:n[3]=t[3]):vi(n),n}function ye(i){return[i[0],i[3]]}function bi(i){return[i[2],i[3]]}function X(i){return i[2]-i[0]}function Cn(i,t){return i[0]<=t[2]&&i[2]>=t[0]&&i[1]<=t[3]&&i[3]>=t[1]}function Ss(i){return i[2]<i[0]||i[3]<i[1]}function lc(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i}function cc(i,t,e){let n=!1;const s=Ar(i,t),r=Ar(i,e);if(s===q.INTERSECTING||r===q.INTERSECTING)n=!0;else{const o=i[0],a=i[1],l=i[2],c=i[3],h=t[0],u=t[1],d=e[0],f=e[1],g=(f-u)/(d-h);let _,p;r&q.ABOVE&&!(s&q.ABOVE)&&(_=d-(f-c)/g,n=_>=o&&_<=l),!n&&r&q.RIGHT&&!(s&q.RIGHT)&&(p=f-(d-l)*g,n=p>=a&&p<=c),!n&&r&q.BELOW&&!(s&q.BELOW)&&(_=d-(f-a)/g,n=_>=o&&_<=l),!n&&r&q.LEFT&&!(s&q.LEFT)&&(p=f-(d-o)*g,n=p>=a&&p<=c)}return n}function Z(i,t,e){return Math.min(Math.max(i,t),e)}function hc(i,t,e,n,s,r){const o=s-e,a=r-n;if(o!==0||a!==0){const l=((i-e)*o+(t-n)*a)/(o*o+a*a);l>1?(e=s,n=r):l>0&&(e+=o*l,n+=a*l)}return Ge(i,t,e,n)}function Ge(i,t,e,n){const s=e-i,r=n-t;return s*s+r*r}function uc(i){const t=i.length;for(let n=0;n<t;n++){let s=n,r=Math.abs(i[n][n]);for(let a=n+1;a<t;a++){const l=Math.abs(i[a][n]);l>r&&(r=l,s=a)}if(r===0)return null;const o=i[s];i[s]=i[n],i[n]=o;for(let a=n+1;a<t;a++){const l=-i[a][n]/i[n][n];for(let c=n;c<t+1;c++)n==c?i[a][c]=0:i[a][c]+=l*i[n][c]}}const e=new Array(t);for(let n=t-1;n>=0;n--){e[n]=i[n][t]/i[n][n];for(let s=n-1;s>=0;s--)i[s][t]-=i[s][n]*e[n]}return e}function Qn(i){return i*Math.PI/180}function je(i,t){const e=i%t;return e*t<0?e+t:e}function dc(i,t,e){return i+e*(t-i)}function Xo(i,t){const e=Math.pow(10,t);return Math.round(i*e)/e}function $n(i,t){return Math.floor(Xo(i,t))}function Fn(i,t){return Math.ceil(Xo(i,t))}const fc=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,gc=/^([a-z]*)$|^hsla?\(.*\)$/i;function _c(i){return typeof i=="string"?i:yc(i)}function mc(i){const t=document.createElement("div");if(t.style.color=i,t.style.color!==""){document.body.appendChild(t);const e=getComputedStyle(t).color;return document.body.removeChild(t),e}return""}const pc=function(){const t={};let e=0;return function(n){let s;if(t.hasOwnProperty(n))s=t[n];else{if(e>=1024){let r=0;for(const o in t)r++&3||(delete t[o],--e)}s=Ec(n),t[n]=s,++e}return s}}();function wr(i){return Array.isArray(i)?i:pc(i)}function Ec(i){let t,e,n,s,r;if(gc.exec(i)&&(i=mc(i)),fc.exec(i)){const o=i.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;t=parseInt(i.substr(1+0*a,a),16),e=parseInt(i.substr(1+1*a,a),16),n=parseInt(i.substr(1+2*a,a),16),l?s=parseInt(i.substr(1+3*a,a),16):s=255,a==1&&(t=(t<<4)+t,e=(e<<4)+e,n=(n<<4)+n,l&&(s=(s<<4)+s)),r=[t,e,n,s/255]}else i.startsWith("rgba(")?(r=i.slice(5,-1).split(",").map(Number),Rr(r)):i.startsWith("rgb(")?(r=i.slice(4,-1).split(",").map(Number),r.push(1),Rr(r)):D(!1,14);return r}function Rr(i){return i[0]=Z(i[0]+.5|0,0,255),i[1]=Z(i[1]+.5|0,0,255),i[2]=Z(i[2]+.5|0,0,255),i[3]=Z(i[3],0,1),i}function yc(i){let t=i[0];t!=(t|0)&&(t=t+.5|0);let e=i[1];e!=(e|0)&&(e=e+.5|0);let n=i[2];n!=(n|0)&&(n=n+.5|0);const s=i[3]===void 0?1:Math.round(i[3]*100)/100;return"rgba("+t+","+e+","+n+","+s+")"}class vc{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];!(t++&3)&&!n.hasListener()&&(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,n){const s=xr(t,e,n);return s in this.cache_?this.cache_[s]:null}set(t,e,n,s){const r=xr(t,e,n);this.cache_[r]=s,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function xr(i,t,e){const n=e?_c(e):"null";return t+":"+i+":"+n}const Zo=new vc,P={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Tc extends Ut{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[P.OPACITY]=t.opacity!==void 0?t.opacity:1,D(typeof e[P.OPACITY]=="number",64),e[P.VISIBLE]=t.visible!==void 0?t.visible:!0,e[P.Z_INDEX]=t.zIndex,e[P.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[P.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[P.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[P.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},n=this.getZIndex();return e.opacity=Z(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=n===void 0&&!e.managed?1/0:n,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return G()}getLayerStatesArray(t){return G()}getExtent(){return this.get(P.EXTENT)}getMaxResolution(){return this.get(P.MAX_RESOLUTION)}getMinResolution(){return this.get(P.MIN_RESOLUTION)}getMinZoom(){return this.get(P.MIN_ZOOM)}getMaxZoom(){return this.get(P.MAX_ZOOM)}getOpacity(){return this.get(P.OPACITY)}getSourceState(){return G()}getVisible(){return this.get(P.VISIBLE)}getZIndex(){return this.get(P.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(P.EXTENT,t)}setMaxResolution(t){this.set(P.MAX_RESOLUTION,t)}setMinResolution(t){this.set(P.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(P.MAX_ZOOM,t)}setMinZoom(t){this.set(P.MIN_ZOOM,t)}setOpacity(t){D(typeof t=="number",64),this.set(P.OPACITY,t)}setVisible(t){this.set(P.VISIBLE,t)}setZIndex(t){this.set(P.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Bo=Tc,te={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},_t={ANIMATING:0,INTERACTING:1},Ct={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Cc=42,Ns=256,yn={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class bc{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||yn[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const qo=bc,bn=6378137,ke=Math.PI*bn,Ac=[-ke,-ke,ke,ke],wc=[-180,-85,180,85],kn=bn*Math.log(Math.tan(Math.PI/2));class Re extends qo{constructor(t){super({code:t,units:"m",extent:Ac,global:!0,worldExtent:wc,getPointResolution:function(e,n){return e/Math.cosh(n[1]/bn)}})}}const Ir=[new Re("EPSG:3857"),new Re("EPSG:102100"),new Re("EPSG:102113"),new Re("EPSG:900913"),new Re("http://www.opengis.net/def/crs/EPSG/0/3857"),new Re("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Rc(i,t,e){const n=i.length;e=e>1?e:2,t===void 0&&(e>2?t=i.slice():t=new Array(n));for(let s=0;s<n;s+=e){t[s]=ke*i[s]/180;let r=bn*Math.log(Math.tan(Math.PI*(+i[s+1]+90)/360));r>kn?r=kn:r<-kn&&(r=-kn),t[s+1]=r}return t}function xc(i,t,e){const n=i.length;e=e>1?e:2,t===void 0&&(e>2?t=i.slice():t=new Array(n));for(let s=0;s<n;s+=e)t[s]=180*i[s]/ke,t[s+1]=360*Math.atan(Math.exp(i[s+1]/bn))/Math.PI-90;return t}const Ic=6378137,Lr=[-180,-90,180,90],Lc=Math.PI*Ic/180;class ce extends qo{constructor(t,e){super({code:t,units:"degrees",extent:Lr,axisOrientation:e,global:!0,metersPerUnit:Lc,worldExtent:Lr})}}const Or=[new ce("CRS:84"),new ce("EPSG:4326","neu"),new ce("urn:ogc:def:crs:OGC:1.3:CRS84"),new ce("urn:ogc:def:crs:OGC:2:84"),new ce("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ce("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ce("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let hs={};function Oc(i){return hs[i]||hs[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Sc(i,t){hs[i]=t}let Ye={};function ri(i,t,e){const n=i.getCode(),s=t.getCode();n in Ye||(Ye[n]={}),Ye[n][s]=e}function Nc(i,t){let e;return i in Ye&&t in Ye[i]&&(e=Ye[i][t]),e}function Pc(i,t){return i[0]+=+t[0],i[1]+=+t[1],i}function oi(i,t){let e=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=t[n]){e=!1;break}return e}function Ps(i,t){const e=Math.cos(t),n=Math.sin(t),s=i[0]*e-i[1]*n,r=i[1]*e+i[0]*n;return i[0]=s,i[1]=r,i}function Mc(i,t){return i[0]*=t,i[1]*=t,i}function Dc(i,t){if(t.canWrapX()){const e=X(t.getExtent()),n=$c(i,t,e);n&&(i[0]-=n*e)}return i}function $c(i,t,e){const n=t.getExtent();let s=0;return t.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(e=e||X(n),s=Math.floor((i[0]-n[0])/e)),s}const Fc=63710088e-1;function Sr(i,t,e){e=e||Fc;const n=Qn(i[1]),s=Qn(t[1]),r=(s-n)/2,o=Qn(t[0]-i[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(s);return 2*e*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const Qo={info:1,warn:2,error:3,none:4};let kc=Qo.info;function Jo(...i){kc>Qo.warn||console.warn(...i)}let us=!0;function ta(i){us=!(i===void 0?!0:i)}function Ms(i,t){if(t!==void 0){for(let e=0,n=i.length;e<n;++e)t[e]=i[e];t=t}else t=i.slice();return t}function ea(i,t){if(t!==void 0&&i!==t){for(let e=0,n=i.length;e<n;++e)t[e]=i[e];i=t}return i}function Vc(i){Sc(i.getCode(),i),ri(i,i,Ms)}function zc(i){i.forEach(Vc)}function bt(i){return typeof i=="string"?Oc(i):i||null}function Nr(i,t,e,n){i=bt(i);let s;const r=i.getPointResolutionFunc();if(r){if(s=r(t,e),n&&n!==i.getUnits()){const o=i.getMetersPerUnit();o&&(s=s*o/yn[n])}}else{const o=i.getUnits();if(o=="degrees"&&!n||n=="degrees")s=t;else{const a=$s(i,bt("EPSG:4326"));if(a===ea&&o!=="degrees")s=t*i.getMetersPerUnit();else{let c=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];c=a(c,c,2);const h=Sr(c.slice(0,2),c.slice(2,4)),u=Sr(c.slice(4,6),c.slice(6,8));s=(h+u)/2}const l=n?yn[n]:i.getMetersPerUnit();l!==void 0&&(s/=l)}}return s}function Pr(i){zc(i),i.forEach(function(t){i.forEach(function(e){t!==e&&ri(t,e,Ms)})})}function Kc(i,t,e,n){i.forEach(function(s){t.forEach(function(r){ri(s,r,e),ri(r,s,n)})})}function Ds(i,t){if(i){if(typeof i=="string")return bt(i)}else return bt(t);return i}function Gc(i,t){return ta(),Fs(i,"EPSG:4326",t!==void 0?t:"EPSG:3857")}function Ne(i,t){if(i===t)return!0;const e=i.getUnits()===t.getUnits();return(i.getCode()===t.getCode()||$s(i,t)===Ms)&&e}function $s(i,t){const e=i.getCode(),n=t.getCode();let s=Nc(e,n);return s||(s=ea),s}function ai(i,t){const e=bt(i),n=bt(t);return $s(e,n)}function Fs(i,t,e){return ai(t,e)(i,void 0,i.length)}function ds(i,t){return i}function $t(i,t){return us&&!oi(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(us=!1,Jo("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function jc(i,t){return i}function Ve(i,t){return i}function Yc(){Pr(Ir),Pr(Or),Kc(Or,Ir,Rc,xc)}Yc();function Mr(i,t,e){return function(n,s,r,o,a){if(!n)return;if(!s&&!t)return n;const l=t?0:r[0]*s,c=t?0:r[1]*s,h=a?a[0]:0,u=a?a[1]:0;let d=i[0]+l/2+h,f=i[2]-l/2+h,g=i[1]+c/2+u,_=i[3]-c/2+u;d>f&&(d=(f+d)/2,f=d),g>_&&(g=(_+g)/2,_=g);let p=Z(n[0],d,f),v=Z(n[1],g,_);if(o&&e&&s){const E=30*s;p+=-E*Math.log(1+Math.max(0,d-n[0])/E)+E*Math.log(1+Math.max(0,n[0]-f)/E),v+=-E*Math.log(1+Math.max(0,g-n[1])/E)+E*Math.log(1+Math.max(0,n[1]-_)/E)}return[p,v]}}function Uc(i){return i}function ks(i,t,e,n){const s=X(t)/e[0],r=St(t)/e[1];return n?Math.min(i,Math.max(s,r)):Math.min(i,Math.min(s,r))}function Vs(i,t,e){let n=Math.min(i,t);const s=50;return n*=Math.log(1+s*Math.max(0,i/t-1))/s+1,e&&(n=Math.max(n,e),n/=Math.log(1+s*Math.max(0,e/i-1))/s+1),Z(n,e/2,t*2)}function Wc(i,t,e,n){return t=t!==void 0?t:!0,function(s,r,o,a){if(s!==void 0){const l=i[0],c=i[i.length-1],h=e?ks(l,e,o,n):l;if(a)return t?Vs(s,h,c):Z(s,c,h);const u=Math.min(h,s),d=Math.floor(Is(i,u,r));return i[d]>h&&d<i.length-1?i[d+1]:i[d]}}}function Hc(i,t,e,n,s,r){return n=n!==void 0?n:!0,e=e!==void 0?e:0,function(o,a,l,c){if(o!==void 0){const h=s?ks(t,s,l,r):t;if(c)return n?Vs(o,h,e):Z(o,e,h);const u=1e-9,d=Math.ceil(Math.log(t/h)/Math.log(i)-u),f=-a*(.5-u)+.5,g=Math.min(h,o),_=Math.floor(Math.log(t/g)/Math.log(i)+f),p=Math.max(d,_),v=t/Math.pow(i,p);return Z(v,e,h)}}}function Dr(i,t,e,n,s){return e=e!==void 0?e:!0,function(r,o,a,l){if(r!==void 0){const c=n?ks(i,n,a,s):i;return!e||!l?Z(r,t,c):Vs(r,c,t)}}}function zs(i){if(i!==void 0)return 0}function $r(i){if(i!==void 0)return i}function Xc(i){const t=2*Math.PI/i;return function(e,n){if(n)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function Zc(i){return i=i||Qn(5),function(t,e){if(e)return t;if(t!==void 0)return Math.abs(t)<=i?0:t}}function na(i){return Math.pow(i,3)}function tn(i){return 1-na(1-i)}function Bc(i){return 3*i*i-2*i*i*i}function qc(i){return i}function Qc(i,t,e,n,s,r){r=r||[];let o=0;for(let a=t;a<e;a+=n){const l=i[a],c=i[a+1];r[o++]=s[0]*l+s[2]*c+s[4],r[o++]=s[1]*l+s[3]*c+s[5]}return r&&r.length!=o&&(r.length=o),r}function Jc(i,t,e,n,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),c=r[0],h=r[1];let u=0;for(let d=t;d<e;d+=n){const f=i[d]-c,g=i[d+1]-h;o[u++]=c+f*a-g*l,o[u++]=h+f*l+g*a;for(let _=d+2;_<d+n;++_)o[u++]=i[_]}return o&&o.length!=u&&(o.length=u),o}function th(i,t,e,n,s,r,o,a){a=a||[];const l=o[0],c=o[1];let h=0;for(let u=t;u<e;u+=n){const d=i[u]-l,f=i[u+1]-c;a[h++]=l+s*d,a[h++]=c+r*f;for(let g=u+2;g<u+n;++g)a[h++]=i[g]}return a&&a.length!=h&&(a.length=h),a}function eh(i,t,e,n,s,r,o){o=o||[];let a=0;for(let l=t;l<e;l+=n){o[a++]=i[l]+s,o[a++]=i[l+1]+r;for(let c=l+2;c<l+n;++c)o[a++]=i[c]}return o&&o.length!=a&&(o.length=a),o}const Fr=Ke();class nh extends Ut{constructor(){super(),this.extent_=Ee(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Vl(function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);const s=this.clone();return s.applyTransform(n),s.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return G()}closestPointXY(t,e,n,s){return G()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return G()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&vi(e),this.extentRevision_=this.getRevision()}return lc(this.extent_,t)}rotate(t,e){G()}scale(t,e,n){G()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return G()}getType(){return G()}applyTransform(t){G()}intersectsExtent(t){return G()}translate(t,e){G()}transform(t,e){const n=bt(t),s=n.getUnits()=="tile-pixels"?function(r,o,a){const l=n.getExtent(),c=n.getWorldExtent(),h=St(c)/St(l);return pn(Fr,c[0],c[3],h,-h,0,0,0),Qc(r,0,r.length,a,Fr,o),ai(n,e)(r,o,a)}:ai(n,e);return this.applyTransform(s),this}}const ih=nh;class sh extends ih{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return sc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return G()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=kr(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){G()}setLayout(t,e,n){let s;if(t)s=kr(t);else{for(let r=0;r<n;++r){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}s=e.length,t=rh(s)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const s=this.getStride();Jc(n,0,n.length,s,t,e,n),this.changed()}}scale(t,e,n){e===void 0&&(e=t),n||(n=En(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();th(s,0,s.length,r,t,e,n,s),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const s=this.getStride();eh(n,0,n.length,s,t,e,n),this.changed()}}}function rh(i){let t;return i==2?t="XY":i==3?t="XYZ":i==4&&(t="XYZM"),t}function kr(i){let t;return i=="XY"?t=2:i=="XYZ"||i=="XYM"?t=3:i=="XYZM"&&(t=4),t}const Ks=sh;function Vr(i,t,e,n,s,r,o){const a=i[t],l=i[t+1],c=i[e]-a,h=i[e+1]-l;let u;if(c===0&&h===0)u=t;else{const d=((s-a)*c+(r-l)*h)/(c*c+h*h);if(d>1)u=e;else if(d>0){for(let f=0;f<n;++f)o[f]=dc(i[t+f],i[e+f],d);o.length=n;return}else u=t}for(let d=0;d<n;++d)o[d]=i[u+d];o.length=n}function ia(i,t,e,n,s){let r=i[t],o=i[t+1];for(t+=n;t<e;t+=n){const a=i[t],l=i[t+1],c=Ge(r,o,a,l);c>s&&(s=c),r=a,o=l}return s}function oh(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r){const a=e[r];s=ia(i,t,a,n,s),t=a}return s}function sa(i,t,e,n,s,r,o,a,l,c,h){if(t==e)return c;let u,d;if(s===0){if(d=Ge(o,a,i[t],i[t+1]),d<c){for(u=0;u<n;++u)l[u]=i[t+u];return l.length=n,d}return c}h=h||[NaN,NaN];let f=t+n;for(;f<e;)if(Vr(i,f-n,f,n,o,a,h),d=Ge(o,a,h[0],h[1]),d<c){for(c=d,u=0;u<n;++u)l[u]=h[u];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(d)-Math.sqrt(c))/s|0,1);if(r&&(Vr(i,e-n,t,n,o,a,h),d=Ge(o,a,h[0],h[1]),d<c)){for(c=d,u=0;u<n;++u)l[u]=h[u];l.length=n}return c}function ah(i,t,e,n,s,r,o,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=e.length;u<d;++u){const f=e[u];c=sa(i,t,f,n,s,r,o,a,l,c,h),t=f}return c}function lh(i,t,e,n){for(let s=0,r=e.length;s<r;++s)i[t++]=e[s];return t}function ra(i,t,e,n){for(let s=0,r=e.length;s<r;++s){const o=e[s];for(let a=0;a<n;++a)i[t++]=o[a]}return t}function ch(i,t,e,n,s){s=s||[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=ra(i,t,e[o],n);s[r++]=l,t=l}return s.length=r,s}function hh(i,t,e,n,s,r,o){const a=(e-t)/n;if(a<3){for(;t<e;t+=n)r[o++]=i[t],r[o++]=i[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[t,e-n];let h=0;for(;c.length>0;){const u=c.pop(),d=c.pop();let f=0;const g=i[d],_=i[d+1],p=i[u],v=i[u+1];for(let E=d+n;E<u;E+=n){const T=i[E],m=i[E+1],C=hc(T,m,g,_,p,v);C>f&&(h=E,f=C)}f>s&&(l[(h-t)/n]=1,d+n<h&&c.push(d,h),h+n<u&&c.push(h,u))}for(let u=0;u<a;++u)l[u]&&(r[o++]=i[t+u*n],r[o++]=i[t+u*n+1]);return o}function xe(i,t){return t*Math.round(i/t)}function uh(i,t,e,n,s,r,o){if(t==e)return o;let a=xe(i[t],s),l=xe(i[t+1],s);t+=n,r[o++]=a,r[o++]=l;let c,h;do if(c=xe(i[t],s),h=xe(i[t+1],s),t+=n,t==e)return r[o++]=c,r[o++]=h,o;while(c==a&&h==l);for(;t<e;){const u=xe(i[t],s),d=xe(i[t+1],s);if(t+=n,u==c&&d==h)continue;const f=c-a,g=h-l,_=u-a,p=d-l;if(f*p==g*_&&(f<0&&_<f||f==_||f>0&&_>f)&&(g<0&&p<g||g==p||g>0&&p>g)){c=u,h=d;continue}r[o++]=c,r[o++]=h,a=c,l=h,c=u,h=d}return r[o++]=c,r[o++]=h,o}function dh(i,t,e,n,s,r,o,a){for(let l=0,c=e.length;l<c;++l){const h=e[l];o=uh(i,t,h,n,s,r,o),a.push(o),t=h}return o}function oa(i,t,e,n,s){s=s!==void 0?s:[];let r=0;for(let o=t;o<e;o+=n)s[r++]=i.slice(o,o+n);return s.length=r,s}function fh(i,t,e,n,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=e[o];s[r++]=oa(i,t,l,n,s[r]),t=l}return s.length=r,s}function aa(i,t,e,n){let s=0,r=i[e-n],o=i[e-n+1];for(;t<e;t+=n){const a=i[t],l=i[t+1];s+=o*a-r*l,r=a,o=l}return s/2}function gh(i,t,e,n){let s=0;for(let r=0,o=e.length;r<o;++r){const a=e[r];s+=aa(i,t,a,n),t=a}return s}class li extends Ks{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new li(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,s){return s<Yo(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ia(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),sa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,s))}getArea(){return aa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return oa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=hh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new li(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ra(this.flatCoordinates,0,t,this.stride),this.changed()}}const zr=li;class Gs extends Ks{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new Gs(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,s){const r=this.flatCoordinates,o=Ge(t,e,r[0],r[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)n[l]=r[l];return n.length=a,o}return s}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return ic(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Uo(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=lh(this.flatCoordinates,0,t,this.stride),this.changed()}}const _h=Gs;function mh(i,t,e,n,s){return!Ho(s,function(o){return!ue(i,t,e,n,o[0],o[1])})}function ue(i,t,e,n,s,r){let o=0,a=i[e-n],l=i[e-n+1];for(;t<e;t+=n){const c=i[t],h=i[t+1];l<=r?h>r&&(c-a)*(r-l)-(s-a)*(h-l)>0&&o++:h<=r&&(c-a)*(r-l)-(s-a)*(h-l)<0&&o--,a=c,l=h}return o!==0}function la(i,t,e,n,s,r){if(e.length===0||!ue(i,t,e[0],n,s,r))return!1;for(let o=1,a=e.length;o<a;++o)if(ue(i,e[o-1],e[o],n,s,r))return!1;return!0}function ph(i,t,e,n,s,r,o){let a,l,c,h,u,d,f;const g=s[r+1],_=[];for(let E=0,T=e.length;E<T;++E){const m=e[E];for(h=i[m-n],d=i[m-n+1],a=t;a<m;a+=n)u=i[a],f=i[a+1],(g<=d&&f<=g||d<=g&&g<=f)&&(c=(g-d)/(f-d)*(u-h)+h,_.push(c)),h=u,d=f}let p=NaN,v=-1/0;for(_.sort(xs),h=_[0],a=1,l=_.length;a<l;++a){u=_[a];const E=Math.abs(u-h);E>v&&(c=(h+u)/2,la(i,t,e,n,c,g)&&(p=c,v=E)),h=u}return isNaN(p)&&(p=s[r]),o?(o.push(p,g,v),o):[p,g,v]}function Eh(i,t,e,n,s){let r;for(t+=n;t<e;t+=n)if(r=s(i.slice(t-n,t),i.slice(t,t+n)),r)return r;return!1}function ca(i,t,e,n,s){const r=Wo(Ee(),i,t,e,n);return Cn(s,r)?nc(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:Eh(i,t,e,n,function(o,a){return cc(s,o,a)}):!1}function ha(i,t,e,n,s){return!!(ca(i,t,e,n,s)||ue(i,t,e,n,s[0],s[1])||ue(i,t,e,n,s[0],s[3])||ue(i,t,e,n,s[2],s[1])||ue(i,t,e,n,s[2],s[3]))}function yh(i,t,e,n,s){if(!ha(i,t,e[0],n,s))return!1;if(e.length===1)return!0;for(let r=1,o=e.length;r<o;++r)if(mh(i,e[r-1],e[r],n,s)&&!ca(i,e[r-1],e[r],n,s))return!1;return!0}function vh(i,t,e,n){for(;t<e-n;){for(let s=0;s<n;++s){const r=i[t+s];i[t+s]=i[e-n+s],i[e-n+s]=r}t+=n,e-=n}}function ua(i,t,e,n){let s=0,r=i[e-n],o=i[e-n+1];for(;t<e;t+=n){const a=i[t],l=i[t+1];s+=(a-r)*(l+o),r=a,o=l}return s===0?void 0:s>0}function Th(i,t,e,n,s){s=s!==void 0?s:!1;for(let r=0,o=e.length;r<o;++r){const a=e[r],l=ua(i,t,a,n);if(r===0){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;t=a}return!0}function Kr(i,t,e,n,s){s=s!==void 0?s:!1;for(let r=0,o=e.length;r<o;++r){const a=e[r],l=ua(i,t,a,n);(r===0?s&&l||!s&&!l:s&&!l||!s&&l)&&vh(i,t,a,n),t=a}return t}class vn extends Ks{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?Fl(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new vn(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,s){return s<Yo(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(oh(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ah(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,s))}containsXY(t,e){return la(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return gh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),Kr(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,fh(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=En(this.getExtent());this.flatInteriorPoint_=ph(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new _h(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new zr(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new zr(e.slice(r,l),t);s.push(c),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Th(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Kr(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=dh(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new vn(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return yh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=ch(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function Gr(i){const t=i[0],e=i[1],n=i[2],s=i[3],r=[t,e,t,s,n,s,n,e,t,e];return new vn(r,"XY",[r.length])}const ki=0;class Ch extends Ut{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Ds(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&ta(),t.center&&(t.center=$t(t.center,this.projection_)),t.extent&&(t.extent=Ve(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const a in Ct)delete e[a];this.setProperties(e,!0);const n=Ah(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const s=bh(t),r=n.constraint,o=wh(t);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const s=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution(),o=r/2*(s[3]-e[3]+e[1]-s[1]),a=r/2*(s[0]-e[0]+e[2]-s[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let n=0;n<e.length;++n){let s=arguments[n];s.center&&(s=Object.assign({},s),s.center=$t(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=$t(s.anchor,this.getProjection())),e[n]=s}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,n;e>1&&typeof arguments[e-1]=="function"&&(n=arguments[e-1],--e);let s=0;for(;s<e&&!this.isDef();++s){const h=arguments[s];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(s===e){n&&Vn(n,!0);return}let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;s<e;++s){const h=arguments[s],u={start:r,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||Bc,callback:n};if(h.center&&(u.sourceCenter=o,u.targetCenter=h.center.slice(),o=u.targetCenter),h.zoom!==void 0?(u.sourceResolution=a,u.targetResolution=this.getResolutionForZoom(h.zoom),a=u.targetResolution):h.resolution&&(u.sourceResolution=a,u.targetResolution=h.resolution,a=u.targetResolution),h.rotation!==void 0){u.sourceRotation=l;const d=je(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=l+d,l=u.targetRotation}Rh(u)?u.complete=!0:r+=u.duration,c.push(u)}this.animations_.push(c),this.setHint(_t.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[_t.ANIMATING]>0}getInteracting(){return this.hints_[_t.INTERACTING]>0}cancelAnimations(){this.setHint(_t.ANIMATING,-this.hints_[_t.ANIMATING]);let t;for(let e=0,n=this.animations_.length;e<n;++e){const s=this.animations_[e];if(s[0].callback&&Vn(s[0].callback,!1),!t)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const s=this.animations_[n];let r=!0;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.complete)continue;const c=t-l.start;let h=l.duration>0?c/l.duration:1;h>=1?(l.complete=!0,h=1):r=!1;const u=l.easing(h);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],g=l.targetCenter[0],_=l.targetCenter[1];this.nextCenter_=l.targetCenter;const p=d+u*(g-d),v=f+u*(_-f);this.targetCenter_=[p,v]}if(l.sourceResolution&&l.targetResolution){const d=u===1?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=u===1?je(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),e=!0,!l.complete)break}if(r){this.animations_[n]=null,this.setHint(_t.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&Vn(o,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const s=this.getCenterInternal();return s!==void 0&&(n=[s[0]-e[0],s[1]-e[1]],Ps(n,t-this.getRotation()),Pc(n,e)),n}calculateCenterZoom(t,e){let n;const s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){const o=e[0]-t*(e[0]-s[0])/r,a=e[1]-t*(e[1]-s[1])/r;n=[o,a]}return n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],s=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(s*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(s*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&ds(t,this.getProjection())}getCenterInternal(){return this.get(Ct.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return jc(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();D(e,1);const n=this.getResolution();D(n!==void 0,2);const s=this.getRotation();return D(s!==void 0,3),ls(e,n,s,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Ct.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Ve(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=X(t)/e[0],s=St(t)/e[1];return Math.max(n,s)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(e/n)/Math.log(t);return function(r){return e/Math.pow(t,r*s)}}getRotation(){return this.get(Ct.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(n/s)/e;return function(o){return Math.log(n/o)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=Vi(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],e,n)}return{center:s.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,n,s;if(this.resolutions_){const r=Is(this.resolutions_,t,1);e=r,n=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=n/this.resolutions_[r+1]}else n=this.maxResolution_,s=this.zoomFactor_;return e+Math.log(n/t)/Math.log(s)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=Z(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,Z(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if(D(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){D(!Ss(t),25);const s=Ve(t,this.getProjection());n=Gr(s)}else if(t.getType()==="Circle"){const s=Ve(t.getExtent(),this.getProjection());n=Gr(s),n.rotate(this.getRotation(),En(s))}else n=t;this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),s=Math.sin(-e),r=t.getFlatCoordinates(),o=t.getStride();let a=1/0,l=1/0,c=-1/0,h=-1/0;for(let u=0,d=r.length;u<d;u+=o){const f=r[u]*n-r[u+1]*s,g=r[u]*s+r[u+1]*n;a=Math.min(a,f),l=Math.min(l,g),c=Math.max(c,f),h=Math.max(h,g)}return[a,l,c,h]}fitInternal(t,e){e=e||{};let n=e.size;n||(n=this.getViewportSizeMinusPadding_());const s=e.padding!==void 0?e.padding:[0,0,0,0],r=e.nearest!==void 0?e.nearest:!1;let o;e.minResolution!==void 0?o=e.minResolution:e.maxZoom!==void 0?o=this.getResolutionForZoom(e.maxZoom):o=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,r?0:1);const c=this.getRotation(),h=Math.sin(c),u=Math.cos(c),d=En(a);d[0]+=(s[1]-s[3])/2*l,d[1]+=(s[0]-s[2])/2*l;const f=d[0]*u-d[1]*h,g=d[1]*u+d[0]*h,_=this.getConstrainedCenter([f,g],l),p=e.callback?e.callback:ii;e.duration!==void 0?this.animateInternal({resolution:l,center:_,duration:e.duration,easing:e.easing},p):(this.targetResolution_=l,this.targetCenter_=_,this.applyTargetState_(!1,!0),Vn(p,!0))}centerOn(t,e,n){this.centerOnInternal($t(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(Vi(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,s){let r;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-n),l=Vi(t,s,[a[0]/2+o[3],a[1]/2+o[0]],e,n);r=[t[0]-l[0],t[1]-l[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=ds(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&$t(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,s,n);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=$t(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(s,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&$t(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,s=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,n),a=this.constraints_.center(this.targetCenter_,o,r,n,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(Ct.ROTATION)!==s&&this.set(Ct.ROTATION,s),this.get(Ct.RESOLUTION)!==o&&(this.set(Ct.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Ct.CENTER)||!oi(this.get(Ct.CENTER),a))&&this.set(Ct.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=t!==void 0?t:200;const s=e||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,this.applyTargetState_();return}n=n||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!oi(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:t,easing:tn,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(_t.INTERACTING,1)}endInteraction(t,e,n){n=n&&$t(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.getInteracting()&&(this.setHint(_t.INTERACTING,-1),this.resolveConstraints(t,e,n))}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}function Vn(i,t){setTimeout(function(){i(t)},0)}function bh(i){if(i.extent!==void 0){const e=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return Mr(i.extent,i.constrainOnlyCenter,e)}const t=Ds(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,Mr(e,!1,!1)}return Uc}function Ah(i){let t,e,n,o=i.minZoom!==void 0?i.minZoom:ki,a=i.maxZoom!==void 0?i.maxZoom:28;const l=i.zoomFactor!==void 0?i.zoomFactor:2,c=i.multiWorld!==void 0?i.multiWorld:!1,h=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,u=i.showFullExtent!==void 0?i.showFullExtent:!1,d=Ds(i.projection,"EPSG:3857"),f=d.getExtent();let g=i.constrainOnlyCenter,_=i.extent;if(!c&&!_&&d.isGlobal()&&(g=!1,_=f),i.resolutions!==void 0){const p=i.resolutions;e=p[o],n=p[a]!==void 0?p[a]:p[p.length-1],i.constrainResolution?t=Wc(p,h,!g&&_,u):t=Dr(e,n,h,!g&&_,u)}else{const v=(f?Math.max(X(f),St(f)):360*yn.degrees/d.getMetersPerUnit())/Ns/Math.pow(2,ki),E=v/Math.pow(2,28-ki);e=i.maxResolution,e!==void 0?o=0:e=v/Math.pow(l,o),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=e/Math.pow(l,a):n=v/Math.pow(l,a):n=E),a=o+Math.floor(Math.log(e/n)/Math.log(l)),n=e/Math.pow(l,a-o),i.constrainResolution?t=Hc(l,e,n,h,!g&&_,u):t=Dr(e,n,h,!g&&_,u)}return{constraint:t,maxResolution:e,minResolution:n,minZoom:o,zoomFactor:l}}function wh(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const e=i.constrainRotation;return e===void 0||e===!0?Zc():e===!1?$r:typeof e=="number"?Xc(e):$r}return zs}function Rh(i){return!(i.sourceCenter&&i.targetCenter&&!oi(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function Vi(i,t,e,n,s){const r=Math.cos(-s);let o=Math.sin(-s),a=i[0]*r-i[1]*o,l=i[1]*r+i[0]*o;a+=(t[0]/2-e[0])*n,l+=(e[1]-t[1]/2)*n,o=-o;const c=a*r-l*o,h=l*r+a*o;return[c,h]}const It=Ch;class xh extends Bo{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(P.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(P.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(j(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=M(t,S.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e;t instanceof It?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t;const n=this.getExtent();return this.getVisible()&&js(this.getLayerState(),e.viewState)&&(!n||Cn(n,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const n=this.getSource();if(n&&(e=n.getAttributions()),!e)return[];const s=t instanceof It?t.getViewStateAndExtent():t;let r=e(s);return Array.isArray(r)||(r=[r]),r}render(t,e){const n=this.getRenderer();if(n.prepareFrame(t))return this.rendered=!0,n.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(P.MAP,t)}getMapInternal(){return this.get(P.MAP)}setMap(t){this.mapPrecomposeKey_&&(j(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(j(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=M(t,te.PRECOMPOSE,function(e){const s=e.frameState.layerStatesArray,r=this.getLayerState(!1);D(!s.some(function(o){return o.layer===r.layer}),67),s.push(r)},this),this.mapRenderKey_=M(this,S.CHANGE,t.render,t),this.changed())}setSource(t){this.set(P.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function js(i,t){if(!i.visible)return!1;const e=t.resolution;if(e<i.minResolution||e>=i.maxResolution)return!1;const n=t.zoom;return n>i.minZoom&&n<=i.maxZoom}const Ys=xh;class Ih extends Rs{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){G()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,s=t.pixelToCoordinateTransform;pn(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),jo(s,n)}forEachFeatureAtCoordinate(t,e,n,s,r,o,a,l){let c;const h=e.viewState;function u(m,C,b,A){return r.call(o,C,m?b:null,A)}const d=h.projection,f=Dc(t.slice(),d),g=[[0,0]];if(d.canWrapX()&&s){const m=d.getExtent(),C=X(m);g.push([-C,0],[C,0])}const _=e.layerStatesArray,p=_.length,v=[],E=[];for(let m=0;m<g.length;m++)for(let C=p-1;C>=0;--C){const b=_[C],A=b.layer;if(A.hasRenderer()&&js(b,h)&&a.call(l,A)){const R=A.getRenderer(),L=A.getSource();if(R&&L){const O=L.getWrapX()?f:t,$=u.bind(null,b.managed);E[0]=O[0]+g[m][0],E[1]=O[1]+g[m][1],c=R.forEachFeatureAtCoordinate(E,e,n,$,v)}if(c)return c}}if(v.length===0)return;const T=1/v.length;return v.forEach((m,C)=>m.distanceSq+=C*T),v.sort((m,C)=>m.distanceSq-C.distanceSq),v.some(m=>c=m.callback(m.feature,m.layer,m.geometry)),c}hasFeatureAtCoordinate(t,e,n,s,r,o){return this.forEachFeatureAtCoordinate(t,e,n,s,ni,this,r,o)!==void 0}getMap(){return this.map_}renderFrame(t){G()}scheduleExpireIconCache(t){Zo.canExpireCache()&&t.postRenderFunctions.push(Lh)}}function Lh(i,t){Zo.expire()}const Oh=Ih;class Sh extends re{constructor(t,e,n,s){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=s}}const da=Sh,zn="ol-hidden",Ai="ol-unselectable",Us="ol-control",jr="ol-collapsed";function He(i,t,e,n){let s;return e&&e.length?s=e.shift():Ko?s=new OffscreenCanvas(i||300,t||300):s=document.createElement("canvas"),i&&(s.width=i),t&&(s.height=t),s.getContext("2d",n)}function Ws(i){const t=i.canvas;t.width=1,t.height=1,i.clearRect(0,0,1,1)}function Yr(i,t){const e=t.parentNode;e&&e.replaceChild(i,t)}function fs(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}function Nh(i){for(;i.lastChild;)i.removeChild(i.lastChild)}function Ph(i,t){const e=i.childNodes;for(let n=0;;++n){const s=e[n],r=t[n];if(!s&&!r)break;if(s!==r){if(!s){i.appendChild(r);continue}if(!r){i.removeChild(s),--n;continue}i.insertBefore(r,s)}}}const Mh=new Ut;class Dh extends Oh{constructor(t){super(t),this.fontChangeListenerKey_=M(Mh,mn.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Ai+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const s=new da(t,void 0,e);n.dispatchEvent(s)}}disposeInternal(){j(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(te.PRECOMPOSE,t);const e=t.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),n=t.viewState;this.children_.length=0;const s=[];let r=null;for(let o=0,a=e.length;o<a;++o){const l=e[o];t.layerIndex=o;const c=l.layer,h=c.getSourceState();if(!js(l,n)||h!="ready"&&h!="undefined"){c.unrender();continue}const u=c.render(t,r);u&&(u!==r&&(this.children_.push(u),r=u),"getDeclutter"in c&&s.push(c))}for(let o=s.length-1;o>=0;--o)s[o].renderDeclutter(t);Ph(this.element_,this.children_),this.dispatchRenderEvent(te.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}}const $h=Dh;class Qt extends re{constructor(t,e){super(t),this.layer=e}}const zi={LAYERS:"layers"};class Hs extends Bo{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(zi.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new zt(n.slice(),{unique:!0}):D(typeof n.getArray=="function",43):n=new zt(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(j),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(M(t,mt.ADD,this.handleLayersAdd_,this),M(t,mt.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(j);Ei(this.listenerKeys_);const e=t.getArray();for(let n=0,s=e.length;n<s;n++){const r=e[n];this.registerLayerListeners_(r),this.dispatchEvent(new Qt("addlayer",r))}this.changed()}registerLayerListeners_(t){const e=[M(t,mn.PROPERTYCHANGE,this.handleLayerChange_,this),M(t,S.CHANGE,this.handleLayerChange_,this)];t instanceof Hs&&e.push(M(t,"addlayer",this.handleLayerGroupAdd_,this),M(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[st(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new Qt("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Qt("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Qt("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=st(e);this.listenerKeys_[n].forEach(j),delete this.listenerKeys_[n],this.dispatchEvent(new Qt("removelayer",e)),this.changed()}getLayers(){return this.get(zi.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const n=e.getArray();for(let s=0,r=n.length;s<r;++s)this.dispatchEvent(new Qt("removelayer",n[s]))}this.set(zi.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],n=e.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(e)});const s=this.getLayerState();let r=s.zIndex;!t&&s.zIndex===void 0&&(r=0);for(let o=n,a=e.length;o<a;o++){const l=e[o];l.opacity*=s.opacity,l.visible=l.visible&&s.visible,l.maxResolution=Math.min(l.maxResolution,s.maxResolution),l.minResolution=Math.max(l.minResolution,s.minResolution),l.minZoom=Math.max(l.minZoom,s.minZoom),l.maxZoom=Math.min(l.maxZoom,s.maxZoom),s.extent!==void 0&&(l.extent!==void 0?l.extent=fn(l.extent,s.extent):l.extent=s.extent),l.zIndex===void 0&&(l.zIndex=r)}return e}getSourceState(){return"ready"}}const wi=Hs;class Fh extends re{constructor(t,e,n){super(t),this.map=e,this.frameState=n!==void 0?n:null}}const Pe=Fh;class kh extends Pe{constructor(t,e,n,s,r,o){super(t,e,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Ft=kh,K={SINGLECLICK:"singleclick",CLICK:S.CLICK,DBLCLICK:S.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},gs={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Vh extends Ls{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=M(n,gs.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=M(n,gs.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(S.TOUCHMOVE,this.boundHandleTouchMove_,Go?{passive:!1}:!1)}emulateClick_(t){let e=new Ft(K.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Ft(K.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Ft(K.SINGLECLICK,this.map_,t);this.dispatchEvent(n)},250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==K.POINTERUP||e.type==K.POINTERCANCEL){delete this.trackedTouches_[n];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==e.target){delete this.trackedTouches_[s];break}}else(e.type==K.POINTERDOWN||e.type==K.POINTERMOVE)&&(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new Ft(K.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(j),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new Ft(K.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(M(n,K.POINTERMOVE,this.handlePointerMove_,this),M(n,K.POINTERUP,this.handlePointerUp_,this),M(this.element_,K.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(M(this.element_.getRootNode(),K.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new Ft(K.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Ft(K.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(j(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(S.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(j(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(j),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const zh=Vh,qt={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},J={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ci=1/0;class Kh{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Ei(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const s=this.keyFunction_(n);return delete this.queuedElements_[s],n}enqueue(t){D(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=ci?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,s=e.length,r=e[t],o=n[t],a=t;for(;t<s>>1;){const l=this.getLeftChildIndex_(t),c=this.getRightChildIndex_(t),h=c<s&&n[c]<n[l]?c:l;e[t]=e[h],n[t]=n[h],t=h}e[t]=r,n[t]=o,this.siftDown_(a,t)}siftDown_(t,e){const n=this.elements_,s=this.priorities_,r=n[e],o=s[e];for(;e>t;){const a=this.getParentIndex_(e);if(s[a]>o)n[e]=n[a],s[e]=s[a],e=a;else break}n[e]=r,s[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let s=0;const r=e.length;let o,a,l;for(a=0;a<r;++a)o=e[a],l=t(o),l==ci?delete this.queuedElements_[this.keyFunction_(o)]:(n[s]=l,e[s++]=o);e.length=s,n.length=s,this.heapify_()}}const Gh=Kh,w={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class jh extends Gh{constructor(t,e){super(function(n){return t.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(S.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(n===w.LOADED||n===w.ERROR||n===w.EMPTY){n!==w.ERROR&&e.removeEventListener(S.CHANGE,this.boundHandleTileChange_);const s=e.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n=0,s,r,o;for(;this.tilesLoading_<t&&n<e&&this.getCount()>0;)r=this.dequeue()[0],o=r.getKey(),s=r.getState(),s===w.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++n,r.load())}}const Yh=jh;function Uh(i,t,e,n,s){if(!i||!(e in i.wantedTiles)||!i.wantedTiles[e][t.getKey()])return ci;const r=i.viewState.center,o=n[0]-r[0],a=n[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}class Wh extends Ut{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){fs(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&fs(this.element);for(let e=0,n=this.listenerKeys.length;e<n;++e)j(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==ii&&this.listenerKeys.push(M(t,qt.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const Ri=Wh;class Hh extends Ri{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const e=t.className!==void 0?t.className:"ol-attribution",n=t.tipLabel!==void 0?t.tipLabel:"Attributions",s=t.expandClassName!==void 0?t.expandClassName:e+"-expand",r=t.collapseLabel!==void 0?t.collapseLabel:"",o=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(S.CLICK,this.handleClick_.bind(this),!1);const c=e+" "+Ai+" "+Us+(this.collapsed_&&this.collapsible_?" "+jr:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=c,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap(s=>s.getAttributions(t)))),n=!this.getMap().getAllLayers().some(s=>s.getSource()&&s.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(n),e}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!mi(e,this.renderedAttributions_)){Nh(this.ulElement_);for(let s=0,r=e.length;s<r;++s){const o=document.createElement("li");o.innerHTML=e[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(jr),this.collapsed_?Yr(this.collapseLabel_,this.label_):Yr(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const Xh=Hh;class Zh extends Ri{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",n=t.label!==void 0?t.label:"",s=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(s));const r=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(S.CLICK,this.handleClick_.bind(this),!1);const a=e+" "+Ai+" "+Us,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(zn)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const n=e.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:tn}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const s="rotate("+n+"rad)";if(this.autoHide_){const r=this.element.classList.contains(zn);!r&&n===0?this.element.classList.add(zn):r&&n!==0&&this.element.classList.remove(zn)}this.label_.style.transform=s}this.rotation_=n}}const Bh=Zh;class qh extends Ri{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",n=t.delta!==void 0?t.delta:1,s=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",r=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",c=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof o=="string"?document.createTextNode(o):o),h.addEventListener(S.CLICK,this.handleClick_.bind(this,n),!1);const u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=c,u.appendChild(typeof a=="string"?document.createTextNode(a):a),u.addEventListener(S.CLICK,this.handleClick_.bind(this,-n),!1);const d=e+" "+Ai+" "+Us,f=this.element;f.className=d,f.appendChild(h),f.appendChild(u),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const n=this.getMap().getView();if(!n)return;const s=n.getZoom();if(s!==void 0){const r=n.getConstrainedZoom(s+t);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:this.duration_,easing:tn})):n.setZoom(r)}}}const Qh=qh;function Jh(i){i=i||{};const t=new zt;return(i.zoom!==void 0?i.zoom:!0)&&t.push(new Qh(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&t.push(new Bh(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&t.push(new Xh(i.attributionOptions)),t}const Ur={ACTIVE:"active"};class tu extends Ut{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Ur.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Ur.ACTIVE,t)}setMap(t){this.map_=t}}function eu(i,t,e){const n=i.getCenterInternal();if(n){const s=[n[0]+t[0],n[1]+t[1]];i.animateInternal({duration:e!==void 0?e:250,easing:qc,center:i.getConstrainedCenter(s)})}}function Xs(i,t,e,n){const s=i.getZoom();if(s===void 0)return;const r=i.getConstrainedZoom(s+t),o=i.getResolutionForZoom(r);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:o,anchor:e,duration:n!==void 0?n:250,easing:tn})}const An=tu;class nu extends An{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==K.DBLCLICK){const n=t.originalEvent,s=t.map,r=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_,a=s.getView();Xs(a,o,r,this.duration_),n.preventDefault(),e=!0}return!e}}const iu=nu;class su extends An{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==K.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==K.POINTERUP){const n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==K.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==K.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function Zs(i){const t=i.length;let e=0,n=0;for(let s=0;s<t;s++)e+=i[s].clientX,n+=i[s].clientY;return{clientX:e/t,clientY:n/t}}const wn=su;function _s(i){const t=arguments;return function(e){let n=!0;for(let s=0,r=t.length;s<r&&(n=n&&t[s](e),!!n);++s);return n}}const ru=function(i){const t=i.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},ou=function(i){const t=i.map.getTargetElement(),e=i.map.getOwnerDocument().activeElement;return t.contains(e)},fa=function(i){return i.map.getTargetElement().hasAttribute("tabindex")?ou(i):!0},au=ni,ga=function(i){const t=i.originalEvent;return t.button==0&&!(Bl&&ql&&t.ctrlKey)},_a=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},lu=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},ma=function(i){const t=i.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},Ki=function(i){const t=i.originalEvent;return D(t!==void 0,56),t.pointerType=="mouse"},cu=function(i){const t=i.originalEvent;return D(t!==void 0,56),t.isPrimary&&t.button===0};class hu extends wn{constructor(t){super({stopDown:pi}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:_s(_a,cu);this.condition_=t.onFocusOnly?_s(fa,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const n=this.targetPointers,s=e.getEventPixel(Zs(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],a=t.map.getView();Mc(r,a.getResolution()),Ps(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),l=e.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:tn})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const uu=hu;class du extends wn{constructor(t){t=t||{},super({stopDown:pi}),this.condition_=t.condition?t.condition:ru,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!Ki(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===zs)return;const s=e.getSize(),r=t.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return Ki(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return Ki(t)&&ga(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const fu=du;class gu extends Rs{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",s=this.element_.style;s.left=Math.min(t[0],e[0])+n,s.top=Math.min(t[1],e[1])+n,s.width=Math.abs(e[0]-t[0])+n,s.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,s=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new vn([s])}getGeometry(){return this.geometry_}}const _u=gu,Kn={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Gi extends re{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}class mu extends wn{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new _u(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:ga,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const s=n[0]-e[0],r=n[1]-e[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Gi(Kn.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Gi(e?Kn.BOXEND:Kn.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Gi(Kn.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}}const pu=mu;class Eu extends pu{constructor(t){t=t||{};const e=t.condition?t.condition:lu;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const n=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=n.rotatedExtentForGeometry(s),o=n.getResolutionForExtentInternal(r),a=n.getResolution()/o;s=s.clone(),s.scale(a*a)}n.fitInternal(s,{duration:this.duration_,easing:tn})}}const yu=Eu,he={LEFT:37,UP:38,RIGHT:39,DOWN:40};class vu extends An{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return _a(e)&&ma(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==S.KEYDOWN){const n=t.originalEvent,s=n.keyCode;if(this.condition_(t)&&(s==he.DOWN||s==he.LEFT||s==he.RIGHT||s==he.UP)){const o=t.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;s==he.DOWN?c=-a:s==he.LEFT?l=-a:s==he.RIGHT?l=a:c=a;const h=[l,c];Ps(h,o.getRotation()),eu(o,h,this.duration_),n.preventDefault(),e=!0}}return!e}}const Tu=vu;class Cu extends An{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:ma,this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==S.KEYDOWN||t.type==S.KEYPRESS){const n=t.originalEvent,s=n.key;if(this.condition_(t)&&(s==="+"||s==="-")){const r=t.map,o=s==="+"?this.delta_:-this.delta_,a=r.getView();Xs(a,o,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}}const bu=Cu;class Au{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const s=this.points_[e+2]-this.points_[n+2];if(s<1e3/60)return!1;const r=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const wu=Au;class Ru extends An{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:au;this.condition_=t.onFocusOnly?_s(fa,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==S.WHEEL)return!0;const n=t.map,s=t.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let r;if(t.type==S.WHEEL&&(r=s.deltaY,Xl&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=zo),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=n.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=r;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-Z(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Xs(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const xu=Ru;class Iu extends wn{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=pi),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-n.clientY,s.clientX-n.clientX);if(this.lastAngle_!==void 0){const l=r-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=l}this.lastAngle_=r;const o=t.map,a=o.getView();a.getConstraints().rotation!==zs&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Zs(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}const Lu=Iu;class Ou extends wn{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=pi),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],s=this.targetPointers[1],r=n.clientX-s.clientX,o=n.clientY-s.clientY,a=Math.sqrt(r*r+o*o);this.lastDistance_!==void 0&&(e=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,c=l.getView();e!=1&&(this.lastScaleDelta_=e),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Zs(this.targetPointers))),l.render(),c.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const n=t.map.getView(),s=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}const Su=Ou;function Nu(i){i=i||{};const t=new zt,e=new wu(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&t.push(new fu),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&t.push(new iu({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&t.push(new uu({onFocusOnly:i.onFocusOnly,kinetic:e})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&t.push(new Lu),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&t.push(new Su({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(t.push(new Tu),t.push(new bu({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&t.push(new xu({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&t.push(new yu({duration:i.zoomDuration})),t}function Wr(i){return i[0]>0&&i[1]>0}function Pu(i,t,e){return e===void 0&&(e=[0,0]),e[0]=i[0]*t+.5|0,e[1]=i[1]*t+.5|0,e}function kt(i,t){return Array.isArray(i)?i:(t===void 0?t=[i,i]:(t[0]=i,t[1]=i),t)}function pa(i){if(i instanceof Ys){i.setMapInternal(null);return}i instanceof wi&&i.getLayers().forEach(pa)}function Ea(i,t){if(i instanceof Ys){i.setMapInternal(t);return}if(i instanceof wi){const e=i.getLayers().getArray();for(let n=0,s=e.length;n<s;++n)Ea(e[n],t)}}let Mu=class extends Ut{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=Du(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:zo,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Ke(),this.pixelToCoordinateTransform_=Ke(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||Jh(),this.interactions=e.interactions||Nu({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Yh(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(J.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(J.VIEW,this.handleViewChanged_),this.addChangeListener(J.SIZE,this.handleSizeChanged_),this.addChangeListener(J.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const n=this;t.view&&!(t.view instanceof It)&&t.view.then(function(s){n.setView(new It(s))}),this.controls.addEventListener(mt.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(mt.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(mt.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(mt.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(mt.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(mt.REMOVE,s=>{const r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Ea(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const r=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.layerFilter!==void 0?n.layerFilter:ni,a=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,a,e,null,o,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,function(s){n.push(s)},e),n}getAllLayers(){const t=[];function e(n){n.forEach(function(s){s instanceof wi?e(s.getLayers()):t.push(s)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};const s=e.layerFilter!==void 0?e.layerFilter:ni,r=e.hitTolerance!==void 0?e.hitTolerance:0,o=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,o,s,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const n=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=n.width/s[0],o=n.height/s[1],a="changedTouches"in t?t.changedTouches[0]:t;return[(a.clientX-n.left)/r,(a.clientY-n.top)/o]}getTarget(){return this.get(J.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return ds(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?lt(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(J.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof zt){e.setLayers(t);return}const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const s=t[e];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const e=$t(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?lt(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(J.SIZE)}getView(){return this.get(J.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,s){return Uh(this.frameState_,t,e,n,s)}handleBrowserEvent(t,e){e=e||t.type;const n=new Ft(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===gs.POINTERDOWN||n===S.WHEEL||n===S.KEYDOWN){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=e.target;if(this.overlayContainerStopEvent_.contains(o)||!(r===s?s.documentElement:r).contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let s=this.maxTilesLoading_,r=s;if(t){const o=t.viewHints;if(o[_t.ANIMATING]||o[_t.INTERACTING]){const a=Date.now()-t.time>8;s=a?0:8,r=a?0:2}}e.getTilesLoading()<s&&(e.reprioritize(),e.loadMoreTiles(s,r))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(te.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(te.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Pe(qt.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Pe(qt.LOADSTART,this,t))));const n=this.postRenderFunctions_;for(let s=0,r=n.length;s<r;++s)n[s](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,s=this.targetChangeHandlerKeys_.length;n<s;++n)j(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(S.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(S.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,fs(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host)}const t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new $h(this)),this.mapBrowserEventHandler_=new zh(this,this.moveTolerance_);for(const r in K)this.mapBrowserEventHandler_.addEventListener(K[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(S.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(S.WHEEL,this.boundHandleBrowserEvent_,Go?{passive:!1}:!1);const n=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[M(n,S.KEYDOWN,this.handleBrowserEvent,this),M(n,S.KEYPRESS,this.handleBrowserEvent,this)];const s=e.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(e)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(j(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(j(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=M(t,mn.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=M(t,S.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(j),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Qt("addlayer",t)),this.layerGroupPropertyListenerKeys_=[M(t,mn.PROPERTYCHANGE,this.render,this),M(t,S.CHANGE,this.render,this),M(t,"addlayer",this.handleLayerAdd_,this),M(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const s=t[e].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){pa(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),s=this.frameState_;let r=null;if(e!==void 0&&Wr(e)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:ls(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:st(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=ls(a.nextCenter,a.nextResolution,l,e)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!Ss(this.previousExtent_)&&!os(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Pe(qt.MOVESTART,this,s)),this.previousExtent_=vi(this.previousExtent_)),this.previousExtent_&&!r.viewHints[_t.ANIMATING]&&!r.viewHints[_t.INTERACTING]&&!os(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Pe(qt.MOVEEND,this,r)),ec(r.extent,this.previousExtent_))),this.dispatchEvent(new Pe(qt.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(qt.LOADSTART)||this.hasListener(qt.LOADEND)||this.hasListener(te.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new Qt("removelayer",e)),this.set(J.LAYERGROUP,t)}setSize(t){this.set(J.SIZE,t)}setTarget(t){this.set(J.TARGET,t)}setView(t){if(!t||t instanceof It){this.set(J.VIEW,t);return}this.set(J.VIEW,new It);const e=this;t.then(function(n){e.setView(new It(n))})}updateSize(){const t=this.getTargetElement();let e;if(t){const s=getComputedStyle(t),r=t.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=t.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(e=[r,o],!Wr(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Jo("No map visible because the map container's width or height are 0."))}const n=this.getSize();e&&(!n||!mi(e,n))&&(this.setSize(e),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let e;const n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}}};function Du(i){let t=null;i.keyboardEventTarget!==void 0&&(t=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const e={},n=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new wi({layers:i.layers});e[J.LAYERGROUP]=n,e[J.TARGET]=i.target,e[J.VIEW]=i.view instanceof It?i.view:new It;let s;i.controls!==void 0&&(Array.isArray(i.controls)?s=new zt(i.controls.slice()):(D(typeof i.controls.getArray=="function",47),s=i.controls));let r;i.interactions!==void 0&&(Array.isArray(i.interactions)?r=new zt(i.interactions.slice()):(D(typeof i.interactions.getArray=="function",48),r=i.interactions));let o;return i.overlays!==void 0?Array.isArray(i.overlays)?o=new zt(i.overlays.slice()):(D(typeof i.overlays.getArray=="function",49),o=i.overlays):o=new zt,{controls:s,interactions:r,keyboardEventTarget:t,overlays:o,values:e}}const $u=Mu;class Fu extends Ls{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(S.CHANGE)}release(){this.state===w.ERROR&&this.setState(w.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==w.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==w.LOADED){t.interimTile=null;break}else t.getState()==w.LOADING?e=t:t.getState()==w.IDLE?e.interimTile=t.interimTile:e=t;t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==w.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){G()}getAlpha(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(!n)n=e,this.transitionStarts_[t]=n;else if(n===-1)return 1;const s=e-n+1e3/60;return s>=this.transition_?1:na(s/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const ya=Fu,hn={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function ku(i,t,e){const n=i;let s=!0,r=!1,o=!1;const a=[si(n,S.LOAD,function(){o=!0,r||t()})];return n.src&&Ql?(r=!0,n.decode().then(function(){s&&t()}).catch(function(l){s&&(o?t():e())})):a.push(si(n,S.ERROR,e)),function(){s=!1,a.forEach(j)}}class Vu extends ya{constructor(t,e,n,s,r,o){super(t,e,o),this.crossOrigin_=s,this.src_=n,this.key=n,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=w.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=w.ERROR,this.unlistenImage_(),this.image_=zu(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=w.LOADED:this.state=w.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==w.ERROR&&(this.state=w.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==w.IDLE&&(this.state=w.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=ku(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function zu(){const i=He(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}const va=Vu,Ku=.5,Gu=10,Hr=.25;class ju{constructor(t,e,n,s,r,o){this.sourceProj_=t,this.targetProj_=e;let a={};const l=ai(this.targetProj_,this.sourceProj_);this.transformInv_=function(E){const T=E[0]+"/"+E[1];return a[T]||(a[T]=l(E)),a[T]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&X(s)==X(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?X(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?X(this.targetProj_.getExtent()):null;const c=ye(n),h=bi(n),u=Ci(n),d=Ti(n),f=this.transformInv_(c),g=this.transformInv_(h),_=this.transformInv_(u),p=this.transformInv_(d),v=Gu+(o?Math.max(0,Math.ceil(Math.log2(as(n)/(o*o*256*256)))):0);if(this.addQuad_(c,h,u,d,f,g,_,p,v),this.wrapsXInSource_){let E=1/0;this.triangles_.forEach(function(T,m,C){E=Math.min(E,T.source[0][0],T.source[1][0],T.source[2][0])}),this.triangles_.forEach(T=>{if(Math.max(T.source[0][0],T.source[1][0],T.source[2][0])-E>this.sourceWorldWidth_/2){const m=[[T.source[0][0],T.source[0][1]],[T.source[1][0],T.source[1][1]],[T.source[2][0],T.source[2][1]]];m[0][0]-E>this.sourceWorldWidth_/2&&(m[0][0]-=this.sourceWorldWidth_),m[1][0]-E>this.sourceWorldWidth_/2&&(m[1][0]-=this.sourceWorldWidth_),m[2][0]-E>this.sourceWorldWidth_/2&&(m[2][0]-=this.sourceWorldWidth_);const C=Math.min(m[0][0],m[1][0],m[2][0]);Math.max(m[0][0],m[1][0],m[2][0])-C<this.sourceWorldWidth_/2&&(T.source=m)}})}a={}}addTriangle_(t,e,n,s,r,o){this.triangles_.push({source:[s,r,o],target:[t,e,n]})}addQuad_(t,e,n,s,r,o,a,l,c){const h=br([r,o,a,l]),u=this.sourceWorldWidth_?X(h)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&u>.5&&u<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const p=br([t,e,n,s]);g=X(p)/this.targetWorldWidth_>Hr||g}!f&&this.sourceProj_.isGlobal()&&u&&(g=u>Hr||g)}if(!g&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Cn(h,this.maxSourceExtent_))return;let _=0;if(!g&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)g=!0;else if(_=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),_!=1&&_!=2&&_!=4&&_!=8)return}if(c>0){if(!g){const p=[(t[0]+n[0])/2,(t[1]+n[1])/2],v=this.transformInv_(p);let E;f?E=(je(r[0],d)+je(a[0],d))/2-je(v[0],d):E=(r[0]+a[0])/2-v[0];const T=(r[1]+a[1])/2-v[1];g=E*E+T*T>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const p=[(e[0]+n[0])/2,(e[1]+n[1])/2],v=this.transformInv_(p),E=[(s[0]+t[0])/2,(s[1]+t[1])/2],T=this.transformInv_(E);this.addQuad_(t,e,p,E,r,o,v,T,c-1),this.addQuad_(E,p,n,s,T,v,a,l,c-1)}else{const p=[(t[0]+e[0])/2,(t[1]+e[1])/2],v=this.transformInv_(p),E=[(n[0]+s[0])/2,(n[1]+s[1])/2],T=this.transformInv_(E);this.addQuad_(t,p,E,s,r,v,T,l,c-1),this.addQuad_(p,e,n,E,v,o,a,T,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}_&11||this.addTriangle_(t,n,s,r,a,l),_&14||this.addTriangle_(t,n,e,r,a,o),_&&(_&13||this.addTriangle_(e,s,t,o,l,r),_&7||this.addTriangle_(e,s,n,o,l,a))}calculateSourceExtent(){const t=Ee();return this.triangles_.forEach(function(e,n,s){const r=e.source;qn(t,r[0]),qn(t,r[1]),qn(t,r[2])}),t}getTriangles(){return this.triangles_}}const Yu=ju;let ji;const Ue=[];function Xr(i,t,e,n,s){i.beginPath(),i.moveTo(0,0),i.lineTo(t,e),i.lineTo(n,s),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(t,n)+1,Math.max(e,s)),i.restore()}function Yi(i,t){return Math.abs(i[t*4]-210)>2||Math.abs(i[t*4+3]-.75*255)>2}function Uu(){if(ji===void 0){const i=He(6,6,Ue);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",Xr(i,4,5,4,0),Xr(i,4,5,0,5);const t=i.getImageData(0,0,3,3).data;ji=Yi(t,0)||Yi(t,4)||Yi(t,8),Ws(i),Ue.push(i.canvas)}return ji}function Zr(i,t,e,n){const s=Fs(e,t,i);let r=Nr(t,n,e);const o=t.getMetersPerUnit();o!==void 0&&(r*=o);const a=i.getMetersPerUnit();a!==void 0&&(r/=a);const l=i.getExtent();if(!l||Os(l,s)){const c=Nr(i,r,s)/r;isFinite(c)&&c>0&&(r/=c)}return r}function Wu(i,t,e,n){const s=En(e);let r=Zr(i,t,s,n);return(!isFinite(r)||r<=0)&&Ho(e,function(o){return r=Zr(i,t,o,n),isFinite(r)&&r>0}),r}function Hu(i,t,e,n,s,r,o,a,l,c,h,u){const d=He(Math.round(e*i),Math.round(e*t),Ue);if(u||(d.imageSmoothingEnabled=!1),l.length===0)return d.canvas;d.scale(e,e);function f(m){return Math.round(m*e)/e}d.globalCompositeOperation="lighter";const g=Ee();l.forEach(function(m,C,b){rc(g,m.extent)});const _=X(g),p=St(g),v=He(Math.round(e*_/n),Math.round(e*p/n),Ue);u||(v.imageSmoothingEnabled=!1);const E=e/n;l.forEach(function(m,C,b){const A=m.extent[0]-g[0],R=-(m.extent[3]-g[3]),L=X(m.extent),O=St(m.extent);m.image.width>0&&m.image.height>0&&v.drawImage(m.image,c,c,m.image.width-2*c,m.image.height-2*c,A*E,R*E,L*E,O*E)});const T=ye(o);return a.getTriangles().forEach(function(m,C,b){const A=m.source,R=m.target;let L=A[0][0],O=A[0][1],$=A[1][0],Y=A[1][1],k=A[2][0],rt=A[2][1];const W=f((R[0][0]-T[0])/r),V=f(-(R[0][1]-T[1])/r),x=f((R[1][0]-T[0])/r),H=f(-(R[1][1]-T[1])/r),B=f((R[2][0]-T[0])/r),tt=f(-(R[2][1]-T[1])/r),Tt=L,U=O;L=0,O=0,$-=Tt,Y-=U,k-=Tt,rt-=U;const et=[[$,Y,0,0,x-W],[k,rt,0,0,B-W],[0,0,$,Y,H-V],[0,0,k,rt,tt-V]],F=uc(et);if(F){if(d.save(),d.beginPath(),Uu()||!u){d.moveTo(x,H);const N=4,ut=W-x,ot=V-H;for(let z=0;z<N;z++)d.lineTo(x+f((z+1)*ut/N),H+f(z*ot/(N-1))),z!=N-1&&d.lineTo(x+f((z+1)*ut/N),H+f((z+1)*ot/(N-1)));d.lineTo(B,tt)}else d.moveTo(x,H),d.lineTo(W,V),d.lineTo(B,tt);d.clip(),d.transform(F[0],F[2],F[1],F[3],W,V),d.translate(g[0]-Tt,g[3]-U),d.scale(n/e,-n/e),d.drawImage(v.canvas,0,0),d.restore()}}),Ws(v),Ue.push(v.canvas),h&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach(function(m,C,b){const A=m.target,R=(A[0][0]-T[0])/r,L=-(A[0][1]-T[1])/r,O=(A[1][0]-T[0])/r,$=-(A[1][1]-T[1])/r,Y=(A[2][0]-T[0])/r,k=-(A[2][1]-T[1])/r;d.beginPath(),d.moveTo(O,$),d.lineTo(R,L),d.lineTo(Y,k),d.closePath(),d.stroke()}),d.restore()),d.canvas}class Xu extends ya{constructor(t,e,n,s,r,o,a,l,c,h,u,d){super(r,w.IDLE,{interpolate:!!d}),this.renderEdges_=u!==void 0?u:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const f=s.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let _=this.sourceTileGrid_.getExtent();const p=g?fn(f,g):f;if(as(p)===0){this.state=w.EMPTY;return}const v=t.getExtent();v&&(_?_=fn(_,v):_=v);const E=s.getResolution(this.wrappedTileCoord_[0]),T=Wu(t,n,p,E);if(!isFinite(T)||T<=0){this.state=w.EMPTY;return}const m=h!==void 0?h:Ku;if(this.triangulation_=new Yu(t,n,p,_,T*m,E),this.triangulation_.getTriangles().length===0){this.state=w.EMPTY;return}this.sourceZ_=e.getZForResolution(T);let C=this.triangulation_.calculateSourceExtent();if(_&&(t.canWrapX()?(C[1]=Z(C[1],_[1],_[3]),C[3]=Z(C[3],_[1],_[3])):C=fn(C,_)),!as(C))this.state=w.EMPTY;else{const b=e.getTileRangeForExtentAndZ(C,this.sourceZ_);for(let A=b.minX;A<=b.maxX;A++)for(let R=b.minY;R<=b.maxY;R++){const L=c(this.sourceZ_,A,R,a);L&&this.sourceTiles_.push(L)}this.sourceTiles_.length===0&&(this.state=w.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(e=>{e&&e.getState()==w.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}),this.sourceTiles_.length=0,t.length===0)this.state=w.ERROR;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),s=typeof n=="number"?n:n[0],r=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Hu(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=w.LOADED}this.changed()}load(){if(this.state==w.IDLE){this.state=w.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(e=>{const n=e.getState();if(n==w.IDLE||n==w.LOADING){t++;const s=M(e,S.CHANGE,function(r){const o=e.getState();(o==w.LOADED||o==w.ERROR||o==w.EMPTY)&&(j(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,n,s){e.getState()==w.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(j),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Ws(this.canvas_.getContext("2d")),Ue.push(this.canvas_),this.canvas_=null),super.release()}}const ms=Xu;class Zu{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t];return D(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t];return D(e!==void 0,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e=0,n;for(n=this.newest_;n;n=n.older)t[e++]=n.key_;return t}getValues(){const t=new Array(this.count_);let e=0,n;for(n=this.newest_;n;n=n.older)t[e++]=n.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){D(!(t in this.entries_),16);const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}}const Bu=Zu;function Br(i,t,e,n){return n!==void 0?(n[0]=i,n[1]=t,n[2]=e,n):[i,t,e]}function xi(i,t,e){return i+"/"+t+"/"+e}function Ta(i){return xi(i[0],i[1],i[2])}function qu(i){return i.split("/").map(Number)}function Qu(i){return(i[1]<<i[0])+i[2]}function Ju(i,t){const e=i[0],n=i[1],s=i[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;const r=t.getFullTileRange(e);return r?r.containsXY(n,s):!0}class td extends Bu{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),n=qu(t)[0];this.forEach(s=>{s.tileCoord[0]!==n&&(this.remove(Ta(s.tileCoord)),s.release())})}}const Ca=td,Ui={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class ed extends Ut{constructor(t){super(),this.projection=bt(t.projection),this.attributions_=qr(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(n,s){e.viewResolver=n,e.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=qr(t),this.changed()}setState(t){this.state_=t,this.changed()}}function qr(i){return i?Array.isArray(i)?function(t){return i}:typeof i=="function"?i:function(t){return[i]}:null}const nd=ed;class ba{constructor(t,e,n,s){this.minX=t,this.maxX=e,this.minY=n,this.maxY=s}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Ie(i,t,e,n,s){return s!==void 0?(s.minX=i,s.maxX=t,s.minY=e,s.maxY=n,s):new ba(i,t,e,n)}const Aa=ba,Le=[0,0,0],Xt=5;class id{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,D(kl(this.resolutions_,function(s,r){return r-s},!0),17);let e;if(!t.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!e)e=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,D(this.origins_.length==this.resolutions_.length,20));const n=t.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ye(n)),D(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,D(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:Ns,D(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(s,r){const o=new Aa(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,e,n){const s=this.getTileRangeForExtentAndZ(t,e);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,l=s.maxY;a<=l;++a)n([e,r,a])}forEachTileCoordParentTileRange(t,e,n,s){let r,o,a,l=null,c=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,s);c>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),r=Ie(o,o,a,a,n)):r=this.getTileRangeForExtentAndZ(l,c,n),e(c,r))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const r=t[1]*2,o=t[2]*2;return Ie(r,r+1,o,o+1,e)}const s=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;const s=t[0],r=t[1],o=t[2];if(e===s)return Ie(r,o,r,o,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,e-s),c=Math.floor(r*l),h=Math.floor(o*l);if(e<s)return Ie(c,c,h,h,n);const u=Math.floor(l*(r+1))-1,d=Math.floor(l*(o+1))-1;return Ie(c,u,h,d,n)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,n)}getTileRangeExtent(t,e,n){const s=this.getOrigin(t),r=this.getResolution(t),o=kt(this.getTileSize(t),this.tmpSize_),a=s[0]+e.minX*o[0]*r,l=s[0]+(e.maxX+1)*o[0]*r,c=s[1]+e.minY*o[1]*r,h=s[1]+(e.maxY+1)*o[1]*r;return We(a,c,l,h,n)}getTileRangeForExtentAndZ(t,e,n){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,Le);const s=Le[1],r=Le[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,Le);const o=Le[1],a=Le[2];return Ie(s,o,r,a,n)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),s=kt(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*s[0]*n,e[1]-(t[2]+.5)*s[1]*n]}getTileCoordExtent(t,e){const n=this.getOrigin(t[0]),s=this.getResolution(t[0]),r=kt(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*r[0]*s,a=n[1]-(t[2]+1)*r[1]*s,l=o+r[0]*s,c=a+r[1]*s;return We(o,a,l,c,e)}getTileCoordForCoordAndResolution(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}getTileCoordForXYAndResolution_(t,e,n,s,r){const o=this.getZForResolution(n),a=n/this.getResolution(o),l=this.getOrigin(o),c=kt(this.getTileSize(o),this.tmpSize_);let h=a*(t-l[0])/n/c[0],u=a*(l[1]-e)/n/c[1];return s?(h=Fn(h,Xt)-1,u=Fn(u,Xt)-1):(h=$n(h,Xt),u=$n(u,Xt)),Br(o,h,u,r)}getTileCoordForXYAndZ_(t,e,n,s,r){const o=this.getOrigin(n),a=this.getResolution(n),l=kt(this.getTileSize(n),this.tmpSize_);let c=(t-o[0])/a/l[0],h=(o[1]-e)/a/l[1];return s?(c=Fn(c,Xt)-1,h=Fn(h,Xt)-1):(c=$n(c,Xt),h=$n(h,Xt)),Br(n,c,h,r)}getTileCoordForCoordAndZ(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const n=Is(this.resolutions_,t,e||0);return Z(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return ha(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,n=new Array(e);for(let s=this.minZoom;s<e;++s)n[s]=this.getTileRangeForExtentAndZ(t,s);this.fullTileRanges_=n}}const wa=id;function Ra(i){let t=i.getDefaultTileGrid();return t||(t=ad(i),i.setDefaultTileGrid(t)),t}function sd(i,t,e){const n=t[0],s=i.getTileCoordCenter(t),r=Bs(e);if(!Os(r,s)){const o=X(r),a=Math.ceil((r[0]-s[0])/o);return s[0]+=o*a,i.getTileCoordForCoordAndZ(s,n)}return t}function rd(i,t,e,n){n=n!==void 0?n:"top-left";const s=xa(i,t,e);return new wa({extent:i,origin:ac(i,n),resolutions:s,tileSize:e})}function od(i){const t=i||{},e=t.extent||bt("EPSG:3857").getExtent(),n={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:xa(e,t.maxZoom,t.tileSize,t.maxResolution)};return new wa(n)}function xa(i,t,e,n){t=t!==void 0?t:Cc,e=kt(e!==void 0?e:Ns);const s=St(i),r=X(i);n=n>0?n:Math.max(r/e[0],s/e[1]);const o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=n/Math.pow(2,l);return a}function ad(i,t,e,n){const s=Bs(i);return rd(s,t,e,n)}function Bs(i){i=bt(i);let t=i.getExtent();if(!t){const e=180*yn.degrees/i.getMetersPerUnit();t=We(-e,-e,e,e)}return t}class ld extends nd{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const e=[256,256];this.tileGrid&&kt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new Ca(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const n=this.getTileCacheForProjection(t);n&&n.expireCache(e)}forEachLoadedTile(t,e,n,s){const r=this.getTileCacheForProjection(t);if(!r)return!1;let o=!0,a,l,c;for(let h=n.minX;h<=n.maxX;++h)for(let u=n.minY;u<=n.maxY;++u)l=xi(e,h,u),c=!1,r.containsKey(l)&&(a=r.get(l),c=a.getState()===w.LOADED,c&&(c=s(a)!==!1)),c||(o=!1);return o}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,n,s,r){return G()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Ra(t)}getTileCacheForProjection(t){const e=this.getProjection();return D(e===null||Ne(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,n){const s=this.getTileGridForProjection(n),r=this.getTilePixelRatio(e),o=kt(s.getTileSize(t),this.tmpSize);return r==1?o:Pu(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=e!==void 0?e:this.getProjection();const n=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=sd(n,t,e)),Ju(t,n)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)}useTile(t,e,n,s){}}class cd extends re{constructor(t,e){super(t),this.tile=e}}const hd=ld;function ud(i,t){const e=/\{z\}/g,n=/\{x\}/g,s=/\{y\}/g,r=/\{-y\}/g;return function(o,a,l){if(o)return i.replace(e,o[0].toString()).replace(n,o[1].toString()).replace(s,o[2].toString()).replace(r,function(){const c=o[0],h=t.getFullTileRange(c);return D(h,55),(h.getHeight()-o[2]-1).toString()})}}function dd(i,t){const e=i.length,n=new Array(e);for(let s=0;s<e;++s)n[s]=ud(i[s],t);return fd(n)}function fd(i){return i.length===1?i[0]:function(t,e,n){if(!t)return;const s=Qu(t),r=je(s,i.length);return i[r](t,e,n)}}function gd(i){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(i);if(e){const n=e[1].charCodeAt(0),s=e[2].charCodeAt(0);let r;for(r=n;r<=s;++r)t.push(i.replace(e[0],String.fromCharCode(r)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(i),e){const n=parseInt(e[2],10);for(let s=parseInt(e[1],10);s<=n;s++)t.push(i.replace(e[0],s.toString()));return t}return t.push(i),t}class qs extends hd{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===qs.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,n=st(e),s=e.getState();let r;s==w.LOADING?(this.tileLoadingKeys_[n]=!0,r=Ui.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=s==w.ERROR?Ui.TILELOADERROR:s==w.LOADED?Ui.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new cd(r,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=gd(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(dd(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,n){}useTile(t,e,n){const s=xi(t,e,n);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}const _d=qs;class md extends _d{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:pd,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:va,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(const s in this.tileCacheForProjection){const r=this.tileCacheForProjection[s];r.expireCache(r==n?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!Ne(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!Ne(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||Ne(e,t)))return this.tileGrid;const n=st(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Ra(t)),this.tileGridForProjection[n]}getTileCacheForProjection(t){const e=this.getProjection();if(!e||Ne(e,t))return this.tileCache;const n=st(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Ca(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(t,e,n,s,r,o){const a=[t,e,n],l=this.getTileCoordForTileUrlFunction(a,r),c=l?this.tileUrlFunction(l,s,r):void 0,h=new this.tileClass(a,c!==void 0?w.IDLE:w.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(S.CHANGE,this.handleTileChange.bind(this)),h}getTile(t,e,n,s,r){const o=this.getProjection();if(!o||!r||Ne(o,r))return this.getTileInternal(t,e,n,s,o||r);const a=this.getTileCacheForProjection(r),l=[t,e,n];let c;const h=Ta(l);a.containsKey(h)&&(c=a.get(h));const u=this.getKey();if(c&&c.key==u)return c;const d=this.getTileGridForProjection(o),f=this.getTileGridForProjection(r),g=this.getTileCoordForTileUrlFunction(l,r),_=new ms(o,d,r,f,l,g,this.getTilePixelRatio(s),this.getGutter(),(p,v,E,T)=>this.getTileInternal(p,v,E,T,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return _.key=u,c?(_.interimTile=c,_.refreshInterimChain(),a.replace(h,_)):a.set(h,_),_}getTileInternal(t,e,n,s,r){let o=null;const a=xi(t,e,n),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(t,e,n,s,r,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(t,e,n,s,r,l),c.getState()==w.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}setTileGridForProjection(t,e){const n=bt(t);if(n){const s=st(n);s in this.tileGridForProjection||(this.tileGridForProjection[s]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function pd(i,t){i.getImage().src=t}const Ed=md;class yd extends Ed{constructor(t){t=t||{};const e=t.projection!==void 0?t.projection:"EPSG:3857",n=t.tileGrid!==void 0?t.tileGrid:od({extent:Bs(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const Ia=yd,La='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class vd extends Ia{constructor(t){t=t||{};let e;t.attributions!==void 0?e=t.attributions:e=[La];const n=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",s=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:n,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:s,wrapX:t.wrapX,zDirection:t.zDirection})}}const Td=vd,Gn={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Cd extends Ys{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(Gn.PRELOAD)}setPreload(t){this.set(Gn.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(Gn.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(Gn.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const bd=Cd;class Ad extends ko{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return G()}getData(t){return null}prepareFrame(t){return G()}renderFrame(t,e){return G()}loadedTileCallback(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}createLoadedTileFinder(t,e,n){return(s,r)=>{const o=this.loadedTileCallback.bind(this,n,s);return t.forEachLoadedTile(e,s,r,o)}}forEachFeatureAtCoordinate(t,e,n,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===hn.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=hn.LOADED&&e!=hn.ERROR&&t.addEventListener(S.CHANGE,this.boundHandleImageChange_),e==hn.IDLE&&(t.load(),e=t.getState()),e==hn.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const wd=Ad;let Me=null;function Rd(){Me=He(1,1,void 0,{willReadFrequently:!0})}class xd extends wd{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Ke(),this.pixelTransform=Ke(),this.inversePixelTransform=Ke(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,n){Me||Rd(),Me.clearRect(0,0,1,1);let s;try{Me.drawImage(t,e,n,1,1,0,0,1,1),s=Me.getImageData(0,0,1,1).data}catch{return Me=null,null}return s}getBackground(t){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(t.viewState.resolution)),n||void 0}useContainer(t,e,n){const s=this.getLayer().getClassName();let r,o;if(t&&t.className===s&&(!n||t&&t.style.backgroundColor&&mi(wr(t.style.backgroundColor),wr(n)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=He();const l=o.canvas;r.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const s=ye(n),r=bi(n),o=Ci(n),a=Ti(n);lt(e.coordinateToPixelTransform,s),lt(e.coordinateToPixelTransform,r),lt(e.coordinateToPixelTransform,o),lt(e.coordinateToPixelTransform,a);const l=this.inversePixelTransform;lt(l,s),lt(l,r),lt(l,o),lt(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,e,n){const s=this.getLayer();if(s.hasListener(t)){const r=new da(t,this.inversePixelTransform,n,e);s.dispatchEvent(r)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(te.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(te.POSTRENDER,t,e)}getRenderTransform(t,e,n,s,r,o,a){const l=r/2,c=o/2,h=s/e,u=-h,d=-t[0]+a,f=-t[1];return pn(this.tempTransform,l,c,h,u,-n,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const Id=xd;class Ld extends Id{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Ee(),this.tmpTileRange_=new Aa(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),n=t.getState(),s=e.getUseInterimTilesOnError();return n==w.LOADED||n==w.EMPTY||n==w.ERROR&&!s}getTile(t,e,n,s){const r=s.pixelRatio,o=s.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(t,e,n,r,o);return c.getState()==w.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),s=lt(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!Os(r,s))return null;const o=e.pixelRatio,a=e.viewState.projection,l=e.viewState,c=n.getRenderSource(),h=c.getTileGridForProjection(l.projection),u=c.getTilePixelRatio(e.pixelRatio);for(let d=h.getZForResolution(l.resolution);d>=h.getMinZoom();--d){const f=h.getTileCoordForCoordAndZ(s,d),g=c.getTile(d,f[1],f[2],o,a);if(!(g instanceof va||g instanceof ms)||g instanceof ms&&g.getState()===w.EMPTY)return null;if(g.getState()!==w.LOADED)continue;const _=h.getOrigin(d),p=kt(h.getTileSize(d)),v=h.getResolution(d),E=Math.floor(u*((s[0]-_[0])/v-f[1]*p[0])),T=Math.floor(u*((_[1]-s[1])/v-f[2]*p[1])),m=Math.round(u*c.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),E+m,T+m)}return null}loadedTileCallback(t,e,n){return this.isDrawableTile(n)?super.loadedTileCallback(t,e,n):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex],s=t.viewState,r=s.projection,o=s.resolution,a=s.center,l=s.rotation,c=t.pixelRatio,h=this.getLayer(),u=h.getSource(),d=u.getRevision(),f=u.getTileGridForProjection(r),g=f.getZForResolution(o,u.zDirection),_=f.getResolution(g);let p=t.extent;const v=t.viewState.resolution,E=u.getTilePixelRatio(c),T=Math.round(X(p)/v*c),m=Math.round(St(p)/v*c),C=n.extent&&Ve(n.extent);C&&(p=fn(p,Ve(n.extent)));const b=_*T/2/E,A=_*m/2/E,R=[a[0]-b,a[1]-A,a[0]+b,a[1]+A],L=f.getTileRangeForExtentAndZ(p,g),O={};O[g]={};const $=this.createLoadedTileFinder(u,r,O),Y=this.tmpExtent,k=this.tmpTileRange_;this.newTiles_=!1;const rt=l?cs(s.center,v,l,t.size):void 0;for(let et=L.minX;et<=L.maxX;++et)for(let F=L.minY;F<=L.maxY;++F){if(l&&!f.tileCoordIntersectsViewport([g,et,F],rt))continue;const N=this.getTile(g,et,F,t);if(this.isDrawableTile(N)){const z=st(this);if(N.getState()==w.LOADED){O[g][N.tileCoord.toString()]=N;let Rt=N.inTransition(z);Rt&&n.opacity!==1&&(N.endTransition(z),Rt=!1),!this.newTiles_&&(Rt||!this.renderedTiles.includes(N))&&(this.newTiles_=!0)}if(N.getAlpha(z,t.time)===1)continue}const ut=f.getTileCoordChildTileRange(N.tileCoord,k,Y);let ot=!1;ut&&(ot=$(g+1,ut)),ot||f.forEachTileCoordParentTileRange(N.tileCoord,$,k,Y)}const W=_/o*c/E;pn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/c,1/c,l,-T/2,-m/2);const V=tc(this.pixelTransform);this.useContainer(e,V,this.getBackground(t));const x=this.context,H=x.canvas;jo(this.inversePixelTransform,this.pixelTransform),pn(this.tempTransform,T/2,m/2,W,W,0,-T/2,-m/2),H.width!=T||H.height!=m?(H.width=T,H.height=m):this.containerReused||x.clearRect(0,0,T,m),C&&this.clipUnrotated(x,t,C),u.getInterpolate()||(x.imageSmoothingEnabled=!1),this.preRender(x,t),this.renderedTiles.length=0;let B=Object.keys(O).map(Number);B.sort(xs);let tt,Tt,U;n.opacity===1&&(!this.containerReused||u.getOpaque(t.viewState.projection))?B=B.reverse():(tt=[],Tt=[]);for(let et=B.length-1;et>=0;--et){const F=B[et],N=u.getTilePixelSize(F,c,r),ot=f.getResolution(F)/_,z=N[0]*ot*W,Rt=N[1]*ot*W,on=f.getTileCoordForCoordAndZ(ye(R),F),Ce=f.getTileCoordExtent(on),be=lt(this.tempTransform,[E*(Ce[0]-R[0])/_,E*(R[3]-Ce[3])/_]),Sn=E*u.getGutterForProjection(r),Nn=O[F];for(const $i in Nn){const Mt=Nn[$i],an=Mt.tileCoord,Pn=on[1]-an[1],Fi=Math.round(be[0]-(Pn-1)*z),xt=on[2]-an[2],Ae=Math.round(be[1]-(xt-1)*Rt),dt=Math.round(be[0]-Pn*z),ft=Math.round(be[1]-xt*Rt),Dt=Fi-dt,Ht=Ae-ft,ln=g===F,cn=ln&&Mt.getAlpha(st(this),t.time)!==1;let we=!1;if(!cn)if(tt){U=[dt,ft,dt+Dt,ft,dt+Dt,ft+Ht,dt,ft+Ht];for(let Mn=0,Ml=tt.length;Mn<Ml;++Mn)if(g!==F&&F<Tt[Mn]){const gt=tt[Mn];Cn([dt,ft,dt+Dt,ft+Ht],[gt[0],gt[3],gt[4],gt[7]])&&(we||(x.save(),we=!0),x.beginPath(),x.moveTo(U[0],U[1]),x.lineTo(U[2],U[3]),x.lineTo(U[4],U[5]),x.lineTo(U[6],U[7]),x.moveTo(gt[6],gt[7]),x.lineTo(gt[4],gt[5]),x.lineTo(gt[2],gt[3]),x.lineTo(gt[0],gt[1]),x.clip())}tt.push(U),Tt.push(F)}else x.clearRect(dt,ft,Dt,Ht);this.drawTileImage(Mt,t,dt,ft,Dt,Ht,Sn,ln),tt&&!cn?(we&&x.restore(),this.renderedTiles.unshift(Mt)):this.renderedTiles.push(Mt),this.updateUsedTiles(t.usedTiles,u,Mt)}}return this.renderedRevision=d,this.renderedResolution=_,this.extentChanged=!this.renderedExtent_||!os(this.renderedExtent_,R),this.renderedExtent_=R,this.renderedPixelRatio=c,this.renderedProjection=r,this.manageTilePyramid(t,u,f,c,r,p,g,h.getPreload()),this.scheduleExpireCache(t,u),this.postRender(x,t),n.extent&&x.restore(),x.imageSmoothingEnabled=!0,V!==H.style.transform&&(H.style.transform=V),this.container}drawTileImage(t,e,n,s,r,o,a,l){const c=this.getTileImage(t);if(!c)return;const h=st(this),u=e.layerStatesArray[e.layerIndex],d=u.opacity*(l?t.getAlpha(h,e.time):1),f=d!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,n,s,r,o),f&&this.context.restore(),d!==u.opacity?e.animate=!0:l&&t.endTransition(h)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const n=function(s,r,o){const a=st(s);a in o.usedTiles&&s.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,e);t.postRenderFunctions.push(n)}}updateUsedTiles(t,e,n){const s=st(e);s in t||(t[s]={}),t[s][n.getKey()]=!0}manageTilePyramid(t,e,n,s,r,o,a,l,c){const h=st(e);h in t.wantedTiles||(t.wantedTiles[h]={});const u=t.wantedTiles[h],d=t.tileQueue,f=n.getMinZoom(),g=t.viewState.rotation,_=g?cs(t.viewState.center,t.viewState.resolution,g,t.size):void 0;let p=0,v,E,T,m,C,b;for(b=f;b<=a;++b)for(E=n.getTileRangeForExtentAndZ(o,b,E),T=n.getResolution(b),m=E.minX;m<=E.maxX;++m)for(C=E.minY;C<=E.maxY;++C)g&&!n.tileCoordIntersectsViewport([b,m,C],_)||(a-b<=l?(++p,v=e.getTile(b,m,C,s,r),v.getState()==w.IDLE&&(u[v.getKey()]=!0,d.isKeyQueued(v.getKey())||d.enqueue([v,h,n.getTileCoordCenter(v.tileCoord),T])),c!==void 0&&c(v)):e.useTile(b,m,C,r));e.updateCacheSize(p,r)}}const Od=Ld;class Sd extends bd{constructor(t){super(t)}createRenderer(){return new Od(this)}}const Oa=Sd;function jn(i,t){return lt(i.inversePixelTransform,t.slice(0))}/*!
  * ol-contextmenu - v5.1.4
  * https://github.com/jonataswalker/ol-contextmenu
  * Built: Mon Dec 26 2022 21:16:02 GMT-0300 (Brasilia Standard Time)
  */var Nd=Object.defineProperty,Pd=(i,t,e)=>t in i?Nd(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,at=(i,t,e)=>(Pd(i,typeof t!="symbol"?t+"":t,e),e),Qs=(i=>(i.CONTEXTMENU="contextmenu",i.CLICK="click",i.DBLCLICK="dblclick",i))(Qs||{}),Jt=(i=>(i.BEFOREOPEN="beforeopen",i.OPEN="open",i.CLOSE="close",i.ADD_MENU_ENTRY="add-menu-entry",i))(Jt||{});class Qr extends Ft{constructor(t){super(t.type,t.map,t.originalEvent)}}const Md={width:150,scrollAt:4,eventType:Qs.CONTEXTMENU,defaultItems:!0,items:[]},Zt="ol-ctx-menu",Q={namespace:Zt,container:`${Zt}-container`,separator:`${Zt}-separator`,submenu:`${Zt}-submenu`,hidden:`${Zt}-hidden`,icon:`${Zt}-icon`,zoomIn:`${Zt}-zoom-in`,zoomOut:`${Zt}-zoom-out`,unselectable:"ol-unselectable"},Jr=[{text:"Zoom In",classname:`${Q.zoomIn} ${Q.icon}`,callback:(i,t)=>{const e=t.getView();e.animate({zoom:Number(e.getZoom())+1,duration:700,center:i.coordinate})}},{text:"Zoom Out",classname:`${Q.zoomOut} ${Q.icon}`,callback:(i,t)=>{const e=t.getView();e.animate({zoom:Number(e.getZoom())-1,duration:700,center:i.coordinate})}}];var ps={},Dd={get exports(){return ps},set exports(i){ps=i}};function Js(){}Js.prototype={on:function(i,t,e){var n=this.e||(this.e={});return(n[i]||(n[i]=[])).push({fn:t,ctx:e}),this},once:function(i,t,e){var n=this;function s(){n.off(i,s),t.apply(e,arguments)}return s._=t,this.on(i,s,e)},emit:function(i){var t=[].slice.call(arguments,1),e=((this.e||(this.e={}))[i]||[]).slice(),n=0,s=e.length;for(n;n<s;n++)e[n].fn.apply(e[n].ctx,t);return this},off:function(i,t){var e=this.e||(this.e={}),n=e[i],s=[];if(n&&t)for(var r=0,o=n.length;r<o;r++)n[r].fn!==t&&n[r].fn._!==t&&s.push(n[r]);return s.length?e[i]=s:delete e[i],this}};Dd.exports=Js;var $d=ps.TinyEmitter=Js;const hi=new $d;function ui(i){const t=document.createDocumentFragment(),e=document.createElement("div");for(e.innerHTML=i;e.firstChild;)t.append(e.firstChild);return t}function Fd(i){var t,e;const n=document.importNode(i),s=i.offsetWidth;n.style.cssText=`position: fixed; top: 0; left: 0; overflow: auto; visibility: hidden; pointer-events: none; height: unset; max-height: unset; width: ${s}px`;const r=ui("<span>Foo</span>"),o=ui("<span>Foo</span>"),a=document.createElement("li"),l=document.createElement("li");a.append(r),l.append(o),n.append(a),n.append(l),(t=i.parentNode)==null||t.append(n);const c=n.offsetHeight/2;return(e=i.parentNode)==null||e.removeChild(n),c}function to(i,t,e=!1){const n=`_${Math.random().toString(36).slice(2,11)}`;if(typeof t!="string"&&"text"in t){const a=`<span>${t.text}</span>`,l=ui(a),c=document.createElement("li");return t.classname=t.classname||"",t.icon&&(t.classname===""?t.classname=Q.icon:t.classname.includes(Q.icon)===!1&&(t.classname+=` ${Q.icon}`),c.setAttribute("style",`background-image:url(${t.icon})`)),c.id=n,c.className=t.classname,c.append(l),i.append(c),hi.emit(Jt.ADD_MENU_ENTRY,{id:n,isSubmenu:e,isSeparator:!1,callback:"callback"in t?t.callback:null,data:"data"in t?t.data:null},c),c}const s=`<li id="${n}" class="${Q.separator}"><hr></li>`,r=ui(s);i.append(r);const o=i.lastChild;return hi.emit(Jt.ADD_MENU_ENTRY,{id:n,isSubmenu:e,isSeparator:!0,callback:null,data:null},o),o}function Es(i,t,e){t.forEach(n=>{if(typeof n!="string"&&"items"in n&&Array.isArray(n.items)){const s=to(i,n,!0);s.classList.add(Q.submenu);const r=document.createElement("ul");r.classList.add(Q.container),r.style.width=`${e}px`,s.append(r),Es(r,n.items,e)}else to(i,n)})}function Wi(i,t){if(!i)throw new Error(t)}class kd extends Ri{constructor(t={}){Wi(typeof t=="object","@param `opts` should be object type!");const e=document.createElement("div");super({element:e}),at(this,"map"),at(this,"container"),at(this,"coordinate",[]),at(this,"pixel",[]),at(this,"contextMenuEventListener"),at(this,"entryCallbackEventListener"),at(this,"mapMoveListener"),at(this,"lineHeight",0),at(this,"disabled"),at(this,"opened"),at(this,"items",[]),at(this,"menuEntries",new Map),at(this,"options"),this.options={...Md,...t};const n=document.createElement("ul");e.append(n),e.style.width=`${this.options.width}px`,e.classList.add(Q.container,Q.unselectable,Q.hidden),this.container=e,this.contextMenuEventListener=s=>{this.handleContextMenu(s)},this.entryCallbackEventListener=s=>{this.handleEntryCallback(s)},this.mapMoveListener=()=>{this.handleMapMove()},this.disabled=!1,this.opened=!1}clear(){for(const t of this.menuEntries.keys())this.removeMenuEntry(t);this.container.replaceChildren(),this.container.append(document.createElement("ul"))}enable(){this.disabled=!1}disable(){this.disabled=!0}getDefaultItems(){return Jr}countItems(){return this.menuEntries.size}extend(t){Wi(Array.isArray(t),"@param `items` should be an Array."),Es(this.container.firstElementChild,t,this.options.width)}closeMenu(){this.opened=!1,this.container.classList.add(Q.hidden),this.dispatchEvent(Jt.CLOSE)}isOpen(){return this.opened}updatePosition(t){Wi(Array.isArray(t),"@param `pixel` should be an Array."),this.isOpen()&&(this.pixel=t,this.positionContainer())}pop(){const t=Array.from(this.menuEntries.keys()).pop();t&&this.removeMenuEntry(t)}shift(){const t=Array.from(this.menuEntries.keys()).shift();t&&this.removeMenuEntry(t)}push(t){t&&this.extend([t])}setMap(t){if(super.setMap(t),t){this.map=t,this.map.getViewport().addEventListener(this.options.eventType,this.contextMenuEventListener,!1),this.map.on("movestart",()=>{this.handleMapMove()}),hi.on(Jt.ADD_MENU_ENTRY,(n,s)=>{this.handleAddMenuEntry(n,s)},this),this.items=this.options.defaultItems?this.options.items.concat(Jr):this.options.items,Es(this.container.firstElementChild,this.items,this.options.width);const e=this.getMenuEntriesLength();this.lineHeight=e>0?this.container.offsetHeight/e:Fd(this.container)}else this.removeListeners(),this.clear()}removeListeners(){this.map.getViewport().removeEventListener(this.options.eventType,this.contextMenuEventListener,!1),hi.off(Jt.ADD_MENU_ENTRY)}removeMenuEntry(t){const e=document.getElementById(t);e==null||e.remove(),e==null||e.removeEventListener("click",this.entryCallbackEventListener),this.menuEntries.delete(t)}handleContextMenu(t){var e;this.coordinate=this.map.getEventCoordinate(t),this.pixel=this.map.getEventPixel(t),this.dispatchEvent(new Qr({type:Jt.BEFOREOPEN,map:this.map,originalEvent:t})),!this.disabled&&(this.options.eventType===Qs.CONTEXTMENU&&(t.stopPropagation(),t.preventDefault()),setTimeout(()=>{this.openMenu(t)}),(e=t.target)==null||e.addEventListener("pointerdown",n=>{this.opened&&(n.stopPropagation(),this.closeMenu())},{once:!0}))}openMenu(t){this.menuEntries.size!==0&&(this.opened=!0,this.positionContainer(),this.container.classList.remove(Q.hidden),this.dispatchEvent(new Qr({type:Jt.OPEN,map:this.map,originalEvent:t})))}getMenuEntriesLength(){return Array.from(this.menuEntries).filter(([,t])=>t.isSeparator===!1||t.isSubmenu===!1).length}positionContainer(){const t=this.map.getSize()||[0,0],e={w:t[0]-this.pixel[0],h:t[1]-this.pixel[1]},n={w:this.container.offsetWidth,h:Math.round(this.lineHeight*this.getMenuEntriesLength())},s=e.w>=n.w?this.pixel[0]+5:this.pixel[0]-n.w;this.container.style.left=`${s}px`,this.container.style.top=e.h>=n.h?`${this.pixel[1]-10}px`:`${this.pixel[1]-n.h}px`,this.container.style.right="auto",this.container.style.bottom="auto",e.w-=n.w;const r=l=>Array.from(l.children).filter(c=>c.tagName==="LI"&&c.classList.contains(Q.submenu));let o=0;const a=(l,c)=>{o+=1,r(l).forEach(h=>{const u=c>=n.w?n.w-8:(n.w+8)*-1,d=h.querySelector(`ul.${Q.container}`),f=Math.round(this.lineHeight*Array.from(d.children).filter(g=>g.tagName==="LI").length);d.style.left=`${u}px`,d.style.right="auto",d.style.top=e.h>=f+n.h?"0":`-${d.offsetHeight-25}px`,d.style.bottom="auto",d.style.zIndex=String(o),r(d).length>0&&a(d,c-n.w)})};a(this.container.firstElementChild,e.w)}handleMapMove(){this.closeMenu()}handleEntryCallback(t){var e;t.preventDefault(),t.stopPropagation();const n=t.currentTarget,s=this.menuEntries.get(n.id);if(!s)return;const r={coordinate:this.coordinate,data:s.data};this.closeMenu(),(e=s.callback)==null||e.call(s,r,this.map)}handleAddMenuEntry(t,e){this.menuEntries.set(t.id,t),this.positionContainer(),"callback"in t&&typeof t.callback=="function"&&e.addEventListener("click",this.entryCallbackEventListener,!1)}}const Vd="/tileserver-web/assets/osm_logo-b6356be0.png";var nt="top",ct="bottom",ht="right",it="left",Ii="auto",en=[nt,ct,ht,it],_e="start",Xe="end",Sa="clippingParents",tr="viewport",De="popper",Na="reference",ys=en.reduce(function(i,t){return i.concat([t+"-"+_e,t+"-"+Xe])},[]),er=[].concat(en,[Ii]).reduce(function(i,t){return i.concat([t,t+"-"+_e,t+"-"+Xe])},[]),Pa="beforeRead",Ma="read",Da="afterRead",$a="beforeMain",Fa="main",ka="afterMain",Va="beforeWrite",za="write",Ka="afterWrite",Ga=[Pa,Ma,Da,$a,Fa,ka,Va,za,Ka];function Nt(i){return i?(i.nodeName||"").toLowerCase():null}function yt(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var t=i.ownerDocument;return t&&t.defaultView||window}return i}function me(i){var t=yt(i).Element;return i instanceof t||i instanceof Element}function pt(i){var t=yt(i).HTMLElement;return i instanceof t||i instanceof HTMLElement}function nr(i){if(typeof ShadowRoot>"u")return!1;var t=yt(i).ShadowRoot;return i instanceof t||i instanceof ShadowRoot}function zd(i){var t=i.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},s=t.attributes[e]||{},r=t.elements[e];!pt(r)||!Nt(r)||(Object.assign(r.style,n),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function Kd(i){var t=i.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(n){var s=t.elements[n],r=t.attributes[n]||{},o=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:e[n]),a=o.reduce(function(l,c){return l[c]="",l},{});!pt(s)||!Nt(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}const ir={name:"applyStyles",enabled:!0,phase:"write",fn:zd,effect:Kd,requires:["computeStyles"]};function Lt(i){return i.split("-")[0]}var ge=Math.max,di=Math.min,Ze=Math.round;function vs(){var i=navigator.userAgentData;return i!=null&&i.brands?i.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function ja(){return!/^((?!chrome|android).)*safari/i.test(vs())}function Be(i,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var n=i.getBoundingClientRect(),s=1,r=1;t&&pt(i)&&(s=i.offsetWidth>0&&Ze(n.width)/i.offsetWidth||1,r=i.offsetHeight>0&&Ze(n.height)/i.offsetHeight||1);var o=me(i)?yt(i):window,a=o.visualViewport,l=!ja()&&e,c=(n.left+(l&&a?a.offsetLeft:0))/s,h=(n.top+(l&&a?a.offsetTop:0))/r,u=n.width/s,d=n.height/r;return{width:u,height:d,top:h,right:c+u,bottom:h+d,left:c,x:c,y:h}}function sr(i){var t=Be(i),e=i.offsetWidth,n=i.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:i.offsetLeft,y:i.offsetTop,width:e,height:n}}function Ya(i,t){var e=t.getRootNode&&t.getRootNode();if(i.contains(t))return!0;if(e&&nr(e)){var n=t;do{if(n&&i.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Yt(i){return yt(i).getComputedStyle(i)}function Gd(i){return["table","td","th"].indexOf(Nt(i))>=0}function oe(i){return((me(i)?i.ownerDocument:i.document)||window.document).documentElement}function Li(i){return Nt(i)==="html"?i:i.assignedSlot||i.parentNode||(nr(i)?i.host:null)||oe(i)}function eo(i){return!pt(i)||Yt(i).position==="fixed"?null:i.offsetParent}function jd(i){var t=/firefox/i.test(vs()),e=/Trident/i.test(vs());if(e&&pt(i)){var n=Yt(i);if(n.position==="fixed")return null}var s=Li(i);for(nr(s)&&(s=s.host);pt(s)&&["html","body"].indexOf(Nt(s))<0;){var r=Yt(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function Rn(i){for(var t=yt(i),e=eo(i);e&&Gd(e)&&Yt(e).position==="static";)e=eo(e);return e&&(Nt(e)==="html"||Nt(e)==="body"&&Yt(e).position==="static")?t:e||jd(i)||t}function rr(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function gn(i,t,e){return ge(i,di(t,e))}function Yd(i,t,e){var n=gn(i,t,e);return n>e?e:n}function Ua(){return{top:0,right:0,bottom:0,left:0}}function Wa(i){return Object.assign({},Ua(),i)}function Ha(i,t){return t.reduce(function(e,n){return e[n]=i,e},{})}var Ud=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,Wa(typeof t!="number"?t:Ha(t,en))};function Wd(i){var t,e=i.state,n=i.name,s=i.options,r=e.elements.arrow,o=e.modifiersData.popperOffsets,a=Lt(e.placement),l=rr(a),c=[it,ht].indexOf(a)>=0,h=c?"height":"width";if(!(!r||!o)){var u=Ud(s.padding,e),d=sr(r),f=l==="y"?nt:it,g=l==="y"?ct:ht,_=e.rects.reference[h]+e.rects.reference[l]-o[l]-e.rects.popper[h],p=o[l]-e.rects.reference[l],v=Rn(r),E=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,T=_/2-p/2,m=u[f],C=E-d[h]-u[g],b=E/2-d[h]/2+T,A=gn(m,b,C),R=l;e.modifiersData[n]=(t={},t[R]=A,t.centerOffset=A-b,t)}}function Hd(i){var t=i.state,e=i.options,n=e.element,s=n===void 0?"[data-popper-arrow]":n;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||Ya(t.elements.popper,s)&&(t.elements.arrow=s))}const Xa={name:"arrow",enabled:!0,phase:"main",fn:Wd,effect:Hd,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function qe(i){return i.split("-")[1]}var Xd={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Zd(i){var t=i.x,e=i.y,n=window,s=n.devicePixelRatio||1;return{x:Ze(t*s)/s||0,y:Ze(e*s)/s||0}}function no(i){var t,e=i.popper,n=i.popperRect,s=i.placement,r=i.variation,o=i.offsets,a=i.position,l=i.gpuAcceleration,c=i.adaptive,h=i.roundOffsets,u=i.isFixed,d=o.x,f=d===void 0?0:d,g=o.y,_=g===void 0?0:g,p=typeof h=="function"?h({x:f,y:_}):{x:f,y:_};f=p.x,_=p.y;var v=o.hasOwnProperty("x"),E=o.hasOwnProperty("y"),T=it,m=nt,C=window;if(c){var b=Rn(e),A="clientHeight",R="clientWidth";if(b===yt(e)&&(b=oe(e),Yt(b).position!=="static"&&a==="absolute"&&(A="scrollHeight",R="scrollWidth")),b=b,s===nt||(s===it||s===ht)&&r===Xe){m=ct;var L=u&&b===C&&C.visualViewport?C.visualViewport.height:b[A];_-=L-n.height,_*=l?1:-1}if(s===it||(s===nt||s===ct)&&r===Xe){T=ht;var O=u&&b===C&&C.visualViewport?C.visualViewport.width:b[R];f-=O-n.width,f*=l?1:-1}}var $=Object.assign({position:a},c&&Xd),Y=h===!0?Zd({x:f,y:_}):{x:f,y:_};if(f=Y.x,_=Y.y,l){var k;return Object.assign({},$,(k={},k[m]=E?"0":"",k[T]=v?"0":"",k.transform=(C.devicePixelRatio||1)<=1?"translate("+f+"px, "+_+"px)":"translate3d("+f+"px, "+_+"px, 0)",k))}return Object.assign({},$,(t={},t[m]=E?_+"px":"",t[T]=v?f+"px":"",t.transform="",t))}function Bd(i){var t=i.state,e=i.options,n=e.gpuAcceleration,s=n===void 0?!0:n,r=e.adaptive,o=r===void 0?!0:r,a=e.roundOffsets,l=a===void 0?!0:a,c={placement:Lt(t.placement),variation:qe(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,no(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,no(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const or={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Bd,data:{}};var Yn={passive:!0};function qd(i){var t=i.state,e=i.instance,n=i.options,s=n.scroll,r=s===void 0?!0:s,o=n.resize,a=o===void 0?!0:o,l=yt(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&c.forEach(function(h){h.addEventListener("scroll",e.update,Yn)}),a&&l.addEventListener("resize",e.update,Yn),function(){r&&c.forEach(function(h){h.removeEventListener("scroll",e.update,Yn)}),a&&l.removeEventListener("resize",e.update,Yn)}}const ar={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:qd,data:{}};var Qd={left:"right",right:"left",bottom:"top",top:"bottom"};function Jn(i){return i.replace(/left|right|bottom|top/g,function(t){return Qd[t]})}var Jd={start:"end",end:"start"};function io(i){return i.replace(/start|end/g,function(t){return Jd[t]})}function lr(i){var t=yt(i),e=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:e,scrollTop:n}}function cr(i){return Be(oe(i)).left+lr(i).scrollLeft}function tf(i,t){var e=yt(i),n=oe(i),s=e.visualViewport,r=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;var c=ja();(c||!c&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a+cr(i),y:l}}function ef(i){var t,e=oe(i),n=lr(i),s=(t=i.ownerDocument)==null?void 0:t.body,r=ge(e.scrollWidth,e.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=ge(e.scrollHeight,e.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-n.scrollLeft+cr(i),l=-n.scrollTop;return Yt(s||e).direction==="rtl"&&(a+=ge(e.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function hr(i){var t=Yt(i),e=t.overflow,n=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+s+n)}function Za(i){return["html","body","#document"].indexOf(Nt(i))>=0?i.ownerDocument.body:pt(i)&&hr(i)?i:Za(Li(i))}function _n(i,t){var e;t===void 0&&(t=[]);var n=Za(i),s=n===((e=i.ownerDocument)==null?void 0:e.body),r=yt(n),o=s?[r].concat(r.visualViewport||[],hr(n)?n:[]):n,a=t.concat(o);return s?a:a.concat(_n(Li(o)))}function Ts(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function nf(i,t){var e=Be(i,!1,t==="fixed");return e.top=e.top+i.clientTop,e.left=e.left+i.clientLeft,e.bottom=e.top+i.clientHeight,e.right=e.left+i.clientWidth,e.width=i.clientWidth,e.height=i.clientHeight,e.x=e.left,e.y=e.top,e}function so(i,t,e){return t===tr?Ts(tf(i,e)):me(t)?nf(t,e):Ts(ef(oe(i)))}function sf(i){var t=_n(Li(i)),e=["absolute","fixed"].indexOf(Yt(i).position)>=0,n=e&&pt(i)?Rn(i):i;return me(n)?t.filter(function(s){return me(s)&&Ya(s,n)&&Nt(s)!=="body"}):[]}function rf(i,t,e,n){var s=t==="clippingParents"?sf(i):[].concat(t),r=[].concat(s,[e]),o=r[0],a=r.reduce(function(l,c){var h=so(i,c,n);return l.top=ge(h.top,l.top),l.right=di(h.right,l.right),l.bottom=di(h.bottom,l.bottom),l.left=ge(h.left,l.left),l},so(i,o,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Ba(i){var t=i.reference,e=i.element,n=i.placement,s=n?Lt(n):null,r=n?qe(n):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,l;switch(s){case nt:l={x:o,y:t.y-e.height};break;case ct:l={x:o,y:t.y+t.height};break;case ht:l={x:t.x+t.width,y:a};break;case it:l={x:t.x-e.width,y:a};break;default:l={x:t.x,y:t.y}}var c=s?rr(s):null;if(c!=null){var h=c==="y"?"height":"width";switch(r){case _e:l[c]=l[c]-(t[h]/2-e[h]/2);break;case Xe:l[c]=l[c]+(t[h]/2-e[h]/2);break}}return l}function Qe(i,t){t===void 0&&(t={});var e=t,n=e.placement,s=n===void 0?i.placement:n,r=e.strategy,o=r===void 0?i.strategy:r,a=e.boundary,l=a===void 0?Sa:a,c=e.rootBoundary,h=c===void 0?tr:c,u=e.elementContext,d=u===void 0?De:u,f=e.altBoundary,g=f===void 0?!1:f,_=e.padding,p=_===void 0?0:_,v=Wa(typeof p!="number"?p:Ha(p,en)),E=d===De?Na:De,T=i.rects.popper,m=i.elements[g?E:d],C=rf(me(m)?m:m.contextElement||oe(i.elements.popper),l,h,o),b=Be(i.elements.reference),A=Ba({reference:b,element:T,strategy:"absolute",placement:s}),R=Ts(Object.assign({},T,A)),L=d===De?R:b,O={top:C.top-L.top+v.top,bottom:L.bottom-C.bottom+v.bottom,left:C.left-L.left+v.left,right:L.right-C.right+v.right},$=i.modifiersData.offset;if(d===De&&$){var Y=$[s];Object.keys(O).forEach(function(k){var rt=[ht,ct].indexOf(k)>=0?1:-1,W=[nt,ct].indexOf(k)>=0?"y":"x";O[k]+=Y[W]*rt})}return O}function of(i,t){t===void 0&&(t={});var e=t,n=e.placement,s=e.boundary,r=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,c=l===void 0?er:l,h=qe(n),u=h?a?ys:ys.filter(function(g){return qe(g)===h}):en,d=u.filter(function(g){return c.indexOf(g)>=0});d.length===0&&(d=u);var f=d.reduce(function(g,_){return g[_]=Qe(i,{placement:_,boundary:s,rootBoundary:r,padding:o})[Lt(_)],g},{});return Object.keys(f).sort(function(g,_){return f[g]-f[_]})}function af(i){if(Lt(i)===Ii)return[];var t=Jn(i);return[io(i),t,io(t)]}function lf(i){var t=i.state,e=i.options,n=i.name;if(!t.modifiersData[n]._skip){for(var s=e.mainAxis,r=s===void 0?!0:s,o=e.altAxis,a=o===void 0?!0:o,l=e.fallbackPlacements,c=e.padding,h=e.boundary,u=e.rootBoundary,d=e.altBoundary,f=e.flipVariations,g=f===void 0?!0:f,_=e.allowedAutoPlacements,p=t.options.placement,v=Lt(p),E=v===p,T=l||(E||!g?[Jn(p)]:af(p)),m=[p].concat(T).reduce(function(F,N){return F.concat(Lt(N)===Ii?of(t,{placement:N,boundary:h,rootBoundary:u,padding:c,flipVariations:g,allowedAutoPlacements:_}):N)},[]),C=t.rects.reference,b=t.rects.popper,A=new Map,R=!0,L=m[0],O=0;O<m.length;O++){var $=m[O],Y=Lt($),k=qe($)===_e,rt=[nt,ct].indexOf(Y)>=0,W=rt?"width":"height",V=Qe(t,{placement:$,boundary:h,rootBoundary:u,altBoundary:d,padding:c}),x=rt?k?ht:it:k?ct:nt;C[W]>b[W]&&(x=Jn(x));var H=Jn(x),B=[];if(r&&B.push(V[Y]<=0),a&&B.push(V[x]<=0,V[H]<=0),B.every(function(F){return F})){L=$,R=!1;break}A.set($,B)}if(R)for(var tt=g?3:1,Tt=function(N){var ut=m.find(function(ot){var z=A.get(ot);if(z)return z.slice(0,N).every(function(Rt){return Rt})});if(ut)return L=ut,"break"},U=tt;U>0;U--){var et=Tt(U);if(et==="break")break}t.placement!==L&&(t.modifiersData[n]._skip=!0,t.placement=L,t.reset=!0)}}const qa={name:"flip",enabled:!0,phase:"main",fn:lf,requiresIfExists:["offset"],data:{_skip:!1}};function ro(i,t,e){return e===void 0&&(e={x:0,y:0}),{top:i.top-t.height-e.y,right:i.right-t.width+e.x,bottom:i.bottom-t.height+e.y,left:i.left-t.width-e.x}}function oo(i){return[nt,ht,ct,it].some(function(t){return i[t]>=0})}function cf(i){var t=i.state,e=i.name,n=t.rects.reference,s=t.rects.popper,r=t.modifiersData.preventOverflow,o=Qe(t,{elementContext:"reference"}),a=Qe(t,{altBoundary:!0}),l=ro(o,n),c=ro(a,s,r),h=oo(l),u=oo(c);t.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":u})}const Qa={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:cf};function hf(i,t,e){var n=Lt(i),s=[it,nt].indexOf(n)>=0?-1:1,r=typeof e=="function"?e(Object.assign({},t,{placement:i})):e,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[it,ht].indexOf(n)>=0?{x:a,y:o}:{x:o,y:a}}function uf(i){var t=i.state,e=i.options,n=i.name,s=e.offset,r=s===void 0?[0,0]:s,o=er.reduce(function(h,u){return h[u]=hf(u,t.rects,r),h},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=o}const Ja={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:uf};function df(i){var t=i.state,e=i.name;t.modifiersData[e]=Ba({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const ur={name:"popperOffsets",enabled:!0,phase:"read",fn:df,data:{}};function ff(i){return i==="x"?"y":"x"}function gf(i){var t=i.state,e=i.options,n=i.name,s=e.mainAxis,r=s===void 0?!0:s,o=e.altAxis,a=o===void 0?!1:o,l=e.boundary,c=e.rootBoundary,h=e.altBoundary,u=e.padding,d=e.tether,f=d===void 0?!0:d,g=e.tetherOffset,_=g===void 0?0:g,p=Qe(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:h}),v=Lt(t.placement),E=qe(t.placement),T=!E,m=rr(v),C=ff(m),b=t.modifiersData.popperOffsets,A=t.rects.reference,R=t.rects.popper,L=typeof _=="function"?_(Object.assign({},t.rects,{placement:t.placement})):_,O=typeof L=="number"?{mainAxis:L,altAxis:L}:Object.assign({mainAxis:0,altAxis:0},L),$=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Y={x:0,y:0};if(b){if(r){var k,rt=m==="y"?nt:it,W=m==="y"?ct:ht,V=m==="y"?"height":"width",x=b[m],H=x+p[rt],B=x-p[W],tt=f?-R[V]/2:0,Tt=E===_e?A[V]:R[V],U=E===_e?-R[V]:-A[V],et=t.elements.arrow,F=f&&et?sr(et):{width:0,height:0},N=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Ua(),ut=N[rt],ot=N[W],z=gn(0,A[V],F[V]),Rt=T?A[V]/2-tt-z-ut-O.mainAxis:Tt-z-ut-O.mainAxis,on=T?-A[V]/2+tt+z+ot+O.mainAxis:U+z+ot+O.mainAxis,Ce=t.elements.arrow&&Rn(t.elements.arrow),be=Ce?m==="y"?Ce.clientTop||0:Ce.clientLeft||0:0,Sn=(k=$==null?void 0:$[m])!=null?k:0,Nn=x+Rt-Sn-be,$i=x+on-Sn,Mt=gn(f?di(H,Nn):H,x,f?ge(B,$i):B);b[m]=Mt,Y[m]=Mt-x}if(a){var an,Pn=m==="x"?nt:it,Fi=m==="x"?ct:ht,xt=b[C],Ae=C==="y"?"height":"width",dt=xt+p[Pn],ft=xt-p[Fi],Dt=[nt,it].indexOf(v)!==-1,Ht=(an=$==null?void 0:$[C])!=null?an:0,ln=Dt?dt:xt-A[Ae]-R[Ae]-Ht+O.altAxis,cn=Dt?xt+A[Ae]+R[Ae]-Ht-O.altAxis:ft,we=f&&Dt?Yd(ln,xt,cn):gn(f?ln:dt,xt,f?cn:ft);b[C]=we,Y[C]=we-xt}t.modifiersData[n]=Y}}const tl={name:"preventOverflow",enabled:!0,phase:"main",fn:gf,requiresIfExists:["offset"]};function _f(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function mf(i){return i===yt(i)||!pt(i)?lr(i):_f(i)}function pf(i){var t=i.getBoundingClientRect(),e=Ze(t.width)/i.offsetWidth||1,n=Ze(t.height)/i.offsetHeight||1;return e!==1||n!==1}function Ef(i,t,e){e===void 0&&(e=!1);var n=pt(t),s=pt(t)&&pf(t),r=oe(t),o=Be(i,s,e),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!e)&&((Nt(t)!=="body"||hr(r))&&(a=mf(t)),pt(t)?(l=Be(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=cr(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function yf(i){var t=new Map,e=new Set,n=[];i.forEach(function(r){t.set(r.name,r)});function s(r){e.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var l=t.get(a);l&&s(l)}}),n.push(r)}return i.forEach(function(r){e.has(r.name)||s(r)}),n}function vf(i){var t=yf(i);return Ga.reduce(function(e,n){return e.concat(t.filter(function(s){return s.phase===n}))},[])}function Tf(i){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(i())})})),t}}function Cf(i){var t=i.reduce(function(e,n){var s=e[n.name];return e[n.name]=s?Object.assign({},s,n,{options:Object.assign({},s.options,n.options),data:Object.assign({},s.data,n.data)}):n,e},{});return Object.keys(t).map(function(e){return t[e]})}var ao={placement:"bottom",modifiers:[],strategy:"absolute"};function lo(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Oi(i){i===void 0&&(i={});var t=i,e=t.defaultModifiers,n=e===void 0?[]:e,s=t.defaultOptions,r=s===void 0?ao:s;return function(a,l,c){c===void 0&&(c=r);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},ao,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},u=[],d=!1,f={state:h,setOptions:function(v){var E=typeof v=="function"?v(h.options):v;_(),h.options=Object.assign({},r,h.options,E),h.scrollParents={reference:me(a)?_n(a):a.contextElement?_n(a.contextElement):[],popper:_n(l)};var T=vf(Cf([].concat(n,h.options.modifiers)));return h.orderedModifiers=T.filter(function(m){return m.enabled}),g(),f.update()},forceUpdate:function(){if(!d){var v=h.elements,E=v.reference,T=v.popper;if(lo(E,T)){h.rects={reference:Ef(E,Rn(T),h.options.strategy==="fixed"),popper:sr(T)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(O){return h.modifiersData[O.name]=Object.assign({},O.data)});for(var m=0;m<h.orderedModifiers.length;m++){if(h.reset===!0){h.reset=!1,m=-1;continue}var C=h.orderedModifiers[m],b=C.fn,A=C.options,R=A===void 0?{}:A,L=C.name;typeof b=="function"&&(h=b({state:h,options:R,name:L,instance:f})||h)}}}},update:Tf(function(){return new Promise(function(p){f.forceUpdate(),p(h)})}),destroy:function(){_(),d=!0}};if(!lo(a,l))return f;f.setOptions(c).then(function(p){!d&&c.onFirstUpdate&&c.onFirstUpdate(p)});function g(){h.orderedModifiers.forEach(function(p){var v=p.name,E=p.options,T=E===void 0?{}:E,m=p.effect;if(typeof m=="function"){var C=m({state:h,name:v,instance:f,options:T}),b=function(){};u.push(C||b)}})}function _(){u.forEach(function(p){return p()}),u=[]}return f}}var bf=Oi(),Af=[ar,ur,or,ir],wf=Oi({defaultModifiers:Af}),Rf=[ar,ur,or,ir,Ja,qa,tl,Xa,Qa],dr=Oi({defaultModifiers:Rf});const el=Object.freeze(Object.defineProperty({__proto__:null,afterMain:ka,afterRead:Da,afterWrite:Ka,applyStyles:ir,arrow:Xa,auto:Ii,basePlacements:en,beforeMain:$a,beforeRead:Pa,beforeWrite:Va,bottom:ct,clippingParents:Sa,computeStyles:or,createPopper:dr,createPopperBase:bf,createPopperLite:wf,detectOverflow:Qe,end:Xe,eventListeners:ar,flip:qa,hide:Qa,left:it,main:Fa,modifierPhases:Ga,offset:Ja,placements:er,popper:De,popperGenerator:Oi,popperOffsets:ur,preventOverflow:tl,read:Ma,reference:Na,right:ht,start:_e,top:nt,variationPlacements:ys,viewport:tr,write:za},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const xf=1e6,If=1e3,Cs="transitionend",Lf=i=>i==null?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase(),Of=i=>{do i+=Math.floor(Math.random()*xf);while(document.getElementById(i));return i},nl=i=>{let t=i.getAttribute("data-bs-target");if(!t||t==="#"){let e=i.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t},il=i=>{const t=nl(i);return t&&document.querySelector(t)?t:null},Kt=i=>{const t=nl(i);return t?document.querySelector(t):null},Sf=i=>{if(!i)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(i);const n=Number.parseFloat(t),s=Number.parseFloat(e);return!n&&!s?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*If)},sl=i=>{i.dispatchEvent(new Event(Cs))},Gt=i=>!i||typeof i!="object"?!1:(typeof i.jquery<"u"&&(i=i[0]),typeof i.nodeType<"u"),ne=i=>Gt(i)?i.jquery?i[0]:i:typeof i=="string"&&i.length>0?document.querySelector(i):null,nn=i=>{if(!Gt(i)||i.getClientRects().length===0)return!1;const t=getComputedStyle(i).getPropertyValue("visibility")==="visible",e=i.closest("details:not([open])");if(!e)return t;if(e!==i){const n=i.closest("summary");if(n&&n.parentNode!==e||n===null)return!1}return t},ie=i=>!i||i.nodeType!==Node.ELEMENT_NODE||i.classList.contains("disabled")?!0:typeof i.disabled<"u"?i.disabled:i.hasAttribute("disabled")&&i.getAttribute("disabled")!=="false",rl=i=>{if(!document.documentElement.attachShadow)return null;if(typeof i.getRootNode=="function"){const t=i.getRootNode();return t instanceof ShadowRoot?t:null}return i instanceof ShadowRoot?i:i.parentNode?rl(i.parentNode):null},fi=()=>{},xn=i=>{i.offsetHeight},ol=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Hi=[],Nf=i=>{document.readyState==="loading"?(Hi.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of Hi)t()}),Hi.push(i)):i()},Et=()=>document.documentElement.dir==="rtl",vt=i=>{Nf(()=>{const t=ol();if(t){const e=i.NAME,n=t.fn[e];t.fn[e]=i.jQueryInterface,t.fn[e].Constructor=i,t.fn[e].noConflict=()=>(t.fn[e]=n,i.jQueryInterface)}})},Vt=i=>{typeof i=="function"&&i()},al=(i,t,e=!0)=>{if(!e){Vt(i);return}const n=5,s=Sf(t)+n;let r=!1;const o=({target:a})=>{a===t&&(r=!0,t.removeEventListener(Cs,o),Vt(i))};t.addEventListener(Cs,o),setTimeout(()=>{r||sl(t)},s)},fr=(i,t,e,n)=>{const s=i.length;let r=i.indexOf(t);return r===-1?!e&&n?i[s-1]:i[0]:(r+=e?1:-1,n&&(r=(r+s)%s),i[Math.max(0,Math.min(r,s-1))])},Pf=/[^.]*(?=\..*)\.|.*/,Mf=/\..*/,Df=/::\d+$/,Xi={};let co=1;const ll={mouseenter:"mouseover",mouseleave:"mouseout"},$f=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function cl(i,t){return t&&`${t}::${co++}`||i.uidEvent||co++}function hl(i){const t=cl(i);return i.uidEvent=t,Xi[t]=Xi[t]||{},Xi[t]}function Ff(i,t){return function e(n){return gr(n,{delegateTarget:i}),e.oneOff&&y.off(i,n.type,t),t.apply(i,[n])}}function kf(i,t,e){return function n(s){const r=i.querySelectorAll(t);for(let{target:o}=s;o&&o!==this;o=o.parentNode)for(const a of r)if(a===o)return gr(s,{delegateTarget:o}),n.oneOff&&y.off(i,s.type,t,e),e.apply(o,[s])}}function ul(i,t,e=null){return Object.values(i).find(n=>n.callable===t&&n.delegationSelector===e)}function dl(i,t,e){const n=typeof t=="string",s=n?e:t||e;let r=fl(i);return $f.has(r)||(r=i),[n,s,r]}function ho(i,t,e,n,s){if(typeof t!="string"||!i)return;let[r,o,a]=dl(t,e,n);t in ll&&(o=(g=>function(_){if(!_.relatedTarget||_.relatedTarget!==_.delegateTarget&&!_.delegateTarget.contains(_.relatedTarget))return g.call(this,_)})(o));const l=hl(i),c=l[a]||(l[a]={}),h=ul(c,o,r?e:null);if(h){h.oneOff=h.oneOff&&s;return}const u=cl(o,t.replace(Pf,"")),d=r?kf(i,e,o):Ff(i,o);d.delegationSelector=r?e:null,d.callable=o,d.oneOff=s,d.uidEvent=u,c[u]=d,i.addEventListener(a,d,r)}function bs(i,t,e,n,s){const r=ul(t[e],n,s);r&&(i.removeEventListener(e,r,Boolean(s)),delete t[e][r.uidEvent])}function Vf(i,t,e,n){const s=t[e]||{};for(const r of Object.keys(s))if(r.includes(n)){const o=s[r];bs(i,t,e,o.callable,o.delegationSelector)}}function fl(i){return i=i.replace(Mf,""),ll[i]||i}const y={on(i,t,e,n){ho(i,t,e,n,!1)},one(i,t,e,n){ho(i,t,e,n,!0)},off(i,t,e,n){if(typeof t!="string"||!i)return;const[s,r,o]=dl(t,e,n),a=o!==t,l=hl(i),c=l[o]||{},h=t.startsWith(".");if(typeof r<"u"){if(!Object.keys(c).length)return;bs(i,l,o,r,s?e:null);return}if(h)for(const u of Object.keys(l))Vf(i,l,u,t.slice(1));for(const u of Object.keys(c)){const d=u.replace(Df,"");if(!a||t.includes(d)){const f=c[u];bs(i,l,o,f.callable,f.delegationSelector)}}},trigger(i,t,e){if(typeof t!="string"||!i)return null;const n=ol(),s=fl(t),r=t!==s;let o=null,a=!0,l=!0,c=!1;r&&n&&(o=n.Event(t,e),n(i).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),c=o.isDefaultPrevented());let h=new Event(t,{bubbles:a,cancelable:!0});return h=gr(h,e),c&&h.preventDefault(),l&&i.dispatchEvent(h),h.defaultPrevented&&o&&o.preventDefault(),h}};function gr(i,t){for(const[e,n]of Object.entries(t||{}))try{i[e]=n}catch{Object.defineProperty(i,e,{configurable:!0,get(){return n}})}return i}const Bt=new Map,Zi={set(i,t,e){Bt.has(i)||Bt.set(i,new Map);const n=Bt.get(i);if(!n.has(t)&&n.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`);return}n.set(t,e)},get(i,t){return Bt.has(i)&&Bt.get(i).get(t)||null},remove(i,t){if(!Bt.has(i))return;const e=Bt.get(i);e.delete(t),e.size===0&&Bt.delete(i)}};function uo(i){if(i==="true")return!0;if(i==="false")return!1;if(i===Number(i).toString())return Number(i);if(i===""||i==="null")return null;if(typeof i!="string")return i;try{return JSON.parse(decodeURIComponent(i))}catch{return i}}function Bi(i){return i.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const jt={setDataAttribute(i,t,e){i.setAttribute(`data-bs-${Bi(t)}`,e)},removeDataAttribute(i,t){i.removeAttribute(`data-bs-${Bi(t)}`)},getDataAttributes(i){if(!i)return{};const t={},e=Object.keys(i.dataset).filter(n=>n.startsWith("bs")&&!n.startsWith("bsConfig"));for(const n of e){let s=n.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1,s.length),t[s]=uo(i.dataset[n])}return t},getDataAttribute(i,t){return uo(i.getAttribute(`data-bs-${Bi(t)}`))}};class In{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=Gt(e)?jt.getDataAttribute(e,"config"):{};return{...this.constructor.Default,...typeof n=="object"?n:{},...Gt(e)?jt.getDataAttributes(e):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const n of Object.keys(e)){const s=e[n],r=t[n],o=Gt(r)?"element":Lf(r);if(!new RegExp(s).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${o}" but expected type "${s}".`)}}}const zf="5.2.3";class At extends In{constructor(t,e){super(),t=ne(t),t&&(this._element=t,this._config=this._getConfig(e),Zi.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Zi.remove(this._element,this.constructor.DATA_KEY),y.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){al(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Zi.get(ne(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return zf}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const Si=(i,t="hide")=>{const e=`click.dismiss${i.EVENT_KEY}`,n=i.NAME;y.on(document,e,`[data-bs-dismiss="${n}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),ie(this))return;const r=Kt(this)||this.closest(`.${n}`);i.getOrCreateInstance(r)[t]()})},Kf="alert",Gf="bs.alert",gl=`.${Gf}`,jf=`close${gl}`,Yf=`closed${gl}`,Uf="fade",Wf="show";class Ni extends At{static get NAME(){return Kf}close(){if(y.trigger(this._element,jf).defaultPrevented)return;this._element.classList.remove(Wf);const e=this._element.classList.contains(Uf);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),y.trigger(this._element,Yf),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=Ni.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Si(Ni,"close");vt(Ni);const Hf="button",Xf="bs.button",Zf=`.${Xf}`,Bf=".data-api",qf="active",fo='[data-bs-toggle="button"]',Qf=`click${Zf}${Bf}`;class Pi extends At{static get NAME(){return Hf}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(qf))}static jQueryInterface(t){return this.each(function(){const e=Pi.getOrCreateInstance(this);t==="toggle"&&e[t]()})}}y.on(document,Qf,fo,i=>{i.preventDefault();const t=i.target.closest(fo);Pi.getOrCreateInstance(t).toggle()});vt(Pi);const I={find(i,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,i))},findOne(i,t=document.documentElement){return Element.prototype.querySelector.call(t,i)},children(i,t){return[].concat(...i.children).filter(e=>e.matches(t))},parents(i,t){const e=[];let n=i.parentNode.closest(t);for(;n;)e.push(n),n=n.parentNode.closest(t);return e},prev(i,t){let e=i.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(i,t){let e=i.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(i){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,i).filter(e=>!ie(e)&&nn(e))}},Jf="swipe",sn=".bs.swipe",tg=`touchstart${sn}`,eg=`touchmove${sn}`,ng=`touchend${sn}`,ig=`pointerdown${sn}`,sg=`pointerup${sn}`,rg="touch",og="pen",ag="pointer-event",lg=40,cg={endCallback:null,leftCallback:null,rightCallback:null},hg={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class gi extends In{constructor(t,e){super(),this._element=t,!(!t||!gi.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return cg}static get DefaultType(){return hg}static get NAME(){return Jf}dispose(){y.off(this._element,sn)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Vt(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=lg)return;const e=t/this._deltaX;this._deltaX=0,e&&Vt(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(y.on(this._element,ig,t=>this._start(t)),y.on(this._element,sg,t=>this._end(t)),this._element.classList.add(ag)):(y.on(this._element,tg,t=>this._start(t)),y.on(this._element,eg,t=>this._move(t)),y.on(this._element,ng,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===og||t.pointerType===rg)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ug="carousel",dg="bs.carousel",ae=`.${dg}`,_l=".data-api",fg="ArrowLeft",gg="ArrowRight",_g=500,un="next",Oe="prev",$e="left",ti="right",mg=`slide${ae}`,qi=`slid${ae}`,pg=`keydown${ae}`,Eg=`mouseenter${ae}`,yg=`mouseleave${ae}`,vg=`dragstart${ae}`,Tg=`load${ae}${_l}`,Cg=`click${ae}${_l}`,ml="carousel",Un="active",bg="slide",Ag="carousel-item-end",wg="carousel-item-start",Rg="carousel-item-next",xg="carousel-item-prev",pl=".active",El=".carousel-item",Ig=pl+El,Lg=".carousel-item img",Og=".carousel-indicators",Sg="[data-bs-slide], [data-bs-slide-to]",Ng='[data-bs-ride="carousel"]',Pg={[fg]:ti,[gg]:$e},Mg={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Dg={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ln extends At{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=I.findOne(Og,this._element),this._addEventListeners(),this._config.ride===ml&&this.cycle()}static get Default(){return Mg}static get DefaultType(){return Dg}static get NAME(){return ug}next(){this._slide(un)}nextWhenVisible(){!document.hidden&&nn(this._element)&&this.next()}prev(){this._slide(Oe)}pause(){this._isSliding&&sl(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){y.one(this._element,qi,()=>this.cycle());return}this.cycle()}}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){y.one(this._element,qi,()=>this.to(t));return}const n=this._getItemIndex(this._getActive());if(n===t)return;const s=t>n?un:Oe;this._slide(s,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&y.on(this._element,pg,t=>this._keydown(t)),this._config.pause==="hover"&&(y.on(this._element,Eg,()=>this.pause()),y.on(this._element,yg,()=>this._maybeEnableCycle())),this._config.touch&&gi.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of I.find(Lg,this._element))y.on(n,vg,s=>s.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder($e)),rightCallback:()=>this._slide(this._directionToOrder(ti)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),_g+this._config.interval))}};this._swipeHelper=new gi(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=Pg[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=I.findOne(pl,this._indicatorsElement);e.classList.remove(Un),e.removeAttribute("aria-current");const n=I.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(Un),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const n=this._getActive(),s=t===un,r=e||fr(this._getItems(),n,s,this._config.wrap);if(r===n)return;const o=this._getItemIndex(r),a=f=>y.trigger(this._element,f,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:o});if(a(mg).defaultPrevented||!n||!r)return;const c=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const h=s?wg:Ag,u=s?Rg:xg;r.classList.add(u),xn(r),n.classList.add(h),r.classList.add(h);const d=()=>{r.classList.remove(h,u),r.classList.add(Un),n.classList.remove(Un,u,h),this._isSliding=!1,a(qi)};this._queueCallback(d,n,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains(bg)}_getActive(){return I.findOne(Ig,this._element)}_getItems(){return I.find(El,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return Et()?t===$e?Oe:un:t===$e?un:Oe}_orderToDirection(t){return Et()?t===Oe?$e:ti:t===Oe?ti:$e}static jQueryInterface(t){return this.each(function(){const e=Ln.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}y.on(document,Cg,Sg,function(i){const t=Kt(this);if(!t||!t.classList.contains(ml))return;i.preventDefault();const e=Ln.getOrCreateInstance(t),n=this.getAttribute("data-bs-slide-to");if(n){e.to(n),e._maybeEnableCycle();return}if(jt.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()});y.on(window,Tg,()=>{const i=I.find(Ng);for(const t of i)Ln.getOrCreateInstance(t)});vt(Ln);const $g="collapse",Fg="bs.collapse",On=`.${Fg}`,kg=".data-api",Vg=`show${On}`,zg=`shown${On}`,Kg=`hide${On}`,Gg=`hidden${On}`,jg=`click${On}${kg}`,Qi="show",ze="collapse",Wn="collapsing",Yg="collapsed",Ug=`:scope .${ze} .${ze}`,Wg="collapse-horizontal",Hg="width",Xg="height",Zg=".collapse.show, .collapse.collapsing",As='[data-bs-toggle="collapse"]',Bg={parent:null,toggle:!0},qg={parent:"(null|element)",toggle:"boolean"};class Tn extends At{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=I.find(As);for(const s of n){const r=il(s),o=I.find(r).filter(a=>a===this._element);r!==null&&o.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Bg}static get DefaultType(){return qg}static get NAME(){return $g}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(Zg).filter(a=>a!==this._element).map(a=>Tn.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||y.trigger(this._element,Vg).defaultPrevented)return;for(const a of t)a.hide();const n=this._getDimension();this._element.classList.remove(ze),this._element.classList.add(Wn),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(Wn),this._element.classList.add(ze,Qi),this._element.style[n]="",y.trigger(this._element,zg)},o=`scroll${n[0].toUpperCase()+n.slice(1)}`;this._queueCallback(s,this._element,!0),this._element.style[n]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||y.trigger(this._element,Kg).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,xn(this._element),this._element.classList.add(Wn),this._element.classList.remove(ze,Qi);for(const s of this._triggerArray){const r=Kt(s);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([s],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(Wn),this._element.classList.add(ze),y.trigger(this._element,Gg)};this._element.style[e]="",this._queueCallback(n,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Qi)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=ne(t.parent),t}_getDimension(){return this._element.classList.contains(Wg)?Hg:Xg}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(As);for(const e of t){const n=Kt(e);n&&this._addAriaAndCollapsedClass([e],this._isShown(n))}}_getFirstLevelChildren(t){const e=I.find(Ug,this._config.parent);return I.find(t,this._config.parent).filter(n=>!e.includes(n))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle(Yg,!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const n=Tn.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}y.on(document,jg,As,function(i){(i.target.tagName==="A"||i.delegateTarget&&i.delegateTarget.tagName==="A")&&i.preventDefault();const t=il(this),e=I.find(t);for(const n of e)Tn.getOrCreateInstance(n,{toggle:!1}).toggle()});vt(Tn);const go="dropdown",Qg="bs.dropdown",ve=`.${Qg}`,_r=".data-api",Jg="Escape",_o="Tab",t_="ArrowUp",mo="ArrowDown",e_=2,n_=`hide${ve}`,i_=`hidden${ve}`,s_=`show${ve}`,r_=`shown${ve}`,yl=`click${ve}${_r}`,vl=`keydown${ve}${_r}`,o_=`keyup${ve}${_r}`,Fe="show",a_="dropup",l_="dropend",c_="dropstart",h_="dropup-center",u_="dropdown-center",de='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',d_=`${de}.${Fe}`,ei=".dropdown-menu",f_=".navbar",g_=".navbar-nav",__=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",m_=Et()?"top-end":"top-start",p_=Et()?"top-start":"top-end",E_=Et()?"bottom-end":"bottom-start",y_=Et()?"bottom-start":"bottom-end",v_=Et()?"left-start":"right-start",T_=Et()?"right-start":"left-start",C_="top",b_="bottom",A_={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},w_={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ot extends At{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=I.next(this._element,ei)[0]||I.prev(this._element,ei)[0]||I.findOne(ei,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return A_}static get DefaultType(){return w_}static get NAME(){return go}toggle(){return this._isShown()?this.hide():this.show()}show(){if(ie(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!y.trigger(this._element,s_,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(g_))for(const n of[].concat(...document.body.children))y.on(n,"mouseover",fi);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Fe),this._element.classList.add(Fe),y.trigger(this._element,r_,t)}}hide(){if(ie(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!y.trigger(this._element,n_,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const n of[].concat(...document.body.children))y.off(n,"mouseover",fi);this._popper&&this._popper.destroy(),this._menu.classList.remove(Fe),this._element.classList.remove(Fe),this._element.setAttribute("aria-expanded","false"),jt.removeDataAttribute(this._menu,"popper"),y.trigger(this._element,i_,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!Gt(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${go.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof el>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:Gt(this._config.reference)?t=ne(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=dr(t,this._menu,e)}_isShown(){return this._menu.classList.contains(Fe)}_getPlacement(){const t=this._parent;if(t.classList.contains(l_))return v_;if(t.classList.contains(c_))return T_;if(t.classList.contains(h_))return C_;if(t.classList.contains(u_))return b_;const e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(a_)?e?p_:m_:e?y_:E_}_detectNavbar(){return this._element.closest(f_)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(jt.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...typeof this._config.popperConfig=="function"?this._config.popperConfig(t):this._config.popperConfig}}_selectMenuItem({key:t,target:e}){const n=I.find(__,this._menu).filter(s=>nn(s));n.length&&fr(n,e,t===mo,!n.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=Ot.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===e_||t.type==="keyup"&&t.key!==_o)return;const e=I.find(d_);for(const n of e){const s=Ot.getInstance(n);if(!s||s._config.autoClose===!1)continue;const r=t.composedPath(),o=r.includes(s._menu);if(r.includes(s._element)||s._config.autoClose==="inside"&&!o||s._config.autoClose==="outside"&&o||s._menu.contains(t.target)&&(t.type==="keyup"&&t.key===_o||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const a={relatedTarget:s._element};t.type==="click"&&(a.clickEvent=t),s._completeHide(a)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n=t.key===Jg,s=[t_,mo].includes(t.key);if(!s&&!n||e&&!n)return;t.preventDefault();const r=this.matches(de)?this:I.prev(this,de)[0]||I.next(this,de)[0]||I.findOne(de,t.delegateTarget.parentNode),o=Ot.getOrCreateInstance(r);if(s){t.stopPropagation(),o.show(),o._selectMenuItem(t);return}o._isShown()&&(t.stopPropagation(),o.hide(),r.focus())}}y.on(document,vl,de,Ot.dataApiKeydownHandler);y.on(document,vl,ei,Ot.dataApiKeydownHandler);y.on(document,yl,Ot.clearMenus);y.on(document,o_,Ot.clearMenus);y.on(document,yl,de,function(i){i.preventDefault(),Ot.getOrCreateInstance(this).toggle()});vt(Ot);const po=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Eo=".sticky-top",Hn="padding-right",yo="margin-right";class ws{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Hn,e=>e+t),this._setElementAttributes(po,Hn,e=>e+t),this._setElementAttributes(Eo,yo,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Hn),this._resetElementAttributes(po,Hn),this._resetElementAttributes(Eo,yo)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const s=this.getWidth(),r=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+s)return;this._saveInitialAttribute(o,e);const a=window.getComputedStyle(o).getPropertyValue(e);o.style.setProperty(e,`${n(Number.parseFloat(a))}px`)};this._applyManipulationCallback(t,r)}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&jt.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){const n=s=>{const r=jt.getDataAttribute(s,e);if(r===null){s.style.removeProperty(e);return}jt.removeDataAttribute(s,e),s.style.setProperty(e,r)};this._applyManipulationCallback(t,n)}_applyManipulationCallback(t,e){if(Gt(t)){e(t);return}for(const n of I.find(t,this._element))e(n)}}const Tl="backdrop",R_="fade",vo="show",To=`mousedown.bs.${Tl}`,x_={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},I_={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Cl extends In{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return x_}static get DefaultType(){return I_}static get NAME(){return Tl}show(t){if(!this._config.isVisible){Vt(t);return}this._append();const e=this._getElement();this._config.isAnimated&&xn(e),e.classList.add(vo),this._emulateAnimation(()=>{Vt(t)})}hide(t){if(!this._config.isVisible){Vt(t);return}this._getElement().classList.remove(vo),this._emulateAnimation(()=>{this.dispose(),Vt(t)})}dispose(){this._isAppended&&(y.off(this._element,To),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(R_),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=ne(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),y.on(t,To,()=>{Vt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){al(t,this._getElement(),this._config.isAnimated)}}const L_="focustrap",O_="bs.focustrap",_i=`.${O_}`,S_=`focusin${_i}`,N_=`keydown.tab${_i}`,P_="Tab",M_="forward",Co="backward",D_={autofocus:!0,trapElement:null},$_={autofocus:"boolean",trapElement:"element"};class bl extends In{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return D_}static get DefaultType(){return $_}static get NAME(){return L_}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),y.off(document,_i),y.on(document,S_,t=>this._handleFocusin(t)),y.on(document,N_,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,y.off(document,_i))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=I.focusableChildren(e);n.length===0?e.focus():this._lastTabNavDirection===Co?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){t.key===P_&&(this._lastTabNavDirection=t.shiftKey?Co:M_)}}const F_="modal",k_="bs.modal",wt=`.${k_}`,V_=".data-api",z_="Escape",K_=`hide${wt}`,G_=`hidePrevented${wt}`,Al=`hidden${wt}`,wl=`show${wt}`,j_=`shown${wt}`,Y_=`resize${wt}`,U_=`click.dismiss${wt}`,W_=`mousedown.dismiss${wt}`,H_=`keydown.dismiss${wt}`,X_=`click${wt}${V_}`,bo="modal-open",Z_="fade",Ao="show",Ji="modal-static",B_=".modal.show",q_=".modal-dialog",Q_=".modal-body",J_='[data-bs-toggle="modal"]',tm={backdrop:!0,focus:!0,keyboard:!0},em={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class pe extends At{constructor(t,e){super(t,e),this._dialog=I.findOne(q_,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ws,this._addEventListeners()}static get Default(){return tm}static get DefaultType(){return em}static get NAME(){return F_}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||y.trigger(this._element,wl,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(bo),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||y.trigger(this._element,K_).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Ao),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const t of[window,this._dialog])y.off(t,wt);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Cl({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new bl({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=I.findOne(Q_,this._dialog);e&&(e.scrollTop=0),xn(this._element),this._element.classList.add(Ao);const n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,y.trigger(this._element,j_,{relatedTarget:t})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){y.on(this._element,H_,t=>{if(t.key===z_){if(this._config.keyboard){t.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),y.on(window,Y_,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),y.on(this._element,W_,t=>{y.one(this._element,U_,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(bo),this._resetAdjustments(),this._scrollBar.reset(),y.trigger(this._element,Al)})}_isAnimated(){return this._element.classList.contains(Z_)}_triggerBackdropTransition(){if(y.trigger(this._element,G_).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;n==="hidden"||this._element.classList.contains(Ji)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Ji),this._queueCallback(()=>{this._element.classList.remove(Ji),this._queueCallback(()=>{this._element.style.overflowY=n},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const s=Et()?"paddingLeft":"paddingRight";this._element.style[s]=`${e}px`}if(!n&&t){const s=Et()?"paddingRight":"paddingLeft";this._element.style[s]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const n=pe.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](e)}})}}y.on(document,X_,J_,function(i){const t=Kt(this);["A","AREA"].includes(this.tagName)&&i.preventDefault(),y.one(t,wl,s=>{s.defaultPrevented||y.one(t,Al,()=>{nn(this)&&this.focus()})});const e=I.findOne(B_);e&&pe.getInstance(e).hide(),pe.getOrCreateInstance(t).toggle(this)});Si(pe);vt(pe);const nm="offcanvas",im="bs.offcanvas",Wt=`.${im}`,Rl=".data-api",sm=`load${Wt}${Rl}`,rm="Escape",wo="show",Ro="showing",xo="hiding",om="offcanvas-backdrop",xl=".offcanvas.show",am=`show${Wt}`,lm=`shown${Wt}`,cm=`hide${Wt}`,Io=`hidePrevented${Wt}`,Il=`hidden${Wt}`,hm=`resize${Wt}`,um=`click${Wt}${Rl}`,dm=`keydown.dismiss${Wt}`,fm='[data-bs-toggle="offcanvas"]',gm={backdrop:!0,keyboard:!0,scroll:!1},_m={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class se extends At{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return gm}static get DefaultType(){return _m}static get NAME(){return nm}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||y.trigger(this._element,am,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ws().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ro);const n=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(wo),this._element.classList.remove(Ro),y.trigger(this._element,lm,{relatedTarget:t})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown||y.trigger(this._element,cm).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(xo),this._backdrop.hide();const e=()=>{this._element.classList.remove(wo,xo),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ws().reset(),y.trigger(this._element,Il)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){y.trigger(this._element,Io);return}this.hide()},e=Boolean(this._config.backdrop);return new Cl({className:om,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new bl({trapElement:this._element})}_addEventListeners(){y.on(this._element,dm,t=>{if(t.key===rm){if(!this._config.keyboard){y.trigger(this._element,Io);return}this.hide()}})}static jQueryInterface(t){return this.each(function(){const e=se.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}y.on(document,um,fm,function(i){const t=Kt(this);if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),ie(this))return;y.one(t,Il,()=>{nn(this)&&this.focus()});const e=I.findOne(xl);e&&e!==t&&se.getInstance(e).hide(),se.getOrCreateInstance(t).toggle(this)});y.on(window,sm,()=>{for(const i of I.find(xl))se.getOrCreateInstance(i).show()});y.on(window,hm,()=>{for(const i of I.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(i).position!=="fixed"&&se.getOrCreateInstance(i).hide()});Si(se);vt(se);const mm=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),pm=/^aria-[\w-]*$/i,Em=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,ym=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,vm=(i,t)=>{const e=i.nodeName.toLowerCase();return t.includes(e)?mm.has(e)?Boolean(Em.test(i.nodeValue)||ym.test(i.nodeValue)):!0:t.filter(n=>n instanceof RegExp).some(n=>n.test(e))},Ll={"*":["class","dir","id","lang","role",pm],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function Tm(i,t,e){if(!i.length)return i;if(e&&typeof e=="function")return e(i);const s=new window.DOMParser().parseFromString(i,"text/html"),r=[].concat(...s.body.querySelectorAll("*"));for(const o of r){const a=o.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),c=[].concat(t["*"]||[],t[a]||[]);for(const h of l)vm(h,c)||o.removeAttribute(h.nodeName)}return s.body.innerHTML}const Cm="TemplateFactory",bm={allowList:Ll,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Am={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},wm={entry:"(string|element|function|null)",selector:"(string|element)"};class Rm extends In{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return bm}static get DefaultType(){return Am}static get NAME(){return Cm}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[s,r]of Object.entries(this._config.content))this._setContent(t,r,s);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},wm)}_setContent(t,e,n){const s=I.findOne(n,t);if(s){if(e=this._resolvePossibleFunction(e),!e){s.remove();return}if(Gt(e)){this._putElementInTemplate(ne(e),s);return}if(this._config.html){s.innerHTML=this._maybeSanitize(e);return}s.textContent=e}}_maybeSanitize(t){return this._config.sanitize?Tm(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return typeof t=="function"?t(this):t}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}}const xm="tooltip",Im=new Set(["sanitize","allowList","sanitizeFn"]),ts="fade",Lm="modal",Xn="show",Om=".tooltip-inner",Lo=`.${Lm}`,Oo="hide.bs.modal",dn="hover",es="focus",Sm="click",Nm="manual",Pm="hide",Mm="hidden",Dm="show",$m="shown",Fm="inserted",km="click",Vm="focusin",zm="focusout",Km="mouseenter",Gm="mouseleave",jm={AUTO:"auto",TOP:"top",RIGHT:Et()?"left":"right",BOTTOM:"bottom",LEFT:Et()?"right":"left"},Ym={allowList:Ll,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Um={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class rn extends At{constructor(t,e){if(typeof el>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Ym}static get DefaultType(){return Um}static get NAME(){return xm}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),y.off(this._element.closest(Lo),Oo,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=y.trigger(this._element,this.constructor.eventName(Dm)),n=(rl(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!n)return;this._disposePopper();const s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(s),y.trigger(this._element,this.constructor.eventName(Fm))),this._popper=this._createPopper(s),s.classList.add(Xn),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))y.on(a,"mouseover",fi);const o=()=>{y.trigger(this._element,this.constructor.eventName($m)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||y.trigger(this._element,this.constructor.eventName(Pm)).defaultPrevented)return;if(this._getTipElement().classList.remove(Xn),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))y.off(s,"mouseover",fi);this._activeTrigger[Sm]=!1,this._activeTrigger[es]=!1,this._activeTrigger[dn]=!1,this._isHovered=null;const n=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),y.trigger(this._element,this.constructor.eventName(Mm)))};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(ts,Xn),e.classList.add(`bs-${this.constructor.NAME}-auto`);const n=Of(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(ts),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Rm({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Om]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ts)}_isShown(){return this.tip&&this.tip.classList.contains(Xn)}_createPopper(t){const e=typeof this._config.placement=="function"?this._config.placement.call(this,t,this._element):this._config.placement,n=jm[e.toUpperCase()];return dr(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return typeof t=="function"?t.call(this._element):t}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:n=>{this._getTipElement().setAttribute("data-popper-placement",n.state.placement)}}]};return{...e,...typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if(e==="click")y.on(this._element,this.constructor.eventName(km),this._config.selector,n=>{this._initializeOnDelegatedTarget(n).toggle()});else if(e!==Nm){const n=e===dn?this.constructor.eventName(Km):this.constructor.eventName(Vm),s=e===dn?this.constructor.eventName(Gm):this.constructor.eventName(zm);y.on(this._element,n,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusin"?es:dn]=!0,o._enter()}),y.on(this._element,s,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusout"?es:dn]=o._element.contains(r.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},y.on(this._element.closest(Lo),Oo,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=jt.getDataAttributes(this._element);for(const n of Object.keys(e))Im.has(n)&&delete e[n];return t={...e,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:ne(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const e in this._config)this.constructor.Default[e]!==this._config[e]&&(t[e]=this._config[e]);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=rn.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}vt(rn);const Wm="popover",Hm=".popover-header",Xm=".popover-body",Zm={...rn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Bm={...rn.DefaultType,content:"(null|string|element|function)"};class mr extends rn{static get Default(){return Zm}static get DefaultType(){return Bm}static get NAME(){return Wm}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Hm]:this._getTitle(),[Xm]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=mr.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}vt(mr);const qm="scrollspy",Qm="bs.scrollspy",pr=`.${Qm}`,Jm=".data-api",tp=`activate${pr}`,So=`click${pr}`,ep=`load${pr}${Jm}`,np="dropdown-item",Se="active",ip='[data-bs-spy="scroll"]',ns="[href]",sp=".nav, .list-group",No=".nav-link",rp=".nav-item",op=".list-group-item",ap=`${No}, ${rp} > ${No}, ${op}`,lp=".dropdown",cp=".dropdown-toggle",hp={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},up={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Mi extends At{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return hp}static get DefaultType(){return up}static get NAME(){return qm}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=ne(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(y.off(this._config.target,So),y.on(this._config.target,So,ns,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,s=e.offsetTop-this._element.offsetTop;if(n.scrollTo){n.scrollTo({top:s,behavior:"smooth"});return}n.scrollTop=s}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){const e=o=>this._targetLinks.get(`#${o.target.id}`),n=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(e(o))},s=(this._rootElement||document.documentElement).scrollTop,r=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&a){if(n(o),!s)return;continue}!r&&!a&&n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=I.find(ns,this._config.target);for(const e of t){if(!e.hash||ie(e))continue;const n=I.findOne(e.hash,this._element);nn(n)&&(this._targetLinks.set(e.hash,e),this._observableSections.set(e.hash,n))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Se),this._activateParents(t),y.trigger(this._element,tp,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(np)){I.findOne(cp,t.closest(lp)).classList.add(Se);return}for(const e of I.parents(t,sp))for(const n of I.prev(e,ap))n.classList.add(Se)}_clearActiveClass(t){t.classList.remove(Se);const e=I.find(`${ns}.${Se}`,t);for(const n of e)n.classList.remove(Se)}static jQueryInterface(t){return this.each(function(){const e=Mi.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}y.on(window,ep,()=>{for(const i of I.find(ip))Mi.getOrCreateInstance(i)});vt(Mi);const dp="tab",fp="bs.tab",Te=`.${fp}`,gp=`hide${Te}`,_p=`hidden${Te}`,mp=`show${Te}`,pp=`shown${Te}`,Ep=`click${Te}`,yp=`keydown${Te}`,vp=`load${Te}`,Tp="ArrowLeft",Po="ArrowRight",Cp="ArrowUp",Mo="ArrowDown",fe="active",Do="fade",is="show",bp="dropdown",Ap=".dropdown-toggle",wp=".dropdown-menu",ss=":not(.dropdown-toggle)",Rp='.list-group, .nav, [role="tablist"]',xp=".nav-item, .list-group-item",Ip=`.nav-link${ss}, .list-group-item${ss}, [role="tab"]${ss}`,Ol='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',rs=`${Ip}, ${Ol}`,Lp=`.${fe}[data-bs-toggle="tab"], .${fe}[data-bs-toggle="pill"], .${fe}[data-bs-toggle="list"]`;class Je extends At{constructor(t){super(t),this._parent=this._element.closest(Rp),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),y.on(this._element,yp,e=>this._keydown(e)))}static get NAME(){return dp}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?y.trigger(e,gp,{relatedTarget:t}):null;y.trigger(t,mp,{relatedTarget:e}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(fe),this._activate(Kt(t));const n=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(is);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),y.trigger(t,pp,{relatedTarget:e})};this._queueCallback(n,t,t.classList.contains(Do))}_deactivate(t,e){if(!t)return;t.classList.remove(fe),t.blur(),this._deactivate(Kt(t));const n=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(is);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),y.trigger(t,_p,{relatedTarget:e})};this._queueCallback(n,t,t.classList.contains(Do))}_keydown(t){if(![Tp,Po,Cp,Mo].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=[Po,Mo].includes(t.key),n=fr(this._getChildren().filter(s=>!ie(s)),t.target,e,!0);n&&(n.focus({preventScroll:!0}),Je.getOrCreateInstance(n).show())}_getChildren(){return I.find(rs,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const n of e)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=Kt(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`#${t.id}`))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains(bp))return;const s=(r,o)=>{const a=I.findOne(r,n);a&&a.classList.toggle(o,e)};s(Ap,fe),s(wp,is),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(fe)}_getInnerElement(t){return t.matches(rs)?t:I.findOne(rs,t)}_getOuterElement(t){return t.closest(xp)||t}static jQueryInterface(t){return this.each(function(){const e=Je.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}y.on(document,Ep,Ol,function(i){["A","AREA"].includes(this.tagName)&&i.preventDefault(),!ie(this)&&Je.getOrCreateInstance(this).show()});y.on(window,vp,()=>{for(const i of I.find(Lp))Je.getOrCreateInstance(i)});vt(Je);const Op="toast",Sp="bs.toast",le=`.${Sp}`,Np=`mouseover${le}`,Pp=`mouseout${le}`,Mp=`focusin${le}`,Dp=`focusout${le}`,$p=`hide${le}`,Fp=`hidden${le}`,kp=`show${le}`,Vp=`shown${le}`,zp="fade",$o="hide",Zn="show",Bn="showing",Kp={animation:"boolean",autohide:"boolean",delay:"number"},Gp={animation:!0,autohide:!0,delay:5e3};class Di extends At{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Gp}static get DefaultType(){return Kp}static get NAME(){return Op}show(){if(y.trigger(this._element,kp).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(zp);const e=()=>{this._element.classList.remove(Bn),y.trigger(this._element,Vp),this._maybeScheduleHide()};this._element.classList.remove($o),xn(this._element),this._element.classList.add(Zn,Bn),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||y.trigger(this._element,$p).defaultPrevented)return;const e=()=>{this._element.classList.add($o),this._element.classList.remove(Bn,Zn),y.trigger(this._element,Fp)};this._element.classList.add(Bn),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Zn),super.dispose()}isShown(){return this._element.classList.contains(Zn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){y.on(this._element,Np,t=>this._onInteraction(t,!0)),y.on(this._element,Pp,t=>this._onInteraction(t,!1)),y.on(this._element,Mp,t=>this._onInteraction(t,!0)),y.on(this._element,Dp,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=Di.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Si(Di);vt(Di);document.getElementById("logo").src=Vd;document.getElementById("heading").innerHTML="Tileserver gauss.openstreetmap.de";var jp=document.getElementById("modal"),Sl=pe.getOrCreateInstance(jp);const Yp=new Oa({source:new Td}),Er=new Oa({source:new Ia({attributions:[La],url:"https://tile.openstreetmap.de/{z}/{x}/{y}.png",maxZoom:20})}),Pt=new $u({layers:[Yp,Er],target:"map",view:new It({center:Gc([10.33649,51.006271]),projection:"EPSG:3857",zoom:6,constrainResolution:!0})}),Nl=document.getElementById("swipe");Er.on("prerender",function(i){const t=i.context,e=Pt.getSize(),n=e[0]*(Nl.value/100),s=jn(i,[n,0]),r=jn(i,[e[0],0]),o=jn(i,[n,e[1]]),a=jn(i,e);t.save(),t.beginPath(),t.moveTo(s[0],s[1]),t.lineTo(o[0],o[1]),t.lineTo(a[0],a[1]),t.lineTo(r[0],r[1]),t.closePath(),t.clip()});Er.on("postrender",function(i){i.context.restore()});Nl.addEventListener("input",function(){Pt.render()});function Up(i,t){return Math.floor((i+180)/360*Math.pow(2,t))}function Wp(i,t){return Math.floor((1-Math.log(Math.tan(i*Math.PI/180)+1/Math.cos(i*Math.PI/180))/Math.PI)/2*Math.pow(2,t))}function yr(i,t,e){var n="https://tile.openstreetmap.de/{z}/{x}/{y}.png";let s=Fs(e,"EPSG:3857","EPSG:4326");t=Pt.getView().getZoom();let r=Up(s[0],t),o=Wp(s[1],t);return n=n.replace("{x}",r),n=n.replace("{y}",o),n=n.replace("{z}",t),i!=""&&(n=n+"/"+i),n}var Hp=function(i){document.getElementById("modal-body-id").innerHTML=i,Sl.show(),console.log(i)},Pl=function(i){fetch(i).then(function(t){return t.text()}).then(function(t){Hp(t)})},Xp=function(i){let t=yr("",Pt.getView().getZoom(),i.coordinate);document.getElementById("modal-title-id").innerHTML="Tile Image",document.getElementById("modal-body-id").innerHTML='<img src="'+t+'">',Sl.show()},Zp=function(i){let t=yr("status",Pt.getView().getZoom(),i.coordinate);document.getElementById("modal-title-id").innerHTML="Tile Info",Pl(t)},Bp=function(i){let t=yr("dirty",Pt.getView().getZoom(),i.coordinate);document.getElementById("modal-title-id").innerHTML="Tile aktualisieren",Pl(t)},qp=new kd({width:170,defaultItems:!1,items:[{text:"open tile url",classname:"open_tile_cb",callback:Xp},{text:"open tile info",classname:"open_tile_info_cb",callback:Zp},{text:"add to render queue",classname:"add_to_renderq",callback:Bp}]});Pt.addControl(qp);var Fo=Pt.getView().getZoom();Pt.on("moveend",function(i){var t=Pt.getView().getZoom();Fo!=t&&(console.log("zoom end, new zoom: "+t),Fo=t)});
//# sourceMappingURL=index-27ba66fb.js.map
