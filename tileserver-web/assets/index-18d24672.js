(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();var nt="top",ct="bottom",ht="right",it="left",vi="auto",tn=[nt,ct,ht,it],ge="start",Ye="end",Xo="clippingParents",Ns="viewport",Se="popper",Zo="reference",hs=tn.reduce(function(i,t){return i.concat([t+"-"+ge,t+"-"+Ye])},[]),Ps=[].concat(tn,[vi]).reduce(function(i,t){return i.concat([t,t+"-"+ge,t+"-"+Ye])},[]),Bo="beforeRead",qo="read",Qo="afterRead",Jo="beforeMain",ta="main",ea="afterMain",na="beforeWrite",ia="write",sa="afterWrite",ra=[Bo,qo,Qo,Jo,ta,ea,na,ia,sa];function St(i){return i?(i.nodeName||"").toLowerCase():null}function vt(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var t=i.ownerDocument;return t&&t.defaultView||window}return i}function _e(i){var t=vt(i).Element;return i instanceof t||i instanceof Element}function mt(i){var t=vt(i).HTMLElement;return i instanceof t||i instanceof HTMLElement}function Ms(i){if(typeof ShadowRoot>"u")return!1;var t=vt(i).ShadowRoot;return i instanceof t||i instanceof ShadowRoot}function Ul(i){var t=i.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},s=t.attributes[e]||{},r=t.elements[e];!mt(r)||!St(r)||(Object.assign(r.style,n),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function Yl(i){var t=i.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(n){var s=t.elements[n],r=t.attributes[n]||{},o=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:e[n]),a=o.reduce(function(l,c){return l[c]="",l},{});!mt(s)||!St(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}const Ds={name:"applyStyles",enabled:!0,phase:"write",fn:Ul,effect:Yl,requires:["computeStyles"]};function It(i){return i.split("-")[0]}var fe=Math.max,ni=Math.min,He=Math.round;function us(){var i=navigator.userAgentData;return i!=null&&i.brands?i.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function oa(){return!/^((?!chrome|android).)*safari/i.test(us())}function We(i,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var n=i.getBoundingClientRect(),s=1,r=1;t&&mt(i)&&(s=i.offsetWidth>0&&He(n.width)/i.offsetWidth||1,r=i.offsetHeight>0&&He(n.height)/i.offsetHeight||1);var o=_e(i)?vt(i):window,a=o.visualViewport,l=!oa()&&e,c=(n.left+(l&&a?a.offsetLeft:0))/s,h=(n.top+(l&&a?a.offsetTop:0))/r,u=n.width/s,d=n.height/r;return{width:u,height:d,top:h,right:c+u,bottom:h+d,left:c,x:c,y:h}}function $s(i){var t=We(i),e=i.offsetWidth,n=i.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:i.offsetLeft,y:i.offsetTop,width:e,height:n}}function aa(i,t){var e=t.getRootNode&&t.getRootNode();if(i.contains(t))return!0;if(e&&Ms(e)){var n=t;do{if(n&&i.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Gt(i){return vt(i).getComputedStyle(i)}function Hl(i){return["table","td","th"].indexOf(St(i))>=0}function se(i){return((_e(i)?i.ownerDocument:i.document)||window.document).documentElement}function yi(i){return St(i)==="html"?i:i.assignedSlot||i.parentNode||(Ms(i)?i.host:null)||se(i)}function Lr(i){return!mt(i)||Gt(i).position==="fixed"?null:i.offsetParent}function Wl(i){var t=/firefox/i.test(us()),e=/Trident/i.test(us());if(e&&mt(i)){var n=Gt(i);if(n.position==="fixed")return null}var s=yi(i);for(Ms(s)&&(s=s.host);mt(s)&&["html","body"].indexOf(St(s))<0;){var r=Gt(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function Cn(i){for(var t=vt(i),e=Lr(i);e&&Hl(e)&&Gt(e).position==="static";)e=Lr(e);return e&&(St(e)==="html"||St(e)==="body"&&Gt(e).position==="static")?t:e||Wl(i)||t}function Fs(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function fn(i,t,e){return fe(i,ni(t,e))}function Xl(i,t,e){var n=fn(i,t,e);return n>e?e:n}function la(){return{top:0,right:0,bottom:0,left:0}}function ca(i){return Object.assign({},la(),i)}function ha(i,t){return t.reduce(function(e,n){return e[n]=i,e},{})}var Zl=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,ca(typeof t!="number"?t:ha(t,tn))};function Bl(i){var t,e=i.state,n=i.name,s=i.options,r=e.elements.arrow,o=e.modifiersData.popperOffsets,a=It(e.placement),l=Fs(a),c=[it,ht].indexOf(a)>=0,h=c?"height":"width";if(!(!r||!o)){var u=Zl(s.padding,e),d=$s(r),f=l==="y"?nt:it,g=l==="y"?ct:ht,_=e.rects.reference[h]+e.rects.reference[l]-o[l]-e.rects.popper[h],m=o[l]-e.rects.reference[l],y=Cn(r),E=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,T=_/2-m/2,p=u[f],C=E-d[h]-u[g],b=E/2-d[h]/2+T,A=fn(p,b,C),R=l;e.modifiersData[n]=(t={},t[R]=A,t.centerOffset=A-b,t)}}function ql(i){var t=i.state,e=i.options,n=e.element,s=n===void 0?"[data-popper-arrow]":n;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||aa(t.elements.popper,s)&&(t.elements.arrow=s))}const ua={name:"arrow",enabled:!0,phase:"main",fn:Bl,effect:ql,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xe(i){return i.split("-")[1]}var Ql={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Jl(i){var t=i.x,e=i.y,n=window,s=n.devicePixelRatio||1;return{x:He(t*s)/s||0,y:He(e*s)/s||0}}function Ir(i){var t,e=i.popper,n=i.popperRect,s=i.placement,r=i.variation,o=i.offsets,a=i.position,l=i.gpuAcceleration,c=i.adaptive,h=i.roundOffsets,u=i.isFixed,d=o.x,f=d===void 0?0:d,g=o.y,_=g===void 0?0:g,m=typeof h=="function"?h({x:f,y:_}):{x:f,y:_};f=m.x,_=m.y;var y=o.hasOwnProperty("x"),E=o.hasOwnProperty("y"),T=it,p=nt,C=window;if(c){var b=Cn(e),A="clientHeight",R="clientWidth";if(b===vt(e)&&(b=se(e),Gt(b).position!=="static"&&a==="absolute"&&(A="scrollHeight",R="scrollWidth")),b=b,s===nt||(s===it||s===ht)&&r===Ye){p=ct;var I=u&&b===C&&C.visualViewport?C.visualViewport.height:b[A];_-=I-n.height,_*=l?1:-1}if(s===it||(s===nt||s===ct)&&r===Ye){T=ht;var O=u&&b===C&&C.visualViewport?C.visualViewport.width:b[R];f-=O-n.width,f*=l?1:-1}}var $=Object.assign({position:a},c&&Ql),U=h===!0?Jl({x:f,y:_}):{x:f,y:_};if(f=U.x,_=U.y,l){var k;return Object.assign({},$,(k={},k[p]=E?"0":"",k[T]=y?"0":"",k.transform=(C.devicePixelRatio||1)<=1?"translate("+f+"px, "+_+"px)":"translate3d("+f+"px, "+_+"px, 0)",k))}return Object.assign({},$,(t={},t[p]=E?_+"px":"",t[T]=y?f+"px":"",t.transform="",t))}function tc(i){var t=i.state,e=i.options,n=e.gpuAcceleration,s=n===void 0?!0:n,r=e.adaptive,o=r===void 0?!0:r,a=e.roundOffsets,l=a===void 0?!0:a,c={placement:It(t.placement),variation:Xe(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Ir(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Ir(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const ks={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:tc,data:{}};var Dn={passive:!0};function ec(i){var t=i.state,e=i.instance,n=i.options,s=n.scroll,r=s===void 0?!0:s,o=n.resize,a=o===void 0?!0:o,l=vt(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&c.forEach(function(h){h.addEventListener("scroll",e.update,Dn)}),a&&l.addEventListener("resize",e.update,Dn),function(){r&&c.forEach(function(h){h.removeEventListener("scroll",e.update,Dn)}),a&&l.removeEventListener("resize",e.update,Dn)}}const Vs={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ec,data:{}};var nc={left:"right",right:"left",bottom:"top",top:"bottom"};function qn(i){return i.replace(/left|right|bottom|top/g,function(t){return nc[t]})}var ic={start:"end",end:"start"};function Or(i){return i.replace(/start|end/g,function(t){return ic[t]})}function Ks(i){var t=vt(i),e=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:e,scrollTop:n}}function zs(i){return We(se(i)).left+Ks(i).scrollLeft}function sc(i,t){var e=vt(i),n=se(i),s=e.visualViewport,r=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;var c=oa();(c||!c&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a+zs(i),y:l}}function rc(i){var t,e=se(i),n=Ks(i),s=(t=i.ownerDocument)==null?void 0:t.body,r=fe(e.scrollWidth,e.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=fe(e.scrollHeight,e.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-n.scrollLeft+zs(i),l=-n.scrollTop;return Gt(s||e).direction==="rtl"&&(a+=fe(e.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function Gs(i){var t=Gt(i),e=t.overflow,n=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+s+n)}function da(i){return["html","body","#document"].indexOf(St(i))>=0?i.ownerDocument.body:mt(i)&&Gs(i)?i:da(yi(i))}function gn(i,t){var e;t===void 0&&(t=[]);var n=da(i),s=n===((e=i.ownerDocument)==null?void 0:e.body),r=vt(n),o=s?[r].concat(r.visualViewport||[],Gs(n)?n:[]):n,a=t.concat(o);return s?a:a.concat(gn(yi(o)))}function ds(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function oc(i,t){var e=We(i,!1,t==="fixed");return e.top=e.top+i.clientTop,e.left=e.left+i.clientLeft,e.bottom=e.top+i.clientHeight,e.right=e.left+i.clientWidth,e.width=i.clientWidth,e.height=i.clientHeight,e.x=e.left,e.y=e.top,e}function Sr(i,t,e){return t===Ns?ds(sc(i,e)):_e(t)?oc(t,e):ds(rc(se(i)))}function ac(i){var t=gn(yi(i)),e=["absolute","fixed"].indexOf(Gt(i).position)>=0,n=e&&mt(i)?Cn(i):i;return _e(n)?t.filter(function(s){return _e(s)&&aa(s,n)&&St(s)!=="body"}):[]}function lc(i,t,e,n){var s=t==="clippingParents"?ac(i):[].concat(t),r=[].concat(s,[e]),o=r[0],a=r.reduce(function(l,c){var h=Sr(i,c,n);return l.top=fe(h.top,l.top),l.right=ni(h.right,l.right),l.bottom=ni(h.bottom,l.bottom),l.left=fe(h.left,l.left),l},Sr(i,o,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function fa(i){var t=i.reference,e=i.element,n=i.placement,s=n?It(n):null,r=n?Xe(n):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,l;switch(s){case nt:l={x:o,y:t.y-e.height};break;case ct:l={x:o,y:t.y+t.height};break;case ht:l={x:t.x+t.width,y:a};break;case it:l={x:t.x-e.width,y:a};break;default:l={x:t.x,y:t.y}}var c=s?Fs(s):null;if(c!=null){var h=c==="y"?"height":"width";switch(r){case ge:l[c]=l[c]-(t[h]/2-e[h]/2);break;case Ye:l[c]=l[c]+(t[h]/2-e[h]/2);break}}return l}function Ze(i,t){t===void 0&&(t={});var e=t,n=e.placement,s=n===void 0?i.placement:n,r=e.strategy,o=r===void 0?i.strategy:r,a=e.boundary,l=a===void 0?Xo:a,c=e.rootBoundary,h=c===void 0?Ns:c,u=e.elementContext,d=u===void 0?Se:u,f=e.altBoundary,g=f===void 0?!1:f,_=e.padding,m=_===void 0?0:_,y=ca(typeof m!="number"?m:ha(m,tn)),E=d===Se?Zo:Se,T=i.rects.popper,p=i.elements[g?E:d],C=lc(_e(p)?p:p.contextElement||se(i.elements.popper),l,h,o),b=We(i.elements.reference),A=fa({reference:b,element:T,strategy:"absolute",placement:s}),R=ds(Object.assign({},T,A)),I=d===Se?R:b,O={top:C.top-I.top+y.top,bottom:I.bottom-C.bottom+y.bottom,left:C.left-I.left+y.left,right:I.right-C.right+y.right},$=i.modifiersData.offset;if(d===Se&&$){var U=$[s];Object.keys(O).forEach(function(k){var rt=[ht,ct].indexOf(k)>=0?1:-1,H=[nt,ct].indexOf(k)>=0?"y":"x";O[k]+=U[H]*rt})}return O}function cc(i,t){t===void 0&&(t={});var e=t,n=e.placement,s=e.boundary,r=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,c=l===void 0?Ps:l,h=Xe(n),u=h?a?hs:hs.filter(function(g){return Xe(g)===h}):tn,d=u.filter(function(g){return c.indexOf(g)>=0});d.length===0&&(d=u);var f=d.reduce(function(g,_){return g[_]=Ze(i,{placement:_,boundary:s,rootBoundary:r,padding:o})[It(_)],g},{});return Object.keys(f).sort(function(g,_){return f[g]-f[_]})}function hc(i){if(It(i)===vi)return[];var t=qn(i);return[Or(i),t,Or(t)]}function uc(i){var t=i.state,e=i.options,n=i.name;if(!t.modifiersData[n]._skip){for(var s=e.mainAxis,r=s===void 0?!0:s,o=e.altAxis,a=o===void 0?!0:o,l=e.fallbackPlacements,c=e.padding,h=e.boundary,u=e.rootBoundary,d=e.altBoundary,f=e.flipVariations,g=f===void 0?!0:f,_=e.allowedAutoPlacements,m=t.options.placement,y=It(m),E=y===m,T=l||(E||!g?[qn(m)]:hc(m)),p=[m].concat(T).reduce(function(F,N){return F.concat(It(N)===vi?cc(t,{placement:N,boundary:h,rootBoundary:u,padding:c,flipVariations:g,allowedAutoPlacements:_}):N)},[]),C=t.rects.reference,b=t.rects.popper,A=new Map,R=!0,I=p[0],O=0;O<p.length;O++){var $=p[O],U=It($),k=Xe($)===ge,rt=[nt,ct].indexOf(U)>=0,H=rt?"width":"height",V=Ze(t,{placement:$,boundary:h,rootBoundary:u,altBoundary:d,padding:c}),x=rt?k?ht:it:k?ct:nt;C[H]>b[H]&&(x=qn(x));var W=qn(x),B=[];if(r&&B.push(V[U]<=0),a&&B.push(V[x]<=0,V[W]<=0),B.every(function(F){return F})){I=$,R=!1;break}A.set($,B)}if(R)for(var tt=g?3:1,Tt=function(N){var ut=p.find(function(ot){var K=A.get(ot);if(K)return K.slice(0,N).every(function(Rt){return Rt})});if(ut)return I=ut,"break"},Y=tt;Y>0;Y--){var et=Tt(Y);if(et==="break")break}t.placement!==I&&(t.modifiersData[n]._skip=!0,t.placement=I,t.reset=!0)}}const ga={name:"flip",enabled:!0,phase:"main",fn:uc,requiresIfExists:["offset"],data:{_skip:!1}};function Nr(i,t,e){return e===void 0&&(e={x:0,y:0}),{top:i.top-t.height-e.y,right:i.right-t.width+e.x,bottom:i.bottom-t.height+e.y,left:i.left-t.width-e.x}}function Pr(i){return[nt,ht,ct,it].some(function(t){return i[t]>=0})}function dc(i){var t=i.state,e=i.name,n=t.rects.reference,s=t.rects.popper,r=t.modifiersData.preventOverflow,o=Ze(t,{elementContext:"reference"}),a=Ze(t,{altBoundary:!0}),l=Nr(o,n),c=Nr(a,s,r),h=Pr(l),u=Pr(c);t.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":u})}const _a={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:dc};function fc(i,t,e){var n=It(i),s=[it,nt].indexOf(n)>=0?-1:1,r=typeof e=="function"?e(Object.assign({},t,{placement:i})):e,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[it,ht].indexOf(n)>=0?{x:a,y:o}:{x:o,y:a}}function gc(i){var t=i.state,e=i.options,n=i.name,s=e.offset,r=s===void 0?[0,0]:s,o=Ps.reduce(function(h,u){return h[u]=fc(u,t.rects,r),h},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=o}const pa={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:gc};function _c(i){var t=i.state,e=i.name;t.modifiersData[e]=fa({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const js={name:"popperOffsets",enabled:!0,phase:"read",fn:_c,data:{}};function pc(i){return i==="x"?"y":"x"}function mc(i){var t=i.state,e=i.options,n=i.name,s=e.mainAxis,r=s===void 0?!0:s,o=e.altAxis,a=o===void 0?!1:o,l=e.boundary,c=e.rootBoundary,h=e.altBoundary,u=e.padding,d=e.tether,f=d===void 0?!0:d,g=e.tetherOffset,_=g===void 0?0:g,m=Ze(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:h}),y=It(t.placement),E=Xe(t.placement),T=!E,p=Fs(y),C=pc(p),b=t.modifiersData.popperOffsets,A=t.rects.reference,R=t.rects.popper,I=typeof _=="function"?_(Object.assign({},t.rects,{placement:t.placement})):_,O=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),$=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,U={x:0,y:0};if(b){if(r){var k,rt=p==="y"?nt:it,H=p==="y"?ct:ht,V=p==="y"?"height":"width",x=b[p],W=x+m[rt],B=x-m[H],tt=f?-R[V]/2:0,Tt=E===ge?A[V]:R[V],Y=E===ge?-R[V]:-A[V],et=t.elements.arrow,F=f&&et?$s(et):{width:0,height:0},N=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:la(),ut=N[rt],ot=N[H],K=fn(0,A[V],F[V]),Rt=T?A[V]/2-tt-K-ut-O.mainAxis:Tt-K-ut-O.mainAxis,on=T?-A[V]/2+tt+K+ot+O.mainAxis:Y+K+ot+O.mainAxis,Te=t.elements.arrow&&Cn(t.elements.arrow),Ce=Te?p==="y"?Te.clientTop||0:Te.clientLeft||0:0,Sn=(k=$==null?void 0:$[p])!=null?k:0,Nn=x+Rt-Sn-Ce,ki=x+on-Sn,Pt=fn(f?ni(W,Nn):W,x,f?fe(B,ki):B);b[p]=Pt,U[p]=Pt-x}if(a){var an,Pn=p==="x"?nt:it,Vi=p==="x"?ct:ht,xt=b[C],be=C==="y"?"height":"width",dt=xt+m[Pn],ft=xt-m[Vi],Mt=[nt,it].indexOf(y)!==-1,Yt=(an=$==null?void 0:$[C])!=null?an:0,ln=Mt?dt:xt-A[be]-R[be]-Yt+O.altAxis,cn=Mt?xt+A[be]+R[be]-Yt-O.altAxis:ft,Ae=f&&Mt?Xl(ln,xt,cn):fn(f?ln:dt,xt,f?cn:ft);b[C]=Ae,U[C]=Ae-xt}t.modifiersData[n]=U}}const ma={name:"preventOverflow",enabled:!0,phase:"main",fn:mc,requiresIfExists:["offset"]};function Ec(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function vc(i){return i===vt(i)||!mt(i)?Ks(i):Ec(i)}function yc(i){var t=i.getBoundingClientRect(),e=He(t.width)/i.offsetWidth||1,n=He(t.height)/i.offsetHeight||1;return e!==1||n!==1}function Tc(i,t,e){e===void 0&&(e=!1);var n=mt(t),s=mt(t)&&yc(t),r=se(t),o=We(i,s,e),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!e)&&((St(t)!=="body"||Gs(r))&&(a=vc(t)),mt(t)?(l=We(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=zs(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Cc(i){var t=new Map,e=new Set,n=[];i.forEach(function(r){t.set(r.name,r)});function s(r){e.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var l=t.get(a);l&&s(l)}}),n.push(r)}return i.forEach(function(r){e.has(r.name)||s(r)}),n}function bc(i){var t=Cc(i);return ra.reduce(function(e,n){return e.concat(t.filter(function(s){return s.phase===n}))},[])}function Ac(i){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(i())})})),t}}function wc(i){var t=i.reduce(function(e,n){var s=e[n.name];return e[n.name]=s?Object.assign({},s,n,{options:Object.assign({},s.options,n.options),data:Object.assign({},s.data,n.data)}):n,e},{});return Object.keys(t).map(function(e){return t[e]})}var Mr={placement:"bottom",modifiers:[],strategy:"absolute"};function Dr(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Ti(i){i===void 0&&(i={});var t=i,e=t.defaultModifiers,n=e===void 0?[]:e,s=t.defaultOptions,r=s===void 0?Mr:s;return function(a,l,c){c===void 0&&(c=r);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},Mr,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},u=[],d=!1,f={state:h,setOptions:function(y){var E=typeof y=="function"?y(h.options):y;_(),h.options=Object.assign({},r,h.options,E),h.scrollParents={reference:_e(a)?gn(a):a.contextElement?gn(a.contextElement):[],popper:gn(l)};var T=bc(wc([].concat(n,h.options.modifiers)));return h.orderedModifiers=T.filter(function(p){return p.enabled}),g(),f.update()},forceUpdate:function(){if(!d){var y=h.elements,E=y.reference,T=y.popper;if(Dr(E,T)){h.rects={reference:Tc(E,Cn(T),h.options.strategy==="fixed"),popper:$s(T)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(O){return h.modifiersData[O.name]=Object.assign({},O.data)});for(var p=0;p<h.orderedModifiers.length;p++){if(h.reset===!0){h.reset=!1,p=-1;continue}var C=h.orderedModifiers[p],b=C.fn,A=C.options,R=A===void 0?{}:A,I=C.name;typeof b=="function"&&(h=b({state:h,options:R,name:I,instance:f})||h)}}}},update:Ac(function(){return new Promise(function(m){f.forceUpdate(),m(h)})}),destroy:function(){_(),d=!0}};if(!Dr(a,l))return f;f.setOptions(c).then(function(m){!d&&c.onFirstUpdate&&c.onFirstUpdate(m)});function g(){h.orderedModifiers.forEach(function(m){var y=m.name,E=m.options,T=E===void 0?{}:E,p=m.effect;if(typeof p=="function"){var C=p({state:h,name:y,instance:f,options:T}),b=function(){};u.push(C||b)}})}function _(){u.forEach(function(m){return m()}),u=[]}return f}}var Rc=Ti(),xc=[Vs,js,ks,Ds],Lc=Ti({defaultModifiers:xc}),Ic=[Vs,js,ks,Ds,pa,ga,ma,ua,_a],Us=Ti({defaultModifiers:Ic});const Ea=Object.freeze(Object.defineProperty({__proto__:null,afterMain:ea,afterRead:Qo,afterWrite:sa,applyStyles:Ds,arrow:ua,auto:vi,basePlacements:tn,beforeMain:Jo,beforeRead:Bo,beforeWrite:na,bottom:ct,clippingParents:Xo,computeStyles:ks,createPopper:Us,createPopperBase:Rc,createPopperLite:Lc,detectOverflow:Ze,end:Ye,eventListeners:Vs,flip:ga,hide:_a,left:it,main:ta,modifierPhases:ra,offset:pa,placements:Ps,popper:Se,popperGenerator:Ti,popperOffsets:js,preventOverflow:ma,read:qo,reference:Zo,right:ht,start:ge,top:nt,variationPlacements:hs,viewport:Ns,write:ia},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Oc=1e6,Sc=1e3,fs="transitionend",Nc=i=>i==null?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase(),Pc=i=>{do i+=Math.floor(Math.random()*Oc);while(document.getElementById(i));return i},va=i=>{let t=i.getAttribute("data-bs-target");if(!t||t==="#"){let e=i.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t},ya=i=>{const t=va(i);return t&&document.querySelector(t)?t:null},Vt=i=>{const t=va(i);return t?document.querySelector(t):null},Mc=i=>{if(!i)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(i);const n=Number.parseFloat(t),s=Number.parseFloat(e);return!n&&!s?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*Sc)},Ta=i=>{i.dispatchEvent(new Event(fs))},Kt=i=>!i||typeof i!="object"?!1:(typeof i.jquery<"u"&&(i=i[0]),typeof i.nodeType<"u"),te=i=>Kt(i)?i.jquery?i[0]:i:typeof i=="string"&&i.length>0?document.querySelector(i):null,en=i=>{if(!Kt(i)||i.getClientRects().length===0)return!1;const t=getComputedStyle(i).getPropertyValue("visibility")==="visible",e=i.closest("details:not([open])");if(!e)return t;if(e!==i){const n=i.closest("summary");if(n&&n.parentNode!==e||n===null)return!1}return t},ee=i=>!i||i.nodeType!==Node.ELEMENT_NODE||i.classList.contains("disabled")?!0:typeof i.disabled<"u"?i.disabled:i.hasAttribute("disabled")&&i.getAttribute("disabled")!=="false",Ca=i=>{if(!document.documentElement.attachShadow)return null;if(typeof i.getRootNode=="function"){const t=i.getRootNode();return t instanceof ShadowRoot?t:null}return i instanceof ShadowRoot?i:i.parentNode?Ca(i.parentNode):null},ii=()=>{},bn=i=>{i.offsetHeight},ba=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ki=[],Dc=i=>{document.readyState==="loading"?(Ki.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of Ki)t()}),Ki.push(i)):i()},Et=()=>document.documentElement.dir==="rtl",yt=i=>{Dc(()=>{const t=ba();if(t){const e=i.NAME,n=t.fn[e];t.fn[e]=i.jQueryInterface,t.fn[e].Constructor=i,t.fn[e].noConflict=()=>(t.fn[e]=n,i.jQueryInterface)}})},$t=i=>{typeof i=="function"&&i()},Aa=(i,t,e=!0)=>{if(!e){$t(i);return}const n=5,s=Mc(t)+n;let r=!1;const o=({target:a})=>{a===t&&(r=!0,t.removeEventListener(fs,o),$t(i))};t.addEventListener(fs,o),setTimeout(()=>{r||Ta(t)},s)},Ys=(i,t,e,n)=>{const s=i.length;let r=i.indexOf(t);return r===-1?!e&&n?i[s-1]:i[0]:(r+=e?1:-1,n&&(r=(r+s)%s),i[Math.max(0,Math.min(r,s-1))])},$c=/[^.]*(?=\..*)\.|.*/,Fc=/\..*/,kc=/::\d+$/,zi={};let $r=1;const wa={mouseenter:"mouseover",mouseleave:"mouseout"},Vc=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Ra(i,t){return t&&`${t}::${$r++}`||i.uidEvent||$r++}function xa(i){const t=Ra(i);return i.uidEvent=t,zi[t]=zi[t]||{},zi[t]}function Kc(i,t){return function e(n){return Hs(n,{delegateTarget:i}),e.oneOff&&v.off(i,n.type,t),t.apply(i,[n])}}function zc(i,t,e){return function n(s){const r=i.querySelectorAll(t);for(let{target:o}=s;o&&o!==this;o=o.parentNode)for(const a of r)if(a===o)return Hs(s,{delegateTarget:o}),n.oneOff&&v.off(i,s.type,t,e),e.apply(o,[s])}}function La(i,t,e=null){return Object.values(i).find(n=>n.callable===t&&n.delegationSelector===e)}function Ia(i,t,e){const n=typeof t=="string",s=n?e:t||e;let r=Oa(i);return Vc.has(r)||(r=i),[n,s,r]}function Fr(i,t,e,n,s){if(typeof t!="string"||!i)return;let[r,o,a]=Ia(t,e,n);t in wa&&(o=(g=>function(_){if(!_.relatedTarget||_.relatedTarget!==_.delegateTarget&&!_.delegateTarget.contains(_.relatedTarget))return g.call(this,_)})(o));const l=xa(i),c=l[a]||(l[a]={}),h=La(c,o,r?e:null);if(h){h.oneOff=h.oneOff&&s;return}const u=Ra(o,t.replace($c,"")),d=r?zc(i,e,o):Kc(i,o);d.delegationSelector=r?e:null,d.callable=o,d.oneOff=s,d.uidEvent=u,c[u]=d,i.addEventListener(a,d,r)}function gs(i,t,e,n,s){const r=La(t[e],n,s);r&&(i.removeEventListener(e,r,!!s),delete t[e][r.uidEvent])}function Gc(i,t,e,n){const s=t[e]||{};for(const r of Object.keys(s))if(r.includes(n)){const o=s[r];gs(i,t,e,o.callable,o.delegationSelector)}}function Oa(i){return i=i.replace(Fc,""),wa[i]||i}const v={on(i,t,e,n){Fr(i,t,e,n,!1)},one(i,t,e,n){Fr(i,t,e,n,!0)},off(i,t,e,n){if(typeof t!="string"||!i)return;const[s,r,o]=Ia(t,e,n),a=o!==t,l=xa(i),c=l[o]||{},h=t.startsWith(".");if(typeof r<"u"){if(!Object.keys(c).length)return;gs(i,l,o,r,s?e:null);return}if(h)for(const u of Object.keys(l))Gc(i,l,u,t.slice(1));for(const u of Object.keys(c)){const d=u.replace(kc,"");if(!a||t.includes(d)){const f=c[u];gs(i,l,o,f.callable,f.delegationSelector)}}},trigger(i,t,e){if(typeof t!="string"||!i)return null;const n=ba(),s=Oa(t),r=t!==s;let o=null,a=!0,l=!0,c=!1;r&&n&&(o=n.Event(t,e),n(i).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),c=o.isDefaultPrevented());let h=new Event(t,{bubbles:a,cancelable:!0});return h=Hs(h,e),c&&h.preventDefault(),l&&i.dispatchEvent(h),h.defaultPrevented&&o&&o.preventDefault(),h}};function Hs(i,t){for(const[e,n]of Object.entries(t||{}))try{i[e]=n}catch{Object.defineProperty(i,e,{configurable:!0,get(){return n}})}return i}const Ht=new Map,Gi={set(i,t,e){Ht.has(i)||Ht.set(i,new Map);const n=Ht.get(i);if(!n.has(t)&&n.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`);return}n.set(t,e)},get(i,t){return Ht.has(i)&&Ht.get(i).get(t)||null},remove(i,t){if(!Ht.has(i))return;const e=Ht.get(i);e.delete(t),e.size===0&&Ht.delete(i)}};function kr(i){if(i==="true")return!0;if(i==="false")return!1;if(i===Number(i).toString())return Number(i);if(i===""||i==="null")return null;if(typeof i!="string")return i;try{return JSON.parse(decodeURIComponent(i))}catch{return i}}function ji(i){return i.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const zt={setDataAttribute(i,t,e){i.setAttribute(`data-bs-${ji(t)}`,e)},removeDataAttribute(i,t){i.removeAttribute(`data-bs-${ji(t)}`)},getDataAttributes(i){if(!i)return{};const t={},e=Object.keys(i.dataset).filter(n=>n.startsWith("bs")&&!n.startsWith("bsConfig"));for(const n of e){let s=n.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1,s.length),t[s]=kr(i.dataset[n])}return t},getDataAttribute(i,t){return kr(i.getAttribute(`data-bs-${ji(t)}`))}};class An{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=Kt(e)?zt.getDataAttribute(e,"config"):{};return{...this.constructor.Default,...typeof n=="object"?n:{},...Kt(e)?zt.getDataAttributes(e):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const n of Object.keys(e)){const s=e[n],r=t[n],o=Kt(r)?"element":Nc(r);if(!new RegExp(s).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${o}" but expected type "${s}".`)}}}const jc="5.2.3";class At extends An{constructor(t,e){super(),t=te(t),t&&(this._element=t,this._config=this._getConfig(e),Gi.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Gi.remove(this._element,this.constructor.DATA_KEY),v.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){Aa(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Gi.get(te(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return jc}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const Ci=(i,t="hide")=>{const e=`click.dismiss${i.EVENT_KEY}`,n=i.NAME;v.on(document,e,`[data-bs-dismiss="${n}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),ee(this))return;const r=Vt(this)||this.closest(`.${n}`);i.getOrCreateInstance(r)[t]()})},Uc="alert",Yc="bs.alert",Sa=`.${Yc}`,Hc=`close${Sa}`,Wc=`closed${Sa}`,Xc="fade",Zc="show";class bi extends At{static get NAME(){return Uc}close(){if(v.trigger(this._element,Hc).defaultPrevented)return;this._element.classList.remove(Zc);const e=this._element.classList.contains(Xc);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),v.trigger(this._element,Wc),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=bi.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Ci(bi,"close");yt(bi);const Bc="button",qc="bs.button",Qc=`.${qc}`,Jc=".data-api",th="active",Vr='[data-bs-toggle="button"]',eh=`click${Qc}${Jc}`;class Ai extends At{static get NAME(){return Bc}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(th))}static jQueryInterface(t){return this.each(function(){const e=Ai.getOrCreateInstance(this);t==="toggle"&&e[t]()})}}v.on(document,eh,Vr,i=>{i.preventDefault();const t=i.target.closest(Vr);Ai.getOrCreateInstance(t).toggle()});yt(Ai);const L={find(i,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,i))},findOne(i,t=document.documentElement){return Element.prototype.querySelector.call(t,i)},children(i,t){return[].concat(...i.children).filter(e=>e.matches(t))},parents(i,t){const e=[];let n=i.parentNode.closest(t);for(;n;)e.push(n),n=n.parentNode.closest(t);return e},prev(i,t){let e=i.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(i,t){let e=i.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(i){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,i).filter(e=>!ee(e)&&en(e))}},nh="swipe",nn=".bs.swipe",ih=`touchstart${nn}`,sh=`touchmove${nn}`,rh=`touchend${nn}`,oh=`pointerdown${nn}`,ah=`pointerup${nn}`,lh="touch",ch="pen",hh="pointer-event",uh=40,dh={endCallback:null,leftCallback:null,rightCallback:null},fh={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class si extends An{constructor(t,e){super(),this._element=t,!(!t||!si.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return dh}static get DefaultType(){return fh}static get NAME(){return nh}dispose(){v.off(this._element,nn)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),$t(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=uh)return;const e=t/this._deltaX;this._deltaX=0,e&&$t(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(v.on(this._element,oh,t=>this._start(t)),v.on(this._element,ah,t=>this._end(t)),this._element.classList.add(hh)):(v.on(this._element,ih,t=>this._start(t)),v.on(this._element,sh,t=>this._move(t)),v.on(this._element,rh,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===ch||t.pointerType===lh)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const gh="carousel",_h="bs.carousel",re=`.${_h}`,Na=".data-api",ph="ArrowLeft",mh="ArrowRight",Eh=500,hn="next",we="prev",Ne="left",Qn="right",vh=`slide${re}`,Ui=`slid${re}`,yh=`keydown${re}`,Th=`mouseenter${re}`,Ch=`mouseleave${re}`,bh=`dragstart${re}`,Ah=`load${re}${Na}`,wh=`click${re}${Na}`,Pa="carousel",$n="active",Rh="slide",xh="carousel-item-end",Lh="carousel-item-start",Ih="carousel-item-next",Oh="carousel-item-prev",Ma=".active",Da=".carousel-item",Sh=Ma+Da,Nh=".carousel-item img",Ph=".carousel-indicators",Mh="[data-bs-slide], [data-bs-slide-to]",Dh='[data-bs-ride="carousel"]',$h={[ph]:Qn,[mh]:Ne},Fh={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},kh={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class wn extends At{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=L.findOne(Ph,this._element),this._addEventListeners(),this._config.ride===Pa&&this.cycle()}static get Default(){return Fh}static get DefaultType(){return kh}static get NAME(){return gh}next(){this._slide(hn)}nextWhenVisible(){!document.hidden&&en(this._element)&&this.next()}prev(){this._slide(we)}pause(){this._isSliding&&Ta(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){v.one(this._element,Ui,()=>this.cycle());return}this.cycle()}}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){v.one(this._element,Ui,()=>this.to(t));return}const n=this._getItemIndex(this._getActive());if(n===t)return;const s=t>n?hn:we;this._slide(s,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&v.on(this._element,yh,t=>this._keydown(t)),this._config.pause==="hover"&&(v.on(this._element,Th,()=>this.pause()),v.on(this._element,Ch,()=>this._maybeEnableCycle())),this._config.touch&&si.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of L.find(Nh,this._element))v.on(n,bh,s=>s.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(Ne)),rightCallback:()=>this._slide(this._directionToOrder(Qn)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Eh+this._config.interval))}};this._swipeHelper=new si(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=$h[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=L.findOne(Ma,this._indicatorsElement);e.classList.remove($n),e.removeAttribute("aria-current");const n=L.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add($n),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const n=this._getActive(),s=t===hn,r=e||Ys(this._getItems(),n,s,this._config.wrap);if(r===n)return;const o=this._getItemIndex(r),a=f=>v.trigger(this._element,f,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:o});if(a(vh).defaultPrevented||!n||!r)return;const c=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const h=s?Lh:xh,u=s?Ih:Oh;r.classList.add(u),bn(r),n.classList.add(h),r.classList.add(h);const d=()=>{r.classList.remove(h,u),r.classList.add($n),n.classList.remove($n,u,h),this._isSliding=!1,a(Ui)};this._queueCallback(d,n,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains(Rh)}_getActive(){return L.findOne(Sh,this._element)}_getItems(){return L.find(Da,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return Et()?t===Ne?we:hn:t===Ne?hn:we}_orderToDirection(t){return Et()?t===we?Ne:Qn:t===we?Qn:Ne}static jQueryInterface(t){return this.each(function(){const e=wn.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}v.on(document,wh,Mh,function(i){const t=Vt(this);if(!t||!t.classList.contains(Pa))return;i.preventDefault();const e=wn.getOrCreateInstance(t),n=this.getAttribute("data-bs-slide-to");if(n){e.to(n),e._maybeEnableCycle();return}if(zt.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()});v.on(window,Ah,()=>{const i=L.find(Dh);for(const t of i)wn.getOrCreateInstance(t)});yt(wn);const Vh="collapse",Kh="bs.collapse",Rn=`.${Kh}`,zh=".data-api",Gh=`show${Rn}`,jh=`shown${Rn}`,Uh=`hide${Rn}`,Yh=`hidden${Rn}`,Hh=`click${Rn}${zh}`,Yi="show",Fe="collapse",Fn="collapsing",Wh="collapsed",Xh=`:scope .${Fe} .${Fe}`,Zh="collapse-horizontal",Bh="width",qh="height",Qh=".collapse.show, .collapse.collapsing",_s='[data-bs-toggle="collapse"]',Jh={parent:null,toggle:!0},tu={parent:"(null|element)",toggle:"boolean"};class pn extends At{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=L.find(_s);for(const s of n){const r=ya(s),o=L.find(r).filter(a=>a===this._element);r!==null&&o.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Jh}static get DefaultType(){return tu}static get NAME(){return Vh}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(Qh).filter(a=>a!==this._element).map(a=>pn.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||v.trigger(this._element,Gh).defaultPrevented)return;for(const a of t)a.hide();const n=this._getDimension();this._element.classList.remove(Fe),this._element.classList.add(Fn),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(Fn),this._element.classList.add(Fe,Yi),this._element.style[n]="",v.trigger(this._element,jh)},o=`scroll${n[0].toUpperCase()+n.slice(1)}`;this._queueCallback(s,this._element,!0),this._element.style[n]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||v.trigger(this._element,Uh).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,bn(this._element),this._element.classList.add(Fn),this._element.classList.remove(Fe,Yi);for(const s of this._triggerArray){const r=Vt(s);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([s],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(Fn),this._element.classList.add(Fe),v.trigger(this._element,Yh)};this._element.style[e]="",this._queueCallback(n,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Yi)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=te(t.parent),t}_getDimension(){return this._element.classList.contains(Zh)?Bh:qh}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(_s);for(const e of t){const n=Vt(e);n&&this._addAriaAndCollapsedClass([e],this._isShown(n))}}_getFirstLevelChildren(t){const e=L.find(Xh,this._config.parent);return L.find(t,this._config.parent).filter(n=>!e.includes(n))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle(Wh,!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const n=pn.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}v.on(document,Hh,_s,function(i){(i.target.tagName==="A"||i.delegateTarget&&i.delegateTarget.tagName==="A")&&i.preventDefault();const t=ya(this),e=L.find(t);for(const n of e)pn.getOrCreateInstance(n,{toggle:!1}).toggle()});yt(pn);const Kr="dropdown",eu="bs.dropdown",me=`.${eu}`,Ws=".data-api",nu="Escape",zr="Tab",iu="ArrowUp",Gr="ArrowDown",su=2,ru=`hide${me}`,ou=`hidden${me}`,au=`show${me}`,lu=`shown${me}`,$a=`click${me}${Ws}`,Fa=`keydown${me}${Ws}`,cu=`keyup${me}${Ws}`,Pe="show",hu="dropup",uu="dropend",du="dropstart",fu="dropup-center",gu="dropdown-center",he='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',_u=`${he}.${Pe}`,Jn=".dropdown-menu",pu=".navbar",mu=".navbar-nav",Eu=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",vu=Et()?"top-end":"top-start",yu=Et()?"top-start":"top-end",Tu=Et()?"bottom-end":"bottom-start",Cu=Et()?"bottom-start":"bottom-end",bu=Et()?"left-start":"right-start",Au=Et()?"right-start":"left-start",wu="top",Ru="bottom",xu={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Lu={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ot extends At{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=L.next(this._element,Jn)[0]||L.prev(this._element,Jn)[0]||L.findOne(Jn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return xu}static get DefaultType(){return Lu}static get NAME(){return Kr}toggle(){return this._isShown()?this.hide():this.show()}show(){if(ee(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!v.trigger(this._element,au,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(mu))for(const n of[].concat(...document.body.children))v.on(n,"mouseover",ii);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Pe),this._element.classList.add(Pe),v.trigger(this._element,lu,t)}}hide(){if(ee(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!v.trigger(this._element,ru,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const n of[].concat(...document.body.children))v.off(n,"mouseover",ii);this._popper&&this._popper.destroy(),this._menu.classList.remove(Pe),this._element.classList.remove(Pe),this._element.setAttribute("aria-expanded","false"),zt.removeDataAttribute(this._menu,"popper"),v.trigger(this._element,ou,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!Kt(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${Kr.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof Ea>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:Kt(this._config.reference)?t=te(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=Us(t,this._menu,e)}_isShown(){return this._menu.classList.contains(Pe)}_getPlacement(){const t=this._parent;if(t.classList.contains(uu))return bu;if(t.classList.contains(du))return Au;if(t.classList.contains(fu))return wu;if(t.classList.contains(gu))return Ru;const e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(hu)?e?yu:vu:e?Cu:Tu}_detectNavbar(){return this._element.closest(pu)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(zt.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...typeof this._config.popperConfig=="function"?this._config.popperConfig(t):this._config.popperConfig}}_selectMenuItem({key:t,target:e}){const n=L.find(Eu,this._menu).filter(s=>en(s));n.length&&Ys(n,e,t===Gr,!n.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=Ot.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===su||t.type==="keyup"&&t.key!==zr)return;const e=L.find(_u);for(const n of e){const s=Ot.getInstance(n);if(!s||s._config.autoClose===!1)continue;const r=t.composedPath(),o=r.includes(s._menu);if(r.includes(s._element)||s._config.autoClose==="inside"&&!o||s._config.autoClose==="outside"&&o||s._menu.contains(t.target)&&(t.type==="keyup"&&t.key===zr||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const a={relatedTarget:s._element};t.type==="click"&&(a.clickEvent=t),s._completeHide(a)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n=t.key===nu,s=[iu,Gr].includes(t.key);if(!s&&!n||e&&!n)return;t.preventDefault();const r=this.matches(he)?this:L.prev(this,he)[0]||L.next(this,he)[0]||L.findOne(he,t.delegateTarget.parentNode),o=Ot.getOrCreateInstance(r);if(s){t.stopPropagation(),o.show(),o._selectMenuItem(t);return}o._isShown()&&(t.stopPropagation(),o.hide(),r.focus())}}v.on(document,Fa,he,Ot.dataApiKeydownHandler);v.on(document,Fa,Jn,Ot.dataApiKeydownHandler);v.on(document,$a,Ot.clearMenus);v.on(document,cu,Ot.clearMenus);v.on(document,$a,he,function(i){i.preventDefault(),Ot.getOrCreateInstance(this).toggle()});yt(Ot);const jr=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ur=".sticky-top",kn="padding-right",Yr="margin-right";class ps{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,kn,e=>e+t),this._setElementAttributes(jr,kn,e=>e+t),this._setElementAttributes(Ur,Yr,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,kn),this._resetElementAttributes(jr,kn),this._resetElementAttributes(Ur,Yr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const s=this.getWidth(),r=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+s)return;this._saveInitialAttribute(o,e);const a=window.getComputedStyle(o).getPropertyValue(e);o.style.setProperty(e,`${n(Number.parseFloat(a))}px`)};this._applyManipulationCallback(t,r)}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&zt.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){const n=s=>{const r=zt.getDataAttribute(s,e);if(r===null){s.style.removeProperty(e);return}zt.removeDataAttribute(s,e),s.style.setProperty(e,r)};this._applyManipulationCallback(t,n)}_applyManipulationCallback(t,e){if(Kt(t)){e(t);return}for(const n of L.find(t,this._element))e(n)}}const ka="backdrop",Iu="fade",Hr="show",Wr=`mousedown.bs.${ka}`,Ou={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Su={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Va extends An{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Ou}static get DefaultType(){return Su}static get NAME(){return ka}show(t){if(!this._config.isVisible){$t(t);return}this._append();const e=this._getElement();this._config.isAnimated&&bn(e),e.classList.add(Hr),this._emulateAnimation(()=>{$t(t)})}hide(t){if(!this._config.isVisible){$t(t);return}this._getElement().classList.remove(Hr),this._emulateAnimation(()=>{this.dispose(),$t(t)})}dispose(){this._isAppended&&(v.off(this._element,Wr),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(Iu),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=te(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),v.on(t,Wr,()=>{$t(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){Aa(t,this._getElement(),this._config.isAnimated)}}const Nu="focustrap",Pu="bs.focustrap",ri=`.${Pu}`,Mu=`focusin${ri}`,Du=`keydown.tab${ri}`,$u="Tab",Fu="forward",Xr="backward",ku={autofocus:!0,trapElement:null},Vu={autofocus:"boolean",trapElement:"element"};class Ka extends An{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ku}static get DefaultType(){return Vu}static get NAME(){return Nu}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),v.off(document,ri),v.on(document,Mu,t=>this._handleFocusin(t)),v.on(document,Du,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,v.off(document,ri))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=L.focusableChildren(e);n.length===0?e.focus():this._lastTabNavDirection===Xr?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){t.key===$u&&(this._lastTabNavDirection=t.shiftKey?Xr:Fu)}}const Ku="modal",zu="bs.modal",wt=`.${zu}`,Gu=".data-api",ju="Escape",Uu=`hide${wt}`,Yu=`hidePrevented${wt}`,za=`hidden${wt}`,Ga=`show${wt}`,Hu=`shown${wt}`,Wu=`resize${wt}`,Xu=`click.dismiss${wt}`,Zu=`mousedown.dismiss${wt}`,Bu=`keydown.dismiss${wt}`,qu=`click${wt}${Gu}`,Zr="modal-open",Qu="fade",Br="show",Hi="modal-static",Ju=".modal.show",td=".modal-dialog",ed=".modal-body",nd='[data-bs-toggle="modal"]',id={backdrop:!0,focus:!0,keyboard:!0},sd={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class pe extends At{constructor(t,e){super(t,e),this._dialog=L.findOne(td,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ps,this._addEventListeners()}static get Default(){return id}static get DefaultType(){return sd}static get NAME(){return Ku}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||v.trigger(this._element,Ga,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Zr),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||v.trigger(this._element,Uu).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Br),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const t of[window,this._dialog])v.off(t,wt);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Va({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ka({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=L.findOne(ed,this._dialog);e&&(e.scrollTop=0),bn(this._element),this._element.classList.add(Br);const n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,v.trigger(this._element,Hu,{relatedTarget:t})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){v.on(this._element,Bu,t=>{if(t.key===ju){if(this._config.keyboard){t.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),v.on(window,Wu,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),v.on(this._element,Zu,t=>{v.one(this._element,Xu,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Zr),this._resetAdjustments(),this._scrollBar.reset(),v.trigger(this._element,za)})}_isAnimated(){return this._element.classList.contains(Qu)}_triggerBackdropTransition(){if(v.trigger(this._element,Yu).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;n==="hidden"||this._element.classList.contains(Hi)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Hi),this._queueCallback(()=>{this._element.classList.remove(Hi),this._queueCallback(()=>{this._element.style.overflowY=n},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const s=Et()?"paddingLeft":"paddingRight";this._element.style[s]=`${e}px`}if(!n&&t){const s=Et()?"paddingRight":"paddingLeft";this._element.style[s]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const n=pe.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](e)}})}}v.on(document,qu,nd,function(i){const t=Vt(this);["A","AREA"].includes(this.tagName)&&i.preventDefault(),v.one(t,Ga,s=>{s.defaultPrevented||v.one(t,za,()=>{en(this)&&this.focus()})});const e=L.findOne(Ju);e&&pe.getInstance(e).hide(),pe.getOrCreateInstance(t).toggle(this)});Ci(pe);yt(pe);const rd="offcanvas",od="bs.offcanvas",jt=`.${od}`,ja=".data-api",ad=`load${jt}${ja}`,ld="Escape",qr="show",Qr="showing",Jr="hiding",cd="offcanvas-backdrop",Ua=".offcanvas.show",hd=`show${jt}`,ud=`shown${jt}`,dd=`hide${jt}`,to=`hidePrevented${jt}`,Ya=`hidden${jt}`,fd=`resize${jt}`,gd=`click${jt}${ja}`,_d=`keydown.dismiss${jt}`,pd='[data-bs-toggle="offcanvas"]',md={backdrop:!0,keyboard:!0,scroll:!1},Ed={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ne extends At{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return md}static get DefaultType(){return Ed}static get NAME(){return rd}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||v.trigger(this._element,hd,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ps().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Qr);const n=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(qr),this._element.classList.remove(Qr),v.trigger(this._element,ud,{relatedTarget:t})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown||v.trigger(this._element,dd).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Jr),this._backdrop.hide();const e=()=>{this._element.classList.remove(qr,Jr),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ps().reset(),v.trigger(this._element,Ya)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){v.trigger(this._element,to);return}this.hide()},e=!!this._config.backdrop;return new Va({className:cd,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new Ka({trapElement:this._element})}_addEventListeners(){v.on(this._element,_d,t=>{if(t.key===ld){if(!this._config.keyboard){v.trigger(this._element,to);return}this.hide()}})}static jQueryInterface(t){return this.each(function(){const e=ne.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}v.on(document,gd,pd,function(i){const t=Vt(this);if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),ee(this))return;v.one(t,Ya,()=>{en(this)&&this.focus()});const e=L.findOne(Ua);e&&e!==t&&ne.getInstance(e).hide(),ne.getOrCreateInstance(t).toggle(this)});v.on(window,ad,()=>{for(const i of L.find(Ua))ne.getOrCreateInstance(i).show()});v.on(window,fd,()=>{for(const i of L.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(i).position!=="fixed"&&ne.getOrCreateInstance(i).hide()});Ci(ne);yt(ne);const vd=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),yd=/^aria-[\w-]*$/i,Td=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Cd=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,bd=(i,t)=>{const e=i.nodeName.toLowerCase();return t.includes(e)?vd.has(e)?!!(Td.test(i.nodeValue)||Cd.test(i.nodeValue)):!0:t.filter(n=>n instanceof RegExp).some(n=>n.test(e))},Ha={"*":["class","dir","id","lang","role",yd],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function Ad(i,t,e){if(!i.length)return i;if(e&&typeof e=="function")return e(i);const s=new window.DOMParser().parseFromString(i,"text/html"),r=[].concat(...s.body.querySelectorAll("*"));for(const o of r){const a=o.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),c=[].concat(t["*"]||[],t[a]||[]);for(const h of l)bd(h,c)||o.removeAttribute(h.nodeName)}return s.body.innerHTML}const wd="TemplateFactory",Rd={allowList:Ha,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},xd={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Ld={entry:"(string|element|function|null)",selector:"(string|element)"};class Id extends An{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Rd}static get DefaultType(){return xd}static get NAME(){return wd}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[s,r]of Object.entries(this._config.content))this._setContent(t,r,s);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},Ld)}_setContent(t,e,n){const s=L.findOne(n,t);if(s){if(e=this._resolvePossibleFunction(e),!e){s.remove();return}if(Kt(e)){this._putElementInTemplate(te(e),s);return}if(this._config.html){s.innerHTML=this._maybeSanitize(e);return}s.textContent=e}}_maybeSanitize(t){return this._config.sanitize?Ad(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return typeof t=="function"?t(this):t}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}}const Od="tooltip",Sd=new Set(["sanitize","allowList","sanitizeFn"]),Wi="fade",Nd="modal",Vn="show",Pd=".tooltip-inner",eo=`.${Nd}`,no="hide.bs.modal",un="hover",Xi="focus",Md="click",Dd="manual",$d="hide",Fd="hidden",kd="show",Vd="shown",Kd="inserted",zd="click",Gd="focusin",jd="focusout",Ud="mouseenter",Yd="mouseleave",Hd={AUTO:"auto",TOP:"top",RIGHT:Et()?"left":"right",BOTTOM:"bottom",LEFT:Et()?"right":"left"},Wd={allowList:Ha,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Xd={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class sn extends At{constructor(t,e){if(typeof Ea>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Wd}static get DefaultType(){return Xd}static get NAME(){return Od}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),v.off(this._element.closest(eo),no,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=v.trigger(this._element,this.constructor.eventName(kd)),n=(Ca(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!n)return;this._disposePopper();const s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(s),v.trigger(this._element,this.constructor.eventName(Kd))),this._popper=this._createPopper(s),s.classList.add(Vn),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))v.on(a,"mouseover",ii);const o=()=>{v.trigger(this._element,this.constructor.eventName(Vd)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||v.trigger(this._element,this.constructor.eventName($d)).defaultPrevented)return;if(this._getTipElement().classList.remove(Vn),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))v.off(s,"mouseover",ii);this._activeTrigger[Md]=!1,this._activeTrigger[Xi]=!1,this._activeTrigger[un]=!1,this._isHovered=null;const n=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),v.trigger(this._element,this.constructor.eventName(Fd)))};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(Wi,Vn),e.classList.add(`bs-${this.constructor.NAME}-auto`);const n=Pc(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(Wi),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Id({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Pd]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Wi)}_isShown(){return this.tip&&this.tip.classList.contains(Vn)}_createPopper(t){const e=typeof this._config.placement=="function"?this._config.placement.call(this,t,this._element):this._config.placement,n=Hd[e.toUpperCase()];return Us(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return typeof t=="function"?t.call(this._element):t}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:n=>{this._getTipElement().setAttribute("data-popper-placement",n.state.placement)}}]};return{...e,...typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if(e==="click")v.on(this._element,this.constructor.eventName(zd),this._config.selector,n=>{this._initializeOnDelegatedTarget(n).toggle()});else if(e!==Dd){const n=e===un?this.constructor.eventName(Ud):this.constructor.eventName(Gd),s=e===un?this.constructor.eventName(Yd):this.constructor.eventName(jd);v.on(this._element,n,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusin"?Xi:un]=!0,o._enter()}),v.on(this._element,s,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusout"?Xi:un]=o._element.contains(r.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},v.on(this._element.closest(eo),no,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=zt.getDataAttributes(this._element);for(const n of Object.keys(e))Sd.has(n)&&delete e[n];return t={...e,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:te(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const e in this._config)this.constructor.Default[e]!==this._config[e]&&(t[e]=this._config[e]);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=sn.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}yt(sn);const Zd="popover",Bd=".popover-header",qd=".popover-body",Qd={...sn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Jd={...sn.DefaultType,content:"(null|string|element|function)"};class Xs extends sn{static get Default(){return Qd}static get DefaultType(){return Jd}static get NAME(){return Zd}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Bd]:this._getTitle(),[qd]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=Xs.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}yt(Xs);const tf="scrollspy",ef="bs.scrollspy",Zs=`.${ef}`,nf=".data-api",sf=`activate${Zs}`,io=`click${Zs}`,rf=`load${Zs}${nf}`,of="dropdown-item",Re="active",af='[data-bs-spy="scroll"]',Zi="[href]",lf=".nav, .list-group",so=".nav-link",cf=".nav-item",hf=".list-group-item",uf=`${so}, ${cf} > ${so}, ${hf}`,df=".dropdown",ff=".dropdown-toggle",gf={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},_f={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class wi extends At{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return gf}static get DefaultType(){return _f}static get NAME(){return tf}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=te(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(v.off(this._config.target,io),v.on(this._config.target,io,Zi,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,s=e.offsetTop-this._element.offsetTop;if(n.scrollTo){n.scrollTo({top:s,behavior:"smooth"});return}n.scrollTop=s}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){const e=o=>this._targetLinks.get(`#${o.target.id}`),n=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(e(o))},s=(this._rootElement||document.documentElement).scrollTop,r=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&a){if(n(o),!s)return;continue}!r&&!a&&n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=L.find(Zi,this._config.target);for(const e of t){if(!e.hash||ee(e))continue;const n=L.findOne(e.hash,this._element);en(n)&&(this._targetLinks.set(e.hash,e),this._observableSections.set(e.hash,n))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Re),this._activateParents(t),v.trigger(this._element,sf,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(of)){L.findOne(ff,t.closest(df)).classList.add(Re);return}for(const e of L.parents(t,lf))for(const n of L.prev(e,uf))n.classList.add(Re)}_clearActiveClass(t){t.classList.remove(Re);const e=L.find(`${Zi}.${Re}`,t);for(const n of e)n.classList.remove(Re)}static jQueryInterface(t){return this.each(function(){const e=wi.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}v.on(window,rf,()=>{for(const i of L.find(af))wi.getOrCreateInstance(i)});yt(wi);const pf="tab",mf="bs.tab",Ee=`.${mf}`,Ef=`hide${Ee}`,vf=`hidden${Ee}`,yf=`show${Ee}`,Tf=`shown${Ee}`,Cf=`click${Ee}`,bf=`keydown${Ee}`,Af=`load${Ee}`,wf="ArrowLeft",ro="ArrowRight",Rf="ArrowUp",oo="ArrowDown",ue="active",ao="fade",Bi="show",xf="dropdown",Lf=".dropdown-toggle",If=".dropdown-menu",qi=":not(.dropdown-toggle)",Of='.list-group, .nav, [role="tablist"]',Sf=".nav-item, .list-group-item",Nf=`.nav-link${qi}, .list-group-item${qi}, [role="tab"]${qi}`,Wa='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Qi=`${Nf}, ${Wa}`,Pf=`.${ue}[data-bs-toggle="tab"], .${ue}[data-bs-toggle="pill"], .${ue}[data-bs-toggle="list"]`;class Be extends At{constructor(t){super(t),this._parent=this._element.closest(Of),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),v.on(this._element,bf,e=>this._keydown(e)))}static get NAME(){return pf}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?v.trigger(e,Ef,{relatedTarget:t}):null;v.trigger(t,yf,{relatedTarget:e}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(ue),this._activate(Vt(t));const n=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(Bi);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),v.trigger(t,Tf,{relatedTarget:e})};this._queueCallback(n,t,t.classList.contains(ao))}_deactivate(t,e){if(!t)return;t.classList.remove(ue),t.blur(),this._deactivate(Vt(t));const n=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(Bi);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),v.trigger(t,vf,{relatedTarget:e})};this._queueCallback(n,t,t.classList.contains(ao))}_keydown(t){if(![wf,ro,Rf,oo].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=[ro,oo].includes(t.key),n=Ys(this._getChildren().filter(s=>!ee(s)),t.target,e,!0);n&&(n.focus({preventScroll:!0}),Be.getOrCreateInstance(n).show())}_getChildren(){return L.find(Qi,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const n of e)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=Vt(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`#${t.id}`))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains(xf))return;const s=(r,o)=>{const a=L.findOne(r,n);a&&a.classList.toggle(o,e)};s(Lf,ue),s(If,Bi),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(ue)}_getInnerElement(t){return t.matches(Qi)?t:L.findOne(Qi,t)}_getOuterElement(t){return t.closest(Sf)||t}static jQueryInterface(t){return this.each(function(){const e=Be.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}v.on(document,Cf,Wa,function(i){["A","AREA"].includes(this.tagName)&&i.preventDefault(),!ee(this)&&Be.getOrCreateInstance(this).show()});v.on(window,Af,()=>{for(const i of L.find(Pf))Be.getOrCreateInstance(i)});yt(Be);const Mf="toast",Df="bs.toast",oe=`.${Df}`,$f=`mouseover${oe}`,Ff=`mouseout${oe}`,kf=`focusin${oe}`,Vf=`focusout${oe}`,Kf=`hide${oe}`,zf=`hidden${oe}`,Gf=`show${oe}`,jf=`shown${oe}`,Uf="fade",lo="hide",Kn="show",zn="showing",Yf={animation:"boolean",autohide:"boolean",delay:"number"},Hf={animation:!0,autohide:!0,delay:5e3};class Ri extends At{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Hf}static get DefaultType(){return Yf}static get NAME(){return Mf}show(){if(v.trigger(this._element,Gf).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Uf);const e=()=>{this._element.classList.remove(zn),v.trigger(this._element,jf),this._maybeScheduleHide()};this._element.classList.remove(lo),bn(this._element),this._element.classList.add(Kn,zn),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||v.trigger(this._element,Kf).defaultPrevented)return;const e=()=>{this._element.classList.add(lo),this._element.classList.remove(zn,Kn),v.trigger(this._element,zf)};this._element.classList.add(zn),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Kn),super.dispose()}isShown(){return this._element.classList.contains(Kn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){v.on(this._element,$f,t=>this._onInteraction(t,!0)),v.on(this._element,Ff,t=>this._onInteraction(t,!1)),v.on(this._element,kf,t=>this._onInteraction(t,!0)),v.on(this._element,Vf,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=Ri.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Ci(Ri);yt(Ri);const mn={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Wf{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||mn[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Xa=Wf,xn=6378137,ke=Math.PI*xn,Xf=[-ke,-ke,ke,ke],Zf=[-180,-85,180,85],Gn=xn*Math.log(Math.tan(Math.PI/2));class xe extends Xa{constructor(t){super({code:t,units:"m",extent:Xf,global:!0,worldExtent:Zf,getPointResolution:function(e,n){return e/Math.cosh(n[1]/xn)}})}}const co=[new xe("EPSG:3857"),new xe("EPSG:102100"),new xe("EPSG:102113"),new xe("EPSG:900913"),new xe("http://www.opengis.net/def/crs/EPSG/0/3857"),new xe("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Bf(i,t,e){const n=i.length;e=e>1?e:2,t===void 0&&(e>2?t=i.slice():t=new Array(n));for(let s=0;s<n;s+=e){t[s]=ke*i[s]/180;let r=xn*Math.log(Math.tan(Math.PI*(+i[s+1]+90)/360));r>Gn?r=Gn:r<-Gn&&(r=-Gn),t[s+1]=r}return t}function qf(i,t,e){const n=i.length;e=e>1?e:2,t===void 0&&(e>2?t=i.slice():t=new Array(n));for(let s=0;s<n;s+=e)t[s]=180*i[s]/ke,t[s+1]=360*Math.atan(Math.exp(i[s+1]/xn))/Math.PI-90;return t}const Qf=6378137,ho=[-180,-90,180,90],Jf=Math.PI*Qf/180;class le extends Xa{constructor(t,e){super({code:t,units:"degrees",extent:ho,axisOrientation:e,global:!0,metersPerUnit:Jf,worldExtent:ho})}}const uo=[new le("CRS:84"),new le("EPSG:4326","neu"),new le("urn:ogc:def:crs:OGC:1.3:CRS84"),new le("urn:ogc:def:crs:OGC:2:84"),new le("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new le("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new le("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let ms={};function tg(i){return ms[i]||ms[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function eg(i,t){ms[i]=t}function xi(i){for(const t in i)delete i[t]}function ng(i){let t;for(t in i)return!1;return!t}let Ke={};function oi(i,t,e){const n=i.getCode(),s=t.getCode();n in Ke||(Ke[n]={}),Ke[n][s]=e}function ig(i,t){let e;return i in Ke&&t in Ke[i]&&(e=Ke[i][t]),e}const q={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16},sg={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class rg extends Error{constructor(t){const e=sg[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}const Za=rg;function D(i,t){if(!i)throw new Za(t)}function fo(i){const t=ve();for(let e=0,n=i.length;e<n;++e)ti(t,i[e]);return t}function og(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i.slice()}function Ba(i,t,e){let n,s;return t<i[0]?n=i[0]-t:i[2]<t?n=t-i[2]:n=0,e<i[1]?s=i[1]-e:i[3]<e?s=e-i[3]:s=0,n*n+s*s}function Bs(i,t){return qa(i,t[0],t[1])}function ag(i,t){return i[0]<=t[0]&&t[2]<=i[2]&&i[1]<=t[1]&&t[3]<=i[3]}function qa(i,t,e){return i[0]<=t&&t<=i[2]&&i[1]<=e&&e<=i[3]}function go(i,t){const e=i[0],n=i[1],s=i[2],r=i[3],o=t[0],a=t[1];let l=q.UNKNOWN;return o<e?l=l|q.LEFT:o>s&&(l=l|q.RIGHT),a<n?l=l|q.BELOW:a>r&&(l=l|q.ABOVE),l===q.UNKNOWN&&(l=q.INTERSECTING),l}function ve(){return[1/0,1/0,-1/0,-1/0]}function qe(i,t,e,n,s){return s?(s[0]=i,s[1]=t,s[2]=e,s[3]=n,s):[i,t,e,n]}function Li(i){return qe(1/0,1/0,-1/0,-1/0,i)}function lg(i,t){const e=i[0],n=i[1];return qe(e,n,e,n,t)}function cg(i,t,e,n,s){const r=Li(s);return Qa(r,i,t,e,n)}function Es(i,t){return i[0]==t[0]&&i[2]==t[2]&&i[1]==t[1]&&i[3]==t[3]}function hg(i,t){return t[0]<i[0]&&(i[0]=t[0]),t[2]>i[2]&&(i[2]=t[2]),t[1]<i[1]&&(i[1]=t[1]),t[3]>i[3]&&(i[3]=t[3]),i}function ti(i,t){t[0]<i[0]&&(i[0]=t[0]),t[0]>i[2]&&(i[2]=t[0]),t[1]<i[1]&&(i[1]=t[1]),t[1]>i[3]&&(i[3]=t[1])}function Qa(i,t,e,n,s){for(;e<n;e+=s)ug(i,t[e],t[e+1]);return i}function ug(i,t,e){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}function Ja(i,t){let e;return e=t(Ii(i)),e||(e=t(Oi(i)),e)||(e=t(Si(i)),e)||(e=t(ye(i)),e)?e:!1}function vs(i){let t=0;return qs(i)||(t=X(i)*Nt(i)),t}function Ii(i){return[i[0],i[1]]}function Oi(i){return[i[2],i[1]]}function En(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function dg(i,t){let e;return t==="bottom-left"?e=Ii(i):t==="bottom-right"?e=Oi(i):t==="top-left"?e=ye(i):t==="top-right"?e=Si(i):D(!1,13),e}function ys(i,t,e,n,s){const[r,o,a,l,c,h,u,d]=Ts(i,t,e,n);return qe(Math.min(r,a,c,u),Math.min(o,l,h,d),Math.max(r,a,c,u),Math.max(o,l,h,d),s)}function Ts(i,t,e,n){const s=t*n[0]/2,r=t*n[1]/2,o=Math.cos(e),a=Math.sin(e),l=s*o,c=s*a,h=r*o,u=r*a,d=i[0],f=i[1];return[d-l+u,f-c-h,d-l-u,f-c+h,d+l-u,f+c+h,d+l+u,f+c-h,d-l+u,f-c-h]}function Nt(i){return i[3]-i[1]}function _n(i,t,e){const n=e||ve();return Ln(i,t)?(i[0]>t[0]?n[0]=i[0]:n[0]=t[0],i[1]>t[1]?n[1]=i[1]:n[1]=t[1],i[2]<t[2]?n[2]=i[2]:n[2]=t[2],i[3]<t[3]?n[3]=i[3]:n[3]=t[3]):Li(n),n}function ye(i){return[i[0],i[3]]}function Si(i){return[i[2],i[3]]}function X(i){return i[2]-i[0]}function Ln(i,t){return i[0]<=t[2]&&i[2]>=t[0]&&i[1]<=t[3]&&i[3]>=t[1]}function qs(i){return i[2]<i[0]||i[3]<i[1]}function fg(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i}function gg(i,t,e){let n=!1;const s=go(i,t),r=go(i,e);if(s===q.INTERSECTING||r===q.INTERSECTING)n=!0;else{const o=i[0],a=i[1],l=i[2],c=i[3],h=t[0],u=t[1],d=e[0],f=e[1],g=(f-u)/(d-h);let _,m;r&q.ABOVE&&!(s&q.ABOVE)&&(_=d-(f-c)/g,n=_>=o&&_<=l),!n&&r&q.RIGHT&&!(s&q.RIGHT)&&(m=f-(d-l)*g,n=m>=a&&m<=c),!n&&r&q.BELOW&&!(s&q.BELOW)&&(_=d-(f-a)/g,n=_>=o&&_<=l),!n&&r&q.LEFT&&!(s&q.LEFT)&&(m=f-(d-o)*g,n=m>=a&&m<=c)}return n}function Z(i,t,e){return Math.min(Math.max(i,t),e)}function _g(i,t,e,n,s,r){const o=s-e,a=r-n;if(o!==0||a!==0){const l=((i-e)*o+(t-n)*a)/(o*o+a*a);l>1?(e=s,n=r):l>0&&(e+=o*l,n+=a*l)}return ze(i,t,e,n)}function ze(i,t,e,n){const s=e-i,r=n-t;return s*s+r*r}function pg(i){const t=i.length;for(let n=0;n<t;n++){let s=n,r=Math.abs(i[n][n]);for(let a=n+1;a<t;a++){const l=Math.abs(i[a][n]);l>r&&(r=l,s=a)}if(r===0)return null;const o=i[s];i[s]=i[n],i[n]=o;for(let a=n+1;a<t;a++){const l=-i[a][n]/i[n][n];for(let c=n;c<t+1;c++)n==c?i[a][c]=0:i[a][c]+=l*i[n][c]}}const e=new Array(t);for(let n=t-1;n>=0;n--){e[n]=i[n][t]/i[n][n];for(let s=n-1;s>=0;s--)i[s][t]-=i[s][n]*e[n]}return e}function ei(i){return i*Math.PI/180}function Ge(i,t){const e=i%t;return e*t<0?e+t:e}function mg(i,t,e){return i+e*(t-i)}function tl(i,t){const e=Math.pow(10,t);return Math.round(i*e)/e}function jn(i,t){return Math.floor(tl(i,t))}function Un(i,t){return Math.ceil(tl(i,t))}function Eg(i,t){return i[0]+=+t[0],i[1]+=+t[1],i}function ai(i,t){let e=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=t[n]){e=!1;break}return e}function Qs(i,t){const e=Math.cos(t),n=Math.sin(t),s=i[0]*e-i[1]*n,r=i[1]*e+i[0]*n;return i[0]=s,i[1]=r,i}function vg(i,t){return i[0]*=t,i[1]*=t,i}function yg(i,t){if(t.canWrapX()){const e=X(t.getExtent()),n=Tg(i,t,e);n&&(i[0]-=n*e)}return i}function Tg(i,t,e){const n=t.getExtent();let s=0;return t.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(e=e||X(n),s=Math.floor((i[0]-n[0])/e)),s}const Cg=63710088e-1;function _o(i,t,e){e=e||Cg;const n=ei(i[1]),s=ei(t[1]),r=(s-n)/2,o=ei(t[0]-i[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(s);return 2*e*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const el={info:1,warn:2,error:3,none:4};let bg=el.info;function nl(...i){bg>el.warn||console.warn(...i)}let Cs=!0;function il(i){Cs=!(i===void 0?!0:i)}function Js(i,t){if(t!==void 0){for(let e=0,n=i.length;e<n;++e)t[e]=i[e];t=t}else t=i.slice();return t}function sl(i,t){if(t!==void 0&&i!==t){for(let e=0,n=i.length;e<n;++e)t[e]=i[e];i=t}return i}function Ag(i){eg(i.getCode(),i),oi(i,i,Js)}function wg(i){i.forEach(Ag)}function bt(i){return typeof i=="string"?tg(i):i||null}function po(i,t,e,n){i=bt(i);let s;const r=i.getPointResolutionFunc();if(r){if(s=r(t,e),n&&n!==i.getUnits()){const o=i.getMetersPerUnit();o&&(s=s*o/mn[n])}}else{const o=i.getUnits();if(o=="degrees"&&!n||n=="degrees")s=t;else{const a=er(i,bt("EPSG:4326"));if(a===sl&&o!=="degrees")s=t*i.getMetersPerUnit();else{let c=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];c=a(c,c,2);const h=_o(c.slice(0,2),c.slice(2,4)),u=_o(c.slice(4,6),c.slice(6,8));s=(h+u)/2}const l=n?mn[n]:i.getMetersPerUnit();l!==void 0&&(s/=l)}}return s}function mo(i){wg(i),i.forEach(function(t){i.forEach(function(e){t!==e&&oi(t,e,Js)})})}function Rg(i,t,e,n){i.forEach(function(s){t.forEach(function(r){oi(s,r,e),oi(r,s,n)})})}function tr(i,t){if(i){if(typeof i=="string")return bt(i)}else return bt(t);return i}function xg(i,t){return il(),nr(i,"EPSG:4326",t!==void 0?t:"EPSG:3857")}function Me(i,t){if(i===t)return!0;const e=i.getUnits()===t.getUnits();return(i.getCode()===t.getCode()||er(i,t)===Js)&&e}function er(i,t){const e=i.getCode(),n=t.getCode();let s=ig(e,n);return s||(s=sl),s}function li(i,t){const e=bt(i),n=bt(t);return er(e,n)}function nr(i,t,e){return li(t,e)(i,void 0,i.length)}function bs(i,t){return i}function Dt(i,t){return Cs&&!ai(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(Cs=!1,nl("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function Lg(i,t){return i}function Ve(i,t){return i}function Ig(){mo(co),mo(uo),Rg(uo,co,Bf,qf)}Ig();let Og=document.getElementById("modal"),rl=pe.getOrCreateInstance(Og);function ci(i){const t=window.location.search;return new URLSearchParams(t).get(i)}function Sg(i,t){return Math.floor((i+180)/360*Math.pow(2,t))}function Ng(i,t){return Math.floor((1-Math.log(Math.tan(i*Math.PI/180)+1/Math.cos(i*Math.PI/180))/Math.PI)/2*Math.pow(2,t))}function Pg(i){let t=Ji("",sessionStorage.getItem("zoomlevel"),i.coordinate),e=Ji("status",sessionStorage.getItem("zoomlevel"),i.coordinate);document.getElementById("modal-title-id").innerHTML="URL "+sessionStorage.getItem("tileUrl"),document.getElementById("modal-body-id-image").innerHTML='<img src="'+t+'">',ts(e);let n=document.createElement("button");n.classList.add("btn-primary"),n.classList.add("btn"),n.innerHTML="Kachel aktualisieren",n.addEventListener("click",function(){if(n.innerHTML=="Kachel aktualisieren"){n.innerHTML="Kachelinfo anzeigen";let s=Ji("dirty",sessionStorage.getItem("zoomlevel"),i.coordinate);ts(s)}else n.innerHTML="Kachel aktualisieren",ts(e)}),document.getElementById("modal-footer").appendChild(n),rl.show()}function Ji(i,t,e){let n=sessionStorage.getItem("tileUrl"),s=nr(e,"EPSG:3857","EPSG:4326");t=sessionStorage.getItem("zoomlevel");let r=Sg(s[0],t),o=Ng(s[1],t);return n=n.replace("{x}",r),n=n.replace("{y}",o),n=n.replace("{z}",t),i!=""&&(n=n+"/"+i),n}var Mg=function(i,t){document.getElementById("modal-body-id-infotext").innerHTML=t+": "+i,rl.show()},ts=function(i){fetch(i).then(function(t){return t.text()}).then(function(t){Mg(t,i)})};class Dg{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const ae=Dg,vn={PROPERTYCHANGE:"propertychange"};class $g{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const ir=$g;function sr(i,t){return i>t?1:i<t?-1:0}function rr(i,t,e){const n=i.length;if(i[0]<=t)return 0;if(t<=i[n-1])return n-1;let s;if(e>0){for(s=1;s<n;++s)if(i[s]<t)return s-1}else if(e<0){for(s=1;s<n;++s)if(i[s]<=t)return s}else for(s=1;s<n;++s){if(i[s]==t)return s;if(i[s]<t)return typeof e=="function"?e(t,i[s-1],i[s])>0?s-1:s:i[s-1]-t<t-i[s]?s-1:s}return n-1}function Fg(i,t){const e=Array.isArray(t)?t:[t],n=e.length;for(let s=0;s<n;s++)i[i.length]=e[s]}function Ni(i,t){const e=i.length;if(e!==t.length)return!1;for(let n=0;n<e;n++)if(i[n]!==t[n])return!1;return!0}function kg(i,t,e){const n=t||sr;return i.every(function(s,r){if(r===0)return!0;const o=n(i[r-1],s);return!(o>0||e&&o===0)})}function hi(){return!0}function Pi(){return!1}function ui(){}function Vg(i){let t=!1,e,n,s;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==s||!Ni(r,n))&&(t=!0,s=this,n=r,e=i.apply(this,arguments)),e}}class Kg extends ir{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),s=n[t]||(n[t]=[]);s.includes(e)||s.push(e)}dispatchEvent(t){const e=typeof t=="string",n=e?t:t.type,s=this.listeners_&&this.listeners_[n];if(!s)return;const r=e?new ae(t):t;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];let l;for(let c=0,h=s.length;c<h;++c)if("handleEvent"in s[c]?l=s[c].handleEvent(r):l=s[c].call(this,r),l===!1||r.propagationStopped){l=!1;break}if(--o[n]===0){let c=a[n];for(delete a[n];c--;)this.removeEventListener(n,ui);delete o[n]}return l}disposeInternal(){this.listeners_&&xi(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){const n=this.listeners_&&this.listeners_[t];if(n){const s=n.indexOf(e);s!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[s]=ui,++this.pendingRemovals_[t]):(n.splice(s,1),n.length===0&&delete this.listeners_[t]))}}}const or=Kg,S={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function M(i,t,e,n,s){if(n&&n!==i&&(e=e.bind(n)),s){const o=e;e=function(){i.removeEventListener(t,e),o.apply(this,arguments)}}const r={target:i,type:t,listener:e};return i.addEventListener(t,e),r}function di(i,t,e,n){return M(i,t,e,n,!0)}function j(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),xi(i))}class Mi extends or{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(S.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=M(this,t[r],e);return s}return M(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const s=t.length;n=new Array(s);for(let r=0;r<s;++r)n[r]=di(this,t[r],e)}else n=di(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)zg(n);else if(Array.isArray(t))for(let s=0,r=t.length;s<r;++s)this.removeEventListener(t[s],e);else this.removeEventListener(t,e)}}Mi.prototype.on;Mi.prototype.once;Mi.prototype.un;function zg(i){if(Array.isArray(i))for(let t=0,e=i.length;t<e;++t)j(i[t]);else j(i)}const ol=Mi;function G(){throw new Error("Unimplemented abstract method.")}let Gg=0;function st(i){return i.ol_uid||(i.ol_uid=String(++Gg))}class Eo extends ae{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}class jg extends ol{constructor(t){super(),this.on,this.once,this.un,st(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new Eo(n,t,e)),n=vn.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new Eo(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const s=this.values_||(this.values_={});if(n)s[t]=e;else{const r=s[t];s[t]=e,r!==e&&this.notify(t,r)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],ng(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}const Ut=jg,pt={ADD:"add",REMOVE:"remove"},vo={LENGTH:"length"};class Yn extends ae{constructor(t,e,n){super(t),this.element=e,this.index=n}}class Ug extends Ut{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let n=0,s=this.array_.length;n<s;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,s=e.length;n<s;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(vo.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Yn(pt.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,s=e.length;n<s;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Yn(pt.REMOVE,e,t)),e}setAt(t,e){const n=this.getLength();if(t>=n){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const s=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Yn(pt.REMOVE,s,t)),this.dispatchEvent(new Yn(pt.ADD,e,t))}updateLength_(){this.set(vo.LENGTH,this.array_.length)}assertUnique_(t,e){for(let n=0,s=this.array_.length;n<s;++n)if(this.array_[n]===t&&n!==e)throw new Za(58)}}const kt=Ug,ie=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Yg=ie.includes("firefox"),Hg=ie.includes("safari")&&!ie.includes("chrom");Hg&&(ie.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ie));const Wg=ie.includes("webkit")&&!ie.includes("edge"),Xg=ie.includes("macintosh"),al=typeof devicePixelRatio<"u"?devicePixelRatio:1,ll=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Zg=typeof Image<"u"&&Image.prototype.decode,cl=function(){let i=!1;try{const t=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return i}();new Array(6);function je(){return[1,0,0,1,0,0]}function lt(i,t){const e=t[0],n=t[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t}function yn(i,t,e,n,s,r,o,a){const l=Math.sin(r),c=Math.cos(r);return i[0]=n*c,i[1]=s*l,i[2]=-n*l,i[3]=s*c,i[4]=o*n*c-a*n*l+t,i[5]=o*s*l+a*s*c+e,i}function hl(i,t){const e=Bg(t);D(e!==0,32);const n=t[0],s=t[1],r=t[2],o=t[3],a=t[4],l=t[5];return i[0]=o/e,i[1]=-s/e,i[2]=-r/e,i[3]=n/e,i[4]=(r*l-o*a)/e,i[5]=-(n*l-s*a)/e,i}function Bg(i){return i[0]*i[3]-i[1]*i[2]}let yo;function qg(i){const t="matrix("+i.join(", ")+")";if(ll)return t;const e=yo||(yo=document.createElement("div"));return e.style.transform=t,e.style.transform}const Qg=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Jg=/^([a-z]*)$|^hsla?\(.*\)$/i;function t_(i){return typeof i=="string"?i:s_(i)}function e_(i){const t=document.createElement("div");if(t.style.color=i,t.style.color!==""){document.body.appendChild(t);const e=getComputedStyle(t).color;return document.body.removeChild(t),e}return""}const n_=function(){const t={};let e=0;return function(n){let s;if(t.hasOwnProperty(n))s=t[n];else{if(e>=1024){let r=0;for(const o in t)r++&3||(delete t[o],--e)}s=i_(n),t[n]=s,++e}return s}}();function To(i){return Array.isArray(i)?i:n_(i)}function i_(i){let t,e,n,s,r;if(Jg.exec(i)&&(i=e_(i)),Qg.exec(i)){const o=i.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;t=parseInt(i.substr(1+0*a,a),16),e=parseInt(i.substr(1+1*a,a),16),n=parseInt(i.substr(1+2*a,a),16),l?s=parseInt(i.substr(1+3*a,a),16):s=255,a==1&&(t=(t<<4)+t,e=(e<<4)+e,n=(n<<4)+n,l&&(s=(s<<4)+s)),r=[t,e,n,s/255]}else i.startsWith("rgba(")?(r=i.slice(5,-1).split(",").map(Number),Co(r)):i.startsWith("rgb(")?(r=i.slice(4,-1).split(",").map(Number),r.push(1),Co(r)):D(!1,14);return r}function Co(i){return i[0]=Z(i[0]+.5|0,0,255),i[1]=Z(i[1]+.5|0,0,255),i[2]=Z(i[2]+.5|0,0,255),i[3]=Z(i[3],0,1),i}function s_(i){let t=i[0];t!=(t|0)&&(t=t+.5|0);let e=i[1];e!=(e|0)&&(e=e+.5|0);let n=i[2];n!=(n|0)&&(n=n+.5|0);const s=i[3]===void 0?1:Math.round(i[3]*100)/100;return"rgba("+t+","+e+","+n+","+s+")"}class r_{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];!(t++&3)&&!n.hasListener()&&(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,n){const s=bo(t,e,n);return s in this.cache_?this.cache_[s]:null}set(t,e,n,s){const r=bo(t,e,n);this.cache_[r]=s,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function bo(i,t,e){const n=e?t_(e):"null";return t+":"+i+":"+n}const ul=new r_,P={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class o_ extends Ut{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[P.OPACITY]=t.opacity!==void 0?t.opacity:1,D(typeof e[P.OPACITY]=="number",64),e[P.VISIBLE]=t.visible!==void 0?t.visible:!0,e[P.Z_INDEX]=t.zIndex,e[P.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[P.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[P.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[P.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},n=this.getZIndex();return e.opacity=Z(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=n===void 0&&!e.managed?1/0:n,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return G()}getLayerStatesArray(t){return G()}getExtent(){return this.get(P.EXTENT)}getMaxResolution(){return this.get(P.MAX_RESOLUTION)}getMinResolution(){return this.get(P.MIN_RESOLUTION)}getMinZoom(){return this.get(P.MIN_ZOOM)}getMaxZoom(){return this.get(P.MAX_ZOOM)}getOpacity(){return this.get(P.OPACITY)}getSourceState(){return G()}getVisible(){return this.get(P.VISIBLE)}getZIndex(){return this.get(P.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(P.EXTENT,t)}setMaxResolution(t){this.set(P.MAX_RESOLUTION,t)}setMinResolution(t){this.set(P.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(P.MAX_ZOOM,t)}setMinZoom(t){this.set(P.MIN_ZOOM,t)}setOpacity(t){D(typeof t=="number",64),this.set(P.OPACITY,t)}setVisible(t){this.set(P.VISIBLE,t)}setZIndex(t){this.set(P.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const dl=o_,Jt={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},_t={ANIMATING:0,INTERACTING:1},Ct={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},a_=42,ar=256;function Ao(i,t,e){return function(n,s,r,o,a){if(!n)return;if(!s&&!t)return n;const l=t?0:r[0]*s,c=t?0:r[1]*s,h=a?a[0]:0,u=a?a[1]:0;let d=i[0]+l/2+h,f=i[2]-l/2+h,g=i[1]+c/2+u,_=i[3]-c/2+u;d>f&&(d=(f+d)/2,f=d),g>_&&(g=(_+g)/2,_=g);let m=Z(n[0],d,f),y=Z(n[1],g,_);if(o&&e&&s){const E=30*s;m+=-E*Math.log(1+Math.max(0,d-n[0])/E)+E*Math.log(1+Math.max(0,n[0]-f)/E),y+=-E*Math.log(1+Math.max(0,g-n[1])/E)+E*Math.log(1+Math.max(0,n[1]-_)/E)}return[m,y]}}function l_(i){return i}function lr(i,t,e,n){const s=X(t)/e[0],r=Nt(t)/e[1];return n?Math.min(i,Math.max(s,r)):Math.min(i,Math.min(s,r))}function cr(i,t,e){let n=Math.min(i,t);const s=50;return n*=Math.log(1+s*Math.max(0,i/t-1))/s+1,e&&(n=Math.max(n,e),n/=Math.log(1+s*Math.max(0,e/i-1))/s+1),Z(n,e/2,t*2)}function c_(i,t,e,n){return t=t!==void 0?t:!0,function(s,r,o,a){if(s!==void 0){const l=i[0],c=i[i.length-1],h=e?lr(l,e,o,n):l;if(a)return t?cr(s,h,c):Z(s,c,h);const u=Math.min(h,s),d=Math.floor(rr(i,u,r));return i[d]>h&&d<i.length-1?i[d+1]:i[d]}}}function h_(i,t,e,n,s,r){return n=n!==void 0?n:!0,e=e!==void 0?e:0,function(o,a,l,c){if(o!==void 0){const h=s?lr(t,s,l,r):t;if(c)return n?cr(o,h,e):Z(o,e,h);const u=1e-9,d=Math.ceil(Math.log(t/h)/Math.log(i)-u),f=-a*(.5-u)+.5,g=Math.min(h,o),_=Math.floor(Math.log(t/g)/Math.log(i)+f),m=Math.max(d,_),y=t/Math.pow(i,m);return Z(y,e,h)}}}function wo(i,t,e,n,s){return e=e!==void 0?e:!0,function(r,o,a,l){if(r!==void 0){const c=n?lr(i,n,a,s):i;return!e||!l?Z(r,t,c):cr(r,c,t)}}}function hr(i){if(i!==void 0)return 0}function Ro(i){if(i!==void 0)return i}function u_(i){const t=2*Math.PI/i;return function(e,n){if(n)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function d_(i){return i=i||ei(5),function(t,e){if(e)return t;if(t!==void 0)return Math.abs(t)<=i?0:t}}function fl(i){return Math.pow(i,3)}function rn(i){return 1-fl(1-i)}function f_(i){return 3*i*i-2*i*i*i}function g_(i){return i}function __(i,t,e,n,s,r){r=r||[];let o=0;for(let a=t;a<e;a+=n){const l=i[a],c=i[a+1];r[o++]=s[0]*l+s[2]*c+s[4],r[o++]=s[1]*l+s[3]*c+s[5]}return r&&r.length!=o&&(r.length=o),r}function p_(i,t,e,n,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),c=r[0],h=r[1];let u=0;for(let d=t;d<e;d+=n){const f=i[d]-c,g=i[d+1]-h;o[u++]=c+f*a-g*l,o[u++]=h+f*l+g*a;for(let _=d+2;_<d+n;++_)o[u++]=i[_]}return o&&o.length!=u&&(o.length=u),o}function m_(i,t,e,n,s,r,o,a){a=a||[];const l=o[0],c=o[1];let h=0;for(let u=t;u<e;u+=n){const d=i[u]-l,f=i[u+1]-c;a[h++]=l+s*d,a[h++]=c+r*f;for(let g=u+2;g<u+n;++g)a[h++]=i[g]}return a&&a.length!=h&&(a.length=h),a}function E_(i,t,e,n,s,r,o){o=o||[];let a=0;for(let l=t;l<e;l+=n){o[a++]=i[l]+s,o[a++]=i[l+1]+r;for(let c=l+2;c<l+n;++c)o[a++]=i[c]}return o&&o.length!=a&&(o.length=a),o}const xo=je();class v_ extends Ut{constructor(){super(),this.extent_=ve(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Vg(function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);const s=this.clone();return s.applyTransform(n),s.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return G()}closestPointXY(t,e,n,s){return G()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return G()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Li(e),this.extentRevision_=this.getRevision()}return fg(this.extent_,t)}rotate(t,e){G()}scale(t,e,n){G()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return G()}getType(){return G()}applyTransform(t){G()}intersectsExtent(t){return G()}translate(t,e){G()}transform(t,e){const n=bt(t),s=n.getUnits()=="tile-pixels"?function(r,o,a){const l=n.getExtent(),c=n.getWorldExtent(),h=Nt(c)/Nt(l);return yn(xo,c[0],c[3],h,-h,0,0,0),__(r,0,r.length,a,xo,o),li(n,e)(r,o,a)}:li(n,e);return this.applyTransform(s),this}}const y_=v_;class T_ extends y_{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return cg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return G()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Lo(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){G()}setLayout(t,e,n){let s;if(t)s=Lo(t);else{for(let r=0;r<n;++r){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}s=e.length,t=C_(s)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const s=this.getStride();p_(n,0,n.length,s,t,e,n),this.changed()}}scale(t,e,n){e===void 0&&(e=t),n||(n=En(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();m_(s,0,s.length,r,t,e,n,s),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const s=this.getStride();E_(n,0,n.length,s,t,e,n),this.changed()}}}function C_(i){let t;return i==2?t="XY":i==3?t="XYZ":i==4&&(t="XYZM"),t}function Lo(i){let t;return i=="XY"?t=2:i=="XYZ"||i=="XYM"?t=3:i=="XYZM"&&(t=4),t}const ur=T_;function Io(i,t,e,n,s,r,o){const a=i[t],l=i[t+1],c=i[e]-a,h=i[e+1]-l;let u;if(c===0&&h===0)u=t;else{const d=((s-a)*c+(r-l)*h)/(c*c+h*h);if(d>1)u=e;else if(d>0){for(let f=0;f<n;++f)o[f]=mg(i[t+f],i[e+f],d);o.length=n;return}else u=t}for(let d=0;d<n;++d)o[d]=i[u+d];o.length=n}function gl(i,t,e,n,s){let r=i[t],o=i[t+1];for(t+=n;t<e;t+=n){const a=i[t],l=i[t+1],c=ze(r,o,a,l);c>s&&(s=c),r=a,o=l}return s}function b_(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r){const a=e[r];s=gl(i,t,a,n,s),t=a}return s}function _l(i,t,e,n,s,r,o,a,l,c,h){if(t==e)return c;let u,d;if(s===0){if(d=ze(o,a,i[t],i[t+1]),d<c){for(u=0;u<n;++u)l[u]=i[t+u];return l.length=n,d}return c}h=h||[NaN,NaN];let f=t+n;for(;f<e;)if(Io(i,f-n,f,n,o,a,h),d=ze(o,a,h[0],h[1]),d<c){for(c=d,u=0;u<n;++u)l[u]=h[u];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(d)-Math.sqrt(c))/s|0,1);if(r&&(Io(i,e-n,t,n,o,a,h),d=ze(o,a,h[0],h[1]),d<c)){for(c=d,u=0;u<n;++u)l[u]=h[u];l.length=n}return c}function A_(i,t,e,n,s,r,o,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=e.length;u<d;++u){const f=e[u];c=_l(i,t,f,n,s,r,o,a,l,c,h),t=f}return c}function w_(i,t,e,n){for(let s=0,r=e.length;s<r;++s)i[t++]=e[s];return t}function pl(i,t,e,n){for(let s=0,r=e.length;s<r;++s){const o=e[s];for(let a=0;a<n;++a)i[t++]=o[a]}return t}function R_(i,t,e,n,s){s=s||[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=pl(i,t,e[o],n);s[r++]=l,t=l}return s.length=r,s}function x_(i,t,e,n,s,r,o){const a=(e-t)/n;if(a<3){for(;t<e;t+=n)r[o++]=i[t],r[o++]=i[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[t,e-n];let h=0;for(;c.length>0;){const u=c.pop(),d=c.pop();let f=0;const g=i[d],_=i[d+1],m=i[u],y=i[u+1];for(let E=d+n;E<u;E+=n){const T=i[E],p=i[E+1],C=_g(T,p,g,_,m,y);C>f&&(h=E,f=C)}f>s&&(l[(h-t)/n]=1,d+n<h&&c.push(d,h),h+n<u&&c.push(h,u))}for(let u=0;u<a;++u)l[u]&&(r[o++]=i[t+u*n],r[o++]=i[t+u*n+1]);return o}function Le(i,t){return t*Math.round(i/t)}function L_(i,t,e,n,s,r,o){if(t==e)return o;let a=Le(i[t],s),l=Le(i[t+1],s);t+=n,r[o++]=a,r[o++]=l;let c,h;do if(c=Le(i[t],s),h=Le(i[t+1],s),t+=n,t==e)return r[o++]=c,r[o++]=h,o;while(c==a&&h==l);for(;t<e;){const u=Le(i[t],s),d=Le(i[t+1],s);if(t+=n,u==c&&d==h)continue;const f=c-a,g=h-l,_=u-a,m=d-l;if(f*m==g*_&&(f<0&&_<f||f==_||f>0&&_>f)&&(g<0&&m<g||g==m||g>0&&m>g)){c=u,h=d;continue}r[o++]=c,r[o++]=h,a=c,l=h,c=u,h=d}return r[o++]=c,r[o++]=h,o}function I_(i,t,e,n,s,r,o,a){for(let l=0,c=e.length;l<c;++l){const h=e[l];o=L_(i,t,h,n,s,r,o),a.push(o),t=h}return o}function ml(i,t,e,n,s){s=s!==void 0?s:[];let r=0;for(let o=t;o<e;o+=n)s[r++]=i.slice(o,o+n);return s.length=r,s}function O_(i,t,e,n,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=e[o];s[r++]=ml(i,t,l,n,s[r]),t=l}return s.length=r,s}function El(i,t,e,n){let s=0,r=i[e-n],o=i[e-n+1];for(;t<e;t+=n){const a=i[t],l=i[t+1];s+=o*a-r*l,r=a,o=l}return s/2}function S_(i,t,e,n){let s=0;for(let r=0,o=e.length;r<o;++r){const a=e[r];s+=El(i,t,a,n),t=a}return s}class fi extends ur{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new fi(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,s){return s<Ba(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(gl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_l(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,s))}getArea(){return El(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return ml(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=x_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new fi(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=pl(this.flatCoordinates,0,t,this.stride),this.changed()}}const Oo=fi;class dr extends ur{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new dr(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,s){const r=this.flatCoordinates,o=ze(t,e,r[0],r[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)n[l]=r[l];return n.length=a,o}return s}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return lg(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return qa(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=w_(this.flatCoordinates,0,t,this.stride),this.changed()}}const N_=dr;function P_(i,t,e,n,s){return!Ja(s,function(o){return!de(i,t,e,n,o[0],o[1])})}function de(i,t,e,n,s,r){let o=0,a=i[e-n],l=i[e-n+1];for(;t<e;t+=n){const c=i[t],h=i[t+1];l<=r?h>r&&(c-a)*(r-l)-(s-a)*(h-l)>0&&o++:h<=r&&(c-a)*(r-l)-(s-a)*(h-l)<0&&o--,a=c,l=h}return o!==0}function vl(i,t,e,n,s,r){if(e.length===0||!de(i,t,e[0],n,s,r))return!1;for(let o=1,a=e.length;o<a;++o)if(de(i,e[o-1],e[o],n,s,r))return!1;return!0}function M_(i,t,e,n,s,r,o){let a,l,c,h,u,d,f;const g=s[r+1],_=[];for(let E=0,T=e.length;E<T;++E){const p=e[E];for(h=i[p-n],d=i[p-n+1],a=t;a<p;a+=n)u=i[a],f=i[a+1],(g<=d&&f<=g||d<=g&&g<=f)&&(c=(g-d)/(f-d)*(u-h)+h,_.push(c)),h=u,d=f}let m=NaN,y=-1/0;for(_.sort(sr),h=_[0],a=1,l=_.length;a<l;++a){u=_[a];const E=Math.abs(u-h);E>y&&(c=(h+u)/2,vl(i,t,e,n,c,g)&&(m=c,y=E)),h=u}return isNaN(m)&&(m=s[r]),o?(o.push(m,g,y),o):[m,g,y]}function D_(i,t,e,n,s){let r;for(t+=n;t<e;t+=n)if(r=s(i.slice(t-n,t),i.slice(t,t+n)),r)return r;return!1}function yl(i,t,e,n,s){const r=Qa(ve(),i,t,e,n);return Ln(s,r)?ag(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:D_(i,t,e,n,function(o,a){return gg(s,o,a)}):!1}function Tl(i,t,e,n,s){return!!(yl(i,t,e,n,s)||de(i,t,e,n,s[0],s[1])||de(i,t,e,n,s[0],s[3])||de(i,t,e,n,s[2],s[1])||de(i,t,e,n,s[2],s[3]))}function $_(i,t,e,n,s){if(!Tl(i,t,e[0],n,s))return!1;if(e.length===1)return!0;for(let r=1,o=e.length;r<o;++r)if(P_(i,e[r-1],e[r],n,s)&&!yl(i,e[r-1],e[r],n,s))return!1;return!0}function F_(i,t,e,n){for(;t<e-n;){for(let s=0;s<n;++s){const r=i[t+s];i[t+s]=i[e-n+s],i[e-n+s]=r}t+=n,e-=n}}function Cl(i,t,e,n){let s=0,r=i[e-n],o=i[e-n+1];for(;t<e;t+=n){const a=i[t],l=i[t+1];s+=(a-r)*(l+o),r=a,o=l}return s===0?void 0:s>0}function k_(i,t,e,n,s){s=s!==void 0?s:!1;for(let r=0,o=e.length;r<o;++r){const a=e[r],l=Cl(i,t,a,n);if(r===0){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;t=a}return!0}function So(i,t,e,n,s){s=s!==void 0?s:!1;for(let r=0,o=e.length;r<o;++r){const a=e[r],l=Cl(i,t,a,n);(r===0?s&&l||!s&&!l:s&&!l||!s&&l)&&F_(i,t,a,n),t=a}return t}class Tn extends ur{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?Fg(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Tn(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,s){return s<Ba(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(b_(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),A_(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,s))}containsXY(t,e){return vl(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return S_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),So(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,O_(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=En(this.getExtent());this.flatInteriorPoint_=M_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new N_(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Oo(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new Oo(e.slice(r,l),t);s.push(c),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;k_(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=So(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=I_(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new Tn(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return $_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=R_(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function No(i){const t=i[0],e=i[1],n=i[2],s=i[3],r=[t,e,t,s,n,s,n,e,t,e];return new Tn(r,"XY",[r.length])}const es=0;class V_ extends Ut{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=tr(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&il(),t.center&&(t.center=Dt(t.center,this.projection_)),t.extent&&(t.extent=Ve(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const a in Ct)delete e[a];this.setProperties(e,!0);const n=z_(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const s=K_(t),r=n.constraint,o=G_(t);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const s=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution(),o=r/2*(s[3]-e[3]+e[1]-s[1]),a=r/2*(s[0]-e[0]+e[2]-s[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let n=0;n<e.length;++n){let s=arguments[n];s.center&&(s=Object.assign({},s),s.center=Dt(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=Dt(s.anchor,this.getProjection())),e[n]=s}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,n;e>1&&typeof arguments[e-1]=="function"&&(n=arguments[e-1],--e);let s=0;for(;s<e&&!this.isDef();++s){const h=arguments[s];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(s===e){n&&Hn(n,!0);return}let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;s<e;++s){const h=arguments[s],u={start:r,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||f_,callback:n};if(h.center&&(u.sourceCenter=o,u.targetCenter=h.center.slice(),o=u.targetCenter),h.zoom!==void 0?(u.sourceResolution=a,u.targetResolution=this.getResolutionForZoom(h.zoom),a=u.targetResolution):h.resolution&&(u.sourceResolution=a,u.targetResolution=h.resolution,a=u.targetResolution),h.rotation!==void 0){u.sourceRotation=l;const d=Ge(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=l+d,l=u.targetRotation}j_(u)?u.complete=!0:r+=u.duration,c.push(u)}this.animations_.push(c),this.setHint(_t.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[_t.ANIMATING]>0}getInteracting(){return this.hints_[_t.INTERACTING]>0}cancelAnimations(){this.setHint(_t.ANIMATING,-this.hints_[_t.ANIMATING]);let t;for(let e=0,n=this.animations_.length;e<n;++e){const s=this.animations_[e];if(s[0].callback&&Hn(s[0].callback,!1),!t)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const s=this.animations_[n];let r=!0;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.complete)continue;const c=t-l.start;let h=l.duration>0?c/l.duration:1;h>=1?(l.complete=!0,h=1):r=!1;const u=l.easing(h);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],g=l.targetCenter[0],_=l.targetCenter[1];this.nextCenter_=l.targetCenter;const m=d+u*(g-d),y=f+u*(_-f);this.targetCenter_=[m,y]}if(l.sourceResolution&&l.targetResolution){const d=u===1?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=u===1?Ge(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),e=!0,!l.complete)break}if(r){this.animations_[n]=null,this.setHint(_t.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&Hn(o,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const s=this.getCenterInternal();return s!==void 0&&(n=[s[0]-e[0],s[1]-e[1]],Qs(n,t-this.getRotation()),Eg(n,e)),n}calculateCenterZoom(t,e){let n;const s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){const o=e[0]-t*(e[0]-s[0])/r,a=e[1]-t*(e[1]-s[1])/r;n=[o,a]}return n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],s=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(s*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(s*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&bs(t,this.getProjection())}getCenterInternal(){return this.get(Ct.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return Lg(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();D(e,1);const n=this.getResolution();D(n!==void 0,2);const s=this.getRotation();return D(s!==void 0,3),ys(e,n,s,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Ct.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Ve(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=X(t)/e[0],s=Nt(t)/e[1];return Math.max(n,s)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(e/n)/Math.log(t);return function(r){return e/Math.pow(t,r*s)}}getRotation(){return this.get(Ct.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(n/s)/e;return function(o){return Math.log(n/o)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=ns(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],e,n)}return{center:s.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,n,s;if(this.resolutions_){const r=rr(this.resolutions_,t,1);e=r,n=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=n/this.resolutions_[r+1]}else n=this.maxResolution_,s=this.zoomFactor_;return e+Math.log(n/t)/Math.log(s)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=Z(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,Z(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if(D(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){D(!qs(t),25);const s=Ve(t,this.getProjection());n=No(s)}else if(t.getType()==="Circle"){const s=Ve(t.getExtent(),this.getProjection());n=No(s),n.rotate(this.getRotation(),En(s))}else n=t;this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),s=Math.sin(-e),r=t.getFlatCoordinates(),o=t.getStride();let a=1/0,l=1/0,c=-1/0,h=-1/0;for(let u=0,d=r.length;u<d;u+=o){const f=r[u]*n-r[u+1]*s,g=r[u]*s+r[u+1]*n;a=Math.min(a,f),l=Math.min(l,g),c=Math.max(c,f),h=Math.max(h,g)}return[a,l,c,h]}fitInternal(t,e){e=e||{};let n=e.size;n||(n=this.getViewportSizeMinusPadding_());const s=e.padding!==void 0?e.padding:[0,0,0,0],r=e.nearest!==void 0?e.nearest:!1;let o;e.minResolution!==void 0?o=e.minResolution:e.maxZoom!==void 0?o=this.getResolutionForZoom(e.maxZoom):o=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,r?0:1);const c=this.getRotation(),h=Math.sin(c),u=Math.cos(c),d=En(a);d[0]+=(s[1]-s[3])/2*l,d[1]+=(s[0]-s[2])/2*l;const f=d[0]*u-d[1]*h,g=d[1]*u+d[0]*h,_=this.getConstrainedCenter([f,g],l),m=e.callback?e.callback:ui;e.duration!==void 0?this.animateInternal({resolution:l,center:_,duration:e.duration,easing:e.easing},m):(this.targetResolution_=l,this.targetCenter_=_,this.applyTargetState_(!1,!0),Hn(m,!0))}centerOn(t,e,n){this.centerOnInternal(Dt(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(ns(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,s){let r;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-n),l=ns(t,s,[a[0]/2+o[3],a[1]/2+o[0]],e,n);r=[t[0]-l[0],t[1]-l[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=bs(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&Dt(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,s,n);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=Dt(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(s,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&Dt(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,s=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,n),a=this.constraints_.center(this.targetCenter_,o,r,n,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(Ct.ROTATION)!==s&&this.set(Ct.ROTATION,s),this.get(Ct.RESOLUTION)!==o&&(this.set(Ct.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Ct.CENTER)||!ai(this.get(Ct.CENTER),a))&&this.set(Ct.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=t!==void 0?t:200;const s=e||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,this.applyTargetState_();return}n=n||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!ai(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:t,easing:rn,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(_t.INTERACTING,1)}endInteraction(t,e,n){n=n&&Dt(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.getInteracting()&&(this.setHint(_t.INTERACTING,-1),this.resolveConstraints(t,e,n))}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}function Hn(i,t){setTimeout(function(){i(t)},0)}function K_(i){if(i.extent!==void 0){const e=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return Ao(i.extent,i.constrainOnlyCenter,e)}const t=tr(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,Ao(e,!1,!1)}return l_}function z_(i){let t,e,n,o=i.minZoom!==void 0?i.minZoom:es,a=i.maxZoom!==void 0?i.maxZoom:28;const l=i.zoomFactor!==void 0?i.zoomFactor:2,c=i.multiWorld!==void 0?i.multiWorld:!1,h=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,u=i.showFullExtent!==void 0?i.showFullExtent:!1,d=tr(i.projection,"EPSG:3857"),f=d.getExtent();let g=i.constrainOnlyCenter,_=i.extent;if(!c&&!_&&d.isGlobal()&&(g=!1,_=f),i.resolutions!==void 0){const m=i.resolutions;e=m[o],n=m[a]!==void 0?m[a]:m[m.length-1],i.constrainResolution?t=c_(m,h,!g&&_,u):t=wo(e,n,h,!g&&_,u)}else{const y=(f?Math.max(X(f),Nt(f)):360*mn.degrees/d.getMetersPerUnit())/ar/Math.pow(2,es),E=y/Math.pow(2,28-es);e=i.maxResolution,e!==void 0?o=0:e=y/Math.pow(l,o),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=e/Math.pow(l,a):n=y/Math.pow(l,a):n=E),a=o+Math.floor(Math.log(e/n)/Math.log(l)),n=e/Math.pow(l,a-o),i.constrainResolution?t=h_(l,e,n,h,!g&&_,u):t=wo(e,n,h,!g&&_,u)}return{constraint:t,maxResolution:e,minResolution:n,minZoom:o,zoomFactor:l}}function G_(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const e=i.constrainRotation;return e===void 0||e===!0?d_():e===!1?Ro:typeof e=="number"?u_(e):Ro}return hr}function j_(i){return!(i.sourceCenter&&i.targetCenter&&!ai(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function ns(i,t,e,n,s){const r=Math.cos(-s);let o=Math.sin(-s),a=i[0]*r-i[1]*o,l=i[1]*r+i[0]*o;a+=(t[0]/2-e[0])*n,l+=(e[1]-t[1]/2)*n,o=-o;const c=a*r-l*o,h=l*r+a*o;return[c,h]}const Lt=V_;class U_ extends dl{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(P.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(P.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(j(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=M(t,S.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e;t instanceof Lt?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t;const n=this.getExtent();return this.getVisible()&&fr(this.getLayerState(),e.viewState)&&(!n||Ln(n,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const n=this.getSource();if(n&&(e=n.getAttributions()),!e)return[];const s=t instanceof Lt?t.getViewStateAndExtent():t;let r=e(s);return Array.isArray(r)||(r=[r]),r}render(t,e){const n=this.getRenderer();if(n.prepareFrame(t))return this.rendered=!0,n.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(P.MAP,t)}getMapInternal(){return this.get(P.MAP)}setMap(t){this.mapPrecomposeKey_&&(j(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(j(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=M(t,Jt.PRECOMPOSE,function(e){const s=e.frameState.layerStatesArray,r=this.getLayerState(!1);D(!s.some(function(o){return o.layer===r.layer}),67),s.push(r)},this),this.mapRenderKey_=M(this,S.CHANGE,t.render,t),this.changed())}setSource(t){this.set(P.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function fr(i,t){if(!i.visible)return!1;const e=t.resolution;if(e<i.minResolution||e>=i.maxResolution)return!1;const n=t.zoom;return n>i.minZoom&&n<=i.maxZoom}const gr=U_;class Y_ extends ir{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){G()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,s=t.pixelToCoordinateTransform;yn(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),hl(s,n)}forEachFeatureAtCoordinate(t,e,n,s,r,o,a,l){let c;const h=e.viewState;function u(p,C,b,A){return r.call(o,C,p?b:null,A)}const d=h.projection,f=yg(t.slice(),d),g=[[0,0]];if(d.canWrapX()&&s){const p=d.getExtent(),C=X(p);g.push([-C,0],[C,0])}const _=e.layerStatesArray,m=_.length,y=[],E=[];for(let p=0;p<g.length;p++)for(let C=m-1;C>=0;--C){const b=_[C],A=b.layer;if(A.hasRenderer()&&fr(b,h)&&a.call(l,A)){const R=A.getRenderer(),I=A.getSource();if(R&&I){const O=I.getWrapX()?f:t,$=u.bind(null,b.managed);E[0]=O[0]+g[p][0],E[1]=O[1]+g[p][1],c=R.forEachFeatureAtCoordinate(E,e,n,$,y)}if(c)return c}}if(y.length===0)return;const T=1/y.length;return y.forEach((p,C)=>p.distanceSq+=C*T),y.sort((p,C)=>p.distanceSq-C.distanceSq),y.some(p=>c=p.callback(p.feature,p.layer,p.geometry)),c}hasFeatureAtCoordinate(t,e,n,s,r,o){return this.forEachFeatureAtCoordinate(t,e,n,s,hi,this,r,o)!==void 0}getMap(){return this.map_}renderFrame(t){G()}scheduleExpireIconCache(t){ul.canExpireCache()&&t.postRenderFunctions.push(H_)}}function H_(i,t){ul.expire()}const W_=Y_;class X_ extends ae{constructor(t,e,n,s){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=s}}const bl=X_,Wn="ol-hidden",Di="ol-unselectable",_r="ol-control",Po="ol-collapsed";function Qe(i,t,e,n){let s;return e&&e.length?s=e.shift():ll?s=new OffscreenCanvas(i||300,t||300):s=document.createElement("canvas"),i&&(s.width=i),t&&(s.height=t),s.getContext("2d",n)}function pr(i){const t=i.canvas;t.width=1,t.height=1,i.clearRect(0,0,1,1)}function Mo(i,t){const e=t.parentNode;e&&e.replaceChild(i,t)}function As(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}function Z_(i){for(;i.lastChild;)i.removeChild(i.lastChild)}function B_(i,t){const e=i.childNodes;for(let n=0;;++n){const s=e[n],r=t[n];if(!s&&!r)break;if(s!==r){if(!s){i.appendChild(r);continue}if(!r){i.removeChild(s),--n;continue}i.insertBefore(r,s)}}}const q_=new Ut;class Q_ extends W_{constructor(t){super(t),this.fontChangeListenerKey_=M(q_,vn.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Di+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const s=new bl(t,void 0,e);n.dispatchEvent(s)}}disposeInternal(){j(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Jt.PRECOMPOSE,t);const e=t.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),n=t.viewState;this.children_.length=0;const s=[];let r=null;for(let o=0,a=e.length;o<a;++o){const l=e[o];t.layerIndex=o;const c=l.layer,h=c.getSourceState();if(!fr(l,n)||h!="ready"&&h!="undefined"){c.unrender();continue}const u=c.render(t,r);u&&(u!==r&&(this.children_.push(u),r=u),"getDeclutter"in c&&s.push(c))}for(let o=s.length-1;o>=0;--o)s[o].renderDeclutter(t);B_(this.element_,this.children_),this.dispatchRenderEvent(Jt.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}}const J_=Q_;class qt extends ae{constructor(t,e){super(t),this.layer=e}}const is={LAYERS:"layers"};class mr extends dl{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(is.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new kt(n.slice(),{unique:!0}):D(typeof n.getArray=="function",43):n=new kt(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(j),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(M(t,pt.ADD,this.handleLayersAdd_,this),M(t,pt.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(j);xi(this.listenerKeys_);const e=t.getArray();for(let n=0,s=e.length;n<s;n++){const r=e[n];this.registerLayerListeners_(r),this.dispatchEvent(new qt("addlayer",r))}this.changed()}registerLayerListeners_(t){const e=[M(t,vn.PROPERTYCHANGE,this.handleLayerChange_,this),M(t,S.CHANGE,this.handleLayerChange_,this)];t instanceof mr&&e.push(M(t,"addlayer",this.handleLayerGroupAdd_,this),M(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[st(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new qt("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new qt("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new qt("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=st(e);this.listenerKeys_[n].forEach(j),delete this.listenerKeys_[n],this.dispatchEvent(new qt("removelayer",e)),this.changed()}getLayers(){return this.get(is.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const n=e.getArray();for(let s=0,r=n.length;s<r;++s)this.dispatchEvent(new qt("removelayer",n[s]))}this.set(is.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],n=e.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(e)});const s=this.getLayerState();let r=s.zIndex;!t&&s.zIndex===void 0&&(r=0);for(let o=n,a=e.length;o<a;o++){const l=e[o];l.opacity*=s.opacity,l.visible=l.visible&&s.visible,l.maxResolution=Math.min(l.maxResolution,s.maxResolution),l.minResolution=Math.max(l.minResolution,s.minResolution),l.minZoom=Math.max(l.minZoom,s.minZoom),l.maxZoom=Math.min(l.maxZoom,s.maxZoom),s.extent!==void 0&&(l.extent!==void 0?l.extent=_n(l.extent,s.extent):l.extent=s.extent),l.zIndex===void 0&&(l.zIndex=r)}return e}getSourceState(){return"ready"}}const $i=mr;class tp extends ae{constructor(t,e,n){super(t),this.map=e,this.frameState=n!==void 0?n:null}}const De=tp;class ep extends De{constructor(t,e,n,s,r,o){super(t,e,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Zt=ep,z={SINGLECLICK:"singleclick",CLICK:S.CLICK,DBLCLICK:S.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},ws={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class np extends or{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=M(n,ws.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=M(n,ws.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(S.TOUCHMOVE,this.boundHandleTouchMove_,cl?{passive:!1}:!1)}emulateClick_(t){let e=new Zt(z.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Zt(z.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Zt(z.SINGLECLICK,this.map_,t);this.dispatchEvent(n)},250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==z.POINTERUP||e.type==z.POINTERCANCEL){delete this.trackedTouches_[n];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==e.target){delete this.trackedTouches_[s];break}}else(e.type==z.POINTERDOWN||e.type==z.POINTERMOVE)&&(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new Zt(z.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(j),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new Zt(z.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(M(n,z.POINTERMOVE,this.handlePointerMove_,this),M(n,z.POINTERUP,this.handlePointerUp_,this),M(this.element_,z.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(M(this.element_.getRootNode(),z.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new Zt(z.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Zt(z.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(j(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(S.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(j(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(j),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const ip=np,Bt={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},J={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},gi=1/0;class sp{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,xi(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const s=this.keyFunction_(n);return delete this.queuedElements_[s],n}enqueue(t){D(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=gi?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,s=e.length,r=e[t],o=n[t],a=t;for(;t<s>>1;){const l=this.getLeftChildIndex_(t),c=this.getRightChildIndex_(t),h=c<s&&n[c]<n[l]?c:l;e[t]=e[h],n[t]=n[h],t=h}e[t]=r,n[t]=o,this.siftDown_(a,t)}siftDown_(t,e){const n=this.elements_,s=this.priorities_,r=n[e],o=s[e];for(;e>t;){const a=this.getParentIndex_(e);if(s[a]>o)n[e]=n[a],s[e]=s[a],e=a;else break}n[e]=r,s[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let s=0;const r=e.length;let o,a,l;for(a=0;a<r;++a)o=e[a],l=t(o),l==gi?delete this.queuedElements_[this.keyFunction_(o)]:(n[s]=l,e[s++]=o);e.length=s,n.length=s,this.heapify_()}}const rp=sp,w={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class op extends rp{constructor(t,e){super(function(n){return t.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(S.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(n===w.LOADED||n===w.ERROR||n===w.EMPTY){n!==w.ERROR&&e.removeEventListener(S.CHANGE,this.boundHandleTileChange_);const s=e.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n=0,s,r,o;for(;this.tilesLoading_<t&&n<e&&this.getCount()>0;)r=this.dequeue()[0],o=r.getKey(),s=r.getState(),s===w.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++n,r.load())}}const ap=op;function lp(i,t,e,n,s){if(!i||!(e in i.wantedTiles)||!i.wantedTiles[e][t.getKey()])return gi;const r=i.viewState.center,o=n[0]-r[0],a=n[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}class cp extends Ut{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){As(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&As(this.element);for(let e=0,n=this.listenerKeys.length;e<n;++e)j(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==ui&&this.listenerKeys.push(M(t,Bt.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const Er=cp;class hp extends Er{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const e=t.className!==void 0?t.className:"ol-attribution",n=t.tipLabel!==void 0?t.tipLabel:"Attributions",s=t.expandClassName!==void 0?t.expandClassName:e+"-expand",r=t.collapseLabel!==void 0?t.collapseLabel:"›",o=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(S.CLICK,this.handleClick_.bind(this),!1);const c=e+" "+Di+" "+_r+(this.collapsed_&&this.collapsible_?" "+Po:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=c,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap(s=>s.getAttributions(t)))),n=!this.getMap().getAllLayers().some(s=>s.getSource()&&s.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(n),e}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Ni(e,this.renderedAttributions_)){Z_(this.ulElement_);for(let s=0,r=e.length;s<r;++s){const o=document.createElement("li");o.innerHTML=e[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Po),this.collapsed_?Mo(this.collapseLabel_,this.label_):Mo(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const up=hp;class dp extends Er{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",n=t.label!==void 0?t.label:"⇧",s=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(s));const r=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(S.CLICK,this.handleClick_.bind(this),!1);const a=e+" "+Di+" "+_r,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Wn)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const n=e.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:rn}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const s="rotate("+n+"rad)";if(this.autoHide_){const r=this.element.classList.contains(Wn);!r&&n===0?this.element.classList.add(Wn):r&&n!==0&&this.element.classList.remove(Wn)}this.label_.style.transform=s}this.rotation_=n}}const fp=dp;class gp extends Er{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",n=t.delta!==void 0?t.delta:1,s=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",r=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"–",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",c=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof o=="string"?document.createTextNode(o):o),h.addEventListener(S.CLICK,this.handleClick_.bind(this,n),!1);const u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=c,u.appendChild(typeof a=="string"?document.createTextNode(a):a),u.addEventListener(S.CLICK,this.handleClick_.bind(this,-n),!1);const d=e+" "+Di+" "+_r,f=this.element;f.className=d,f.appendChild(h),f.appendChild(u),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const n=this.getMap().getView();if(!n)return;const s=n.getZoom();if(s!==void 0){const r=n.getConstrainedZoom(s+t);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:this.duration_,easing:rn})):n.setZoom(r)}}}const _p=gp;function pp(i){i=i||{};const t=new kt;return(i.zoom!==void 0?i.zoom:!0)&&t.push(new _p(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&t.push(new fp(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&t.push(new up(i.attributionOptions)),t}const Do={ACTIVE:"active"};class mp extends Ut{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Do.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Do.ACTIVE,t)}setMap(t){this.map_=t}}function Ep(i,t,e){const n=i.getCenterInternal();if(n){const s=[n[0]+t[0],n[1]+t[1]];i.animateInternal({duration:e!==void 0?e:250,easing:g_,center:i.getConstrainedCenter(s)})}}function vr(i,t,e,n){const s=i.getZoom();if(s===void 0)return;const r=i.getConstrainedZoom(s+t),o=i.getResolutionForZoom(r);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:o,anchor:e,duration:n!==void 0?n:250,easing:rn})}const In=mp;class vp extends In{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==z.DBLCLICK){const n=t.originalEvent,s=t.map,r=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_,a=s.getView();vr(a,o,r,this.duration_),n.preventDefault(),e=!0}return!e}}const yp=vp;class Tp extends In{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==z.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==z.POINTERUP){const n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==z.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==z.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function yr(i){const t=i.length;let e=0,n=0;for(let s=0;s<t;s++)e+=i[s].clientX,n+=i[s].clientY;return{clientX:e/t,clientY:n/t}}const On=Tp;function Rs(i){const t=arguments;return function(e){let n=!0;for(let s=0,r=t.length;s<r&&(n=n&&t[s](e),!!n);++s);return n}}const Cp=function(i){const t=i.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},bp=function(i){const t=i.map.getTargetElement(),e=i.map.getOwnerDocument().activeElement;return t.contains(e)},Al=function(i){return i.map.getTargetElement().hasAttribute("tabindex")?bp(i):!0},Ap=hi,wl=function(i){const t=i.originalEvent;return t.button==0&&!(Wg&&Xg&&t.ctrlKey)},Rl=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},wp=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},xl=function(i){const t=i.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},ss=function(i){const t=i.originalEvent;return D(t!==void 0,56),t.pointerType=="mouse"},Rp=function(i){const t=i.originalEvent;return D(t!==void 0,56),t.isPrimary&&t.button===0};class xp extends On{constructor(t){super({stopDown:Pi}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:Rs(Rl,Rp);this.condition_=t.onFocusOnly?Rs(Al,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const n=this.targetPointers,s=e.getEventPixel(yr(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],a=t.map.getView();vg(r,a.getResolution()),Qs(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),l=e.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:rn})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const Lp=xp;class Ip extends On{constructor(t){t=t||{},super({stopDown:Pi}),this.condition_=t.condition?t.condition:Cp,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!ss(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===hr)return;const s=e.getSize(),r=t.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return ss(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return ss(t)&&wl(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const Op=Ip;class Sp extends ir{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",s=this.element_.style;s.left=Math.min(t[0],e[0])+n,s.top=Math.min(t[1],e[1])+n,s.width=Math.abs(e[0]-t[0])+n,s.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,s=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new Tn([s])}getGeometry(){return this.geometry_}}const Np=Sp,Xn={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class rs extends ae{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}class Pp extends On{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new Np(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:wl,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const s=n[0]-e[0],r=n[1]-e[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new rs(Xn.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new rs(e?Xn.BOXEND:Xn.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new rs(Xn.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}}const Mp=Pp;class Dp extends Mp{constructor(t){t=t||{};const e=t.condition?t.condition:wp;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const n=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=n.rotatedExtentForGeometry(s),o=n.getResolutionForExtentInternal(r),a=n.getResolution()/o;s=s.clone(),s.scale(a*a)}n.fitInternal(s,{duration:this.duration_,easing:rn})}}const $p=Dp,ce={LEFT:37,UP:38,RIGHT:39,DOWN:40};class Fp extends In{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return Rl(e)&&xl(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==S.KEYDOWN){const n=t.originalEvent,s=n.keyCode;if(this.condition_(t)&&(s==ce.DOWN||s==ce.LEFT||s==ce.RIGHT||s==ce.UP)){const o=t.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;s==ce.DOWN?c=-a:s==ce.LEFT?l=-a:s==ce.RIGHT?l=a:c=a;const h=[l,c];Qs(h,o.getRotation()),Ep(o,h,this.duration_),n.preventDefault(),e=!0}}return!e}}const kp=Fp;class Vp extends In{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:xl,this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==S.KEYDOWN||t.type==S.KEYPRESS){const n=t.originalEvent,s=n.key;if(this.condition_(t)&&(s==="+"||s==="-")){const r=t.map,o=s==="+"?this.delta_:-this.delta_,a=r.getView();vr(a,o,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}}const Kp=Vp;class zp{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const s=this.points_[e+2]-this.points_[n+2];if(s<1e3/60)return!1;const r=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const Gp=zp;class jp extends In{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:Ap;this.condition_=t.onFocusOnly?Rs(Al,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==S.WHEEL)return!0;const n=t.map,s=t.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let r;if(t.type==S.WHEEL&&(r=s.deltaY,Yg&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=al),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=n.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=r;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-Z(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),vr(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const Up=jp;class Yp extends On{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Pi),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-n.clientY,s.clientX-n.clientX);if(this.lastAngle_!==void 0){const l=r-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=l}this.lastAngle_=r;const o=t.map,a=o.getView();a.getConstraints().rotation!==hr&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(yr(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}const Hp=Yp;class Wp extends On{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Pi),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],s=this.targetPointers[1],r=n.clientX-s.clientX,o=n.clientY-s.clientY,a=Math.sqrt(r*r+o*o);this.lastDistance_!==void 0&&(e=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,c=l.getView();e!=1&&(this.lastScaleDelta_=e),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(yr(this.targetPointers))),l.render(),c.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const n=t.map.getView(),s=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}const Xp=Wp;function Zp(i){i=i||{};const t=new kt,e=new Gp(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&t.push(new Op),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&t.push(new yp({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&t.push(new Lp({onFocusOnly:i.onFocusOnly,kinetic:e})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&t.push(new Hp),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&t.push(new Xp({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(t.push(new kp),t.push(new Kp({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&t.push(new Up({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&t.push(new $p({duration:i.zoomDuration})),t}function $o(i){return i[0]>0&&i[1]>0}function Bp(i,t,e){return e===void 0&&(e=[0,0]),e[0]=i[0]*t+.5|0,e[1]=i[1]*t+.5|0,e}function Ft(i,t){return Array.isArray(i)?i:(t===void 0?t=[i,i]:(t[0]=i,t[1]=i),t)}function Ll(i){if(i instanceof gr){i.setMapInternal(null);return}i instanceof $i&&i.getLayers().forEach(Ll)}function Il(i,t){if(i instanceof gr){i.setMapInternal(t);return}if(i instanceof $i){const e=i.getLayers().getArray();for(let n=0,s=e.length;n<s;++n)Il(e[n],t)}}let qp=class extends Ut{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=Qp(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:al,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=je(),this.pixelToCoordinateTransform_=je(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||pp(),this.interactions=e.interactions||Zp({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new ap(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(J.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(J.VIEW,this.handleViewChanged_),this.addChangeListener(J.SIZE,this.handleSizeChanged_),this.addChangeListener(J.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const n=this;t.view&&!(t.view instanceof Lt)&&t.view.then(function(s){n.setView(new Lt(s))}),this.controls.addEventListener(pt.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(pt.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(pt.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(pt.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(pt.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(pt.REMOVE,s=>{const r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Il(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const r=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.layerFilter!==void 0?n.layerFilter:hi,a=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,a,e,null,o,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,function(s){n.push(s)},e),n}getAllLayers(){const t=[];function e(n){n.forEach(function(s){s instanceof $i?e(s.getLayers()):t.push(s)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};const s=e.layerFilter!==void 0?e.layerFilter:hi,r=e.hitTolerance!==void 0?e.hitTolerance:0,o=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,o,s,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const n=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=n.width/s[0],o=n.height/s[1],a="changedTouches"in t?t.changedTouches[0]:t;return[(a.clientX-n.left)/r,(a.clientY-n.top)/o]}getTarget(){return this.get(J.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return bs(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?lt(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(J.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof kt){e.setLayers(t);return}const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const s=t[e];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Dt(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?lt(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(J.SIZE)}getView(){return this.get(J.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,s){return lp(this.frameState_,t,e,n,s)}handleBrowserEvent(t,e){e=e||t.type;const n=new Zt(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===ws.POINTERDOWN||n===S.WHEEL||n===S.KEYDOWN){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=e.target;if(this.overlayContainerStopEvent_.contains(o)||!(r===s?s.documentElement:r).contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let s=this.maxTilesLoading_,r=s;if(t){const o=t.viewHints;if(o[_t.ANIMATING]||o[_t.INTERACTING]){const a=Date.now()-t.time>8;s=a?0:8,r=a?0:2}}e.getTilesLoading()<s&&(e.reprioritize(),e.loadMoreTiles(s,r))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(Jt.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Jt.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new De(Bt.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new De(Bt.LOADSTART,this,t))));const n=this.postRenderFunctions_;for(let s=0,r=n.length;s<r;++s)n[s](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,s=this.targetChangeHandlerKeys_.length;n<s;++n)j(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(S.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(S.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,As(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host)}const t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new J_(this)),this.mapBrowserEventHandler_=new ip(this,this.moveTolerance_);for(const r in z)this.mapBrowserEventHandler_.addEventListener(z[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(S.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(S.WHEEL,this.boundHandleBrowserEvent_,cl?{passive:!1}:!1);const n=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[M(n,S.KEYDOWN,this.handleBrowserEvent,this),M(n,S.KEYPRESS,this.handleBrowserEvent,this)];const s=e.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(e)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(j(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(j(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=M(t,vn.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=M(t,S.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(j),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new qt("addlayer",t)),this.layerGroupPropertyListenerKeys_=[M(t,vn.PROPERTYCHANGE,this.render,this),M(t,S.CHANGE,this.render,this),M(t,"addlayer",this.handleLayerAdd_,this),M(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const s=t[e].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Ll(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),s=this.frameState_;let r=null;if(e!==void 0&&$o(e)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:ys(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:st(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=ys(a.nextCenter,a.nextResolution,l,e)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!qs(this.previousExtent_)&&!Es(r.extent,this.previousExtent_))&&(this.dispatchEvent(new De(Bt.MOVESTART,this,s)),this.previousExtent_=Li(this.previousExtent_)),this.previousExtent_&&!r.viewHints[_t.ANIMATING]&&!r.viewHints[_t.INTERACTING]&&!Es(r.extent,this.previousExtent_)&&(this.dispatchEvent(new De(Bt.MOVEEND,this,r)),og(r.extent,this.previousExtent_))),this.dispatchEvent(new De(Bt.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(Bt.LOADSTART)||this.hasListener(Bt.LOADEND)||this.hasListener(Jt.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new qt("removelayer",e)),this.set(J.LAYERGROUP,t)}setSize(t){this.set(J.SIZE,t)}setTarget(t){this.set(J.TARGET,t)}setView(t){if(!t||t instanceof Lt){this.set(J.VIEW,t);return}this.set(J.VIEW,new Lt);const e=this;t.then(function(n){e.setView(new Lt(n))})}updateSize(){const t=this.getTargetElement();let e;if(t){const s=getComputedStyle(t),r=t.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=t.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(e=[r,o],!$o(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&nl("No map visible because the map container's width or height are 0."))}const n=this.getSize();e&&(!n||!Ni(e,n))&&(this.setSize(e),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let e;const n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}}};function Qp(i){let t=null;i.keyboardEventTarget!==void 0&&(t=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const e={},n=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new $i({layers:i.layers});e[J.LAYERGROUP]=n,e[J.TARGET]=i.target,e[J.VIEW]=i.view instanceof Lt?i.view:new Lt;let s;i.controls!==void 0&&(Array.isArray(i.controls)?s=new kt(i.controls.slice()):(D(typeof i.controls.getArray=="function",47),s=i.controls));let r;i.interactions!==void 0&&(Array.isArray(i.interactions)?r=new kt(i.interactions.slice()):(D(typeof i.interactions.getArray=="function",48),r=i.interactions));let o;return i.overlays!==void 0?Array.isArray(i.overlays)?o=new kt(i.overlays.slice()):(D(typeof i.overlays.getArray=="function",49),o=i.overlays):o=new kt,{controls:s,interactions:r,keyboardEventTarget:t,overlays:o,values:e}}const Jp=qp;class tm extends or{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(S.CHANGE)}release(){this.state===w.ERROR&&this.setState(w.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==w.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==w.LOADED){t.interimTile=null;break}else t.getState()==w.LOADING?e=t:t.getState()==w.IDLE?e.interimTile=t.interimTile:e=t;t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==w.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){G()}getAlpha(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(!n)n=e,this.transitionStarts_[t]=n;else if(n===-1)return 1;const s=e-n+1e3/60;return s>=this.transition_?1:fl(s/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const Ol=tm,dn={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function em(i,t,e){const n=i;let s=!0,r=!1,o=!1;const a=[di(n,S.LOAD,function(){o=!0,r||t()})];return n.src&&Zg?(r=!0,n.decode().then(function(){s&&t()}).catch(function(l){s&&(o?t():e())})):a.push(di(n,S.ERROR,e)),function(){s=!1,a.forEach(j)}}class nm extends Ol{constructor(t,e,n,s,r,o){super(t,e,o),this.crossOrigin_=s,this.src_=n,this.key=n,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=w.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=w.ERROR,this.unlistenImage_(),this.image_=im(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=w.LOADED:this.state=w.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==w.ERROR&&(this.state=w.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==w.IDLE&&(this.state=w.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=em(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function im(){const i=Qe(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}const Sl=nm,sm=.5,rm=10,Fo=.25;class om{constructor(t,e,n,s,r,o){this.sourceProj_=t,this.targetProj_=e;let a={};const l=li(this.targetProj_,this.sourceProj_);this.transformInv_=function(E){const T=E[0]+"/"+E[1];return a[T]||(a[T]=l(E)),a[T]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&X(s)==X(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?X(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?X(this.targetProj_.getExtent()):null;const c=ye(n),h=Si(n),u=Oi(n),d=Ii(n),f=this.transformInv_(c),g=this.transformInv_(h),_=this.transformInv_(u),m=this.transformInv_(d),y=rm+(o?Math.max(0,Math.ceil(Math.log2(vs(n)/(o*o*256*256)))):0);if(this.addQuad_(c,h,u,d,f,g,_,m,y),this.wrapsXInSource_){let E=1/0;this.triangles_.forEach(function(T,p,C){E=Math.min(E,T.source[0][0],T.source[1][0],T.source[2][0])}),this.triangles_.forEach(T=>{if(Math.max(T.source[0][0],T.source[1][0],T.source[2][0])-E>this.sourceWorldWidth_/2){const p=[[T.source[0][0],T.source[0][1]],[T.source[1][0],T.source[1][1]],[T.source[2][0],T.source[2][1]]];p[0][0]-E>this.sourceWorldWidth_/2&&(p[0][0]-=this.sourceWorldWidth_),p[1][0]-E>this.sourceWorldWidth_/2&&(p[1][0]-=this.sourceWorldWidth_),p[2][0]-E>this.sourceWorldWidth_/2&&(p[2][0]-=this.sourceWorldWidth_);const C=Math.min(p[0][0],p[1][0],p[2][0]);Math.max(p[0][0],p[1][0],p[2][0])-C<this.sourceWorldWidth_/2&&(T.source=p)}})}a={}}addTriangle_(t,e,n,s,r,o){this.triangles_.push({source:[s,r,o],target:[t,e,n]})}addQuad_(t,e,n,s,r,o,a,l,c){const h=fo([r,o,a,l]),u=this.sourceWorldWidth_?X(h)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&u>.5&&u<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const m=fo([t,e,n,s]);g=X(m)/this.targetWorldWidth_>Fo||g}!f&&this.sourceProj_.isGlobal()&&u&&(g=u>Fo||g)}if(!g&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Ln(h,this.maxSourceExtent_))return;let _=0;if(!g&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)g=!0;else if(_=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),_!=1&&_!=2&&_!=4&&_!=8)return}if(c>0){if(!g){const m=[(t[0]+n[0])/2,(t[1]+n[1])/2],y=this.transformInv_(m);let E;f?E=(Ge(r[0],d)+Ge(a[0],d))/2-Ge(y[0],d):E=(r[0]+a[0])/2-y[0];const T=(r[1]+a[1])/2-y[1];g=E*E+T*T>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const m=[(e[0]+n[0])/2,(e[1]+n[1])/2],y=this.transformInv_(m),E=[(s[0]+t[0])/2,(s[1]+t[1])/2],T=this.transformInv_(E);this.addQuad_(t,e,m,E,r,o,y,T,c-1),this.addQuad_(E,m,n,s,T,y,a,l,c-1)}else{const m=[(t[0]+e[0])/2,(t[1]+e[1])/2],y=this.transformInv_(m),E=[(n[0]+s[0])/2,(n[1]+s[1])/2],T=this.transformInv_(E);this.addQuad_(t,m,E,s,r,y,T,l,c-1),this.addQuad_(m,e,n,E,y,o,a,T,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}_&11||this.addTriangle_(t,n,s,r,a,l),_&14||this.addTriangle_(t,n,e,r,a,o),_&&(_&13||this.addTriangle_(e,s,t,o,l,r),_&7||this.addTriangle_(e,s,n,o,l,a))}calculateSourceExtent(){const t=ve();return this.triangles_.forEach(function(e,n,s){const r=e.source;ti(t,r[0]),ti(t,r[1]),ti(t,r[2])}),t}getTriangles(){return this.triangles_}}const am=om;let os;const Ue=[];function ko(i,t,e,n,s){i.beginPath(),i.moveTo(0,0),i.lineTo(t,e),i.lineTo(n,s),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(t,n)+1,Math.max(e,s)),i.restore()}function as(i,t){return Math.abs(i[t*4]-210)>2||Math.abs(i[t*4+3]-.75*255)>2}function lm(){if(os===void 0){const i=Qe(6,6,Ue);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",ko(i,4,5,4,0),ko(i,4,5,0,5);const t=i.getImageData(0,0,3,3).data;os=as(t,0)||as(t,4)||as(t,8),pr(i),Ue.push(i.canvas)}return os}function Vo(i,t,e,n){const s=nr(e,t,i);let r=po(t,n,e);const o=t.getMetersPerUnit();o!==void 0&&(r*=o);const a=i.getMetersPerUnit();a!==void 0&&(r/=a);const l=i.getExtent();if(!l||Bs(l,s)){const c=po(i,r,s)/r;isFinite(c)&&c>0&&(r/=c)}return r}function cm(i,t,e,n){const s=En(e);let r=Vo(i,t,s,n);return(!isFinite(r)||r<=0)&&Ja(e,function(o){return r=Vo(i,t,o,n),isFinite(r)&&r>0}),r}function hm(i,t,e,n,s,r,o,a,l,c,h,u){const d=Qe(Math.round(e*i),Math.round(e*t),Ue);if(u||(d.imageSmoothingEnabled=!1),l.length===0)return d.canvas;d.scale(e,e);function f(p){return Math.round(p*e)/e}d.globalCompositeOperation="lighter";const g=ve();l.forEach(function(p,C,b){hg(g,p.extent)});const _=X(g),m=Nt(g),y=Qe(Math.round(e*_/n),Math.round(e*m/n),Ue);u||(y.imageSmoothingEnabled=!1);const E=e/n;l.forEach(function(p,C,b){const A=p.extent[0]-g[0],R=-(p.extent[3]-g[3]),I=X(p.extent),O=Nt(p.extent);p.image.width>0&&p.image.height>0&&y.drawImage(p.image,c,c,p.image.width-2*c,p.image.height-2*c,A*E,R*E,I*E,O*E)});const T=ye(o);return a.getTriangles().forEach(function(p,C,b){const A=p.source,R=p.target;let I=A[0][0],O=A[0][1],$=A[1][0],U=A[1][1],k=A[2][0],rt=A[2][1];const H=f((R[0][0]-T[0])/r),V=f(-(R[0][1]-T[1])/r),x=f((R[1][0]-T[0])/r),W=f(-(R[1][1]-T[1])/r),B=f((R[2][0]-T[0])/r),tt=f(-(R[2][1]-T[1])/r),Tt=I,Y=O;I=0,O=0,$-=Tt,U-=Y,k-=Tt,rt-=Y;const et=[[$,U,0,0,x-H],[k,rt,0,0,B-H],[0,0,$,U,W-V],[0,0,k,rt,tt-V]],F=pg(et);if(F){if(d.save(),d.beginPath(),lm()||!u){d.moveTo(x,W);const N=4,ut=H-x,ot=V-W;for(let K=0;K<N;K++)d.lineTo(x+f((K+1)*ut/N),W+f(K*ot/(N-1))),K!=N-1&&d.lineTo(x+f((K+1)*ut/N),W+f((K+1)*ot/(N-1)));d.lineTo(B,tt)}else d.moveTo(x,W),d.lineTo(H,V),d.lineTo(B,tt);d.clip(),d.transform(F[0],F[2],F[1],F[3],H,V),d.translate(g[0]-Tt,g[3]-Y),d.scale(n/e,-n/e),d.drawImage(y.canvas,0,0),d.restore()}}),pr(y),Ue.push(y.canvas),h&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach(function(p,C,b){const A=p.target,R=(A[0][0]-T[0])/r,I=-(A[0][1]-T[1])/r,O=(A[1][0]-T[0])/r,$=-(A[1][1]-T[1])/r,U=(A[2][0]-T[0])/r,k=-(A[2][1]-T[1])/r;d.beginPath(),d.moveTo(O,$),d.lineTo(R,I),d.lineTo(U,k),d.closePath(),d.stroke()}),d.restore()),d.canvas}class um extends Ol{constructor(t,e,n,s,r,o,a,l,c,h,u,d){super(r,w.IDLE,{interpolate:!!d}),this.renderEdges_=u!==void 0?u:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const f=s.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let _=this.sourceTileGrid_.getExtent();const m=g?_n(f,g):f;if(vs(m)===0){this.state=w.EMPTY;return}const y=t.getExtent();y&&(_?_=_n(_,y):_=y);const E=s.getResolution(this.wrappedTileCoord_[0]),T=cm(t,n,m,E);if(!isFinite(T)||T<=0){this.state=w.EMPTY;return}const p=h!==void 0?h:sm;if(this.triangulation_=new am(t,n,m,_,T*p,E),this.triangulation_.getTriangles().length===0){this.state=w.EMPTY;return}this.sourceZ_=e.getZForResolution(T);let C=this.triangulation_.calculateSourceExtent();if(_&&(t.canWrapX()?(C[1]=Z(C[1],_[1],_[3]),C[3]=Z(C[3],_[1],_[3])):C=_n(C,_)),!vs(C))this.state=w.EMPTY;else{const b=e.getTileRangeForExtentAndZ(C,this.sourceZ_);for(let A=b.minX;A<=b.maxX;A++)for(let R=b.minY;R<=b.maxY;R++){const I=c(this.sourceZ_,A,R,a);I&&this.sourceTiles_.push(I)}this.sourceTiles_.length===0&&(this.state=w.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(e=>{e&&e.getState()==w.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}),this.sourceTiles_.length=0,t.length===0)this.state=w.ERROR;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),s=typeof n=="number"?n:n[0],r=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=hm(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=w.LOADED}this.changed()}load(){if(this.state==w.IDLE){this.state=w.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(e=>{const n=e.getState();if(n==w.IDLE||n==w.LOADING){t++;const s=M(e,S.CHANGE,function(r){const o=e.getState();(o==w.LOADED||o==w.ERROR||o==w.EMPTY)&&(j(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,n,s){e.getState()==w.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(j),this.sourcesListenerKeys_=null}release(){this.canvas_&&(pr(this.canvas_.getContext("2d")),Ue.push(this.canvas_),this.canvas_=null),super.release()}}const xs=um;class dm{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t];return D(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t];return D(e!==void 0,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e=0,n;for(n=this.newest_;n;n=n.older)t[e++]=n.key_;return t}getValues(){const t=new Array(this.count_);let e=0,n;for(n=this.newest_;n;n=n.older)t[e++]=n.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){D(!(t in this.entries_),16);const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}}const fm=dm;function Ko(i,t,e,n){return n!==void 0?(n[0]=i,n[1]=t,n[2]=e,n):[i,t,e]}function Fi(i,t,e){return i+"/"+t+"/"+e}function Nl(i){return Fi(i[0],i[1],i[2])}function gm(i){return i.split("/").map(Number)}function _m(i){return(i[1]<<i[0])+i[2]}function pm(i,t){const e=i[0],n=i[1],s=i[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;const r=t.getFullTileRange(e);return r?r.containsXY(n,s):!0}class mm extends fm{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),n=gm(t)[0];this.forEach(s=>{s.tileCoord[0]!==n&&(this.remove(Nl(s.tileCoord)),s.release())})}}const Pl=mm,ls={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class Em extends Ut{constructor(t){super(),this.projection=bt(t.projection),this.attributions_=zo(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(n,s){e.viewResolver=n,e.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=zo(t),this.changed()}setState(t){this.state_=t,this.changed()}}function zo(i){return i?Array.isArray(i)?function(t){return i}:typeof i=="function"?i:function(t){return[i]}:null}const vm=Em;class Ml{constructor(t,e,n,s){this.minX=t,this.maxX=e,this.minY=n,this.maxY=s}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Ie(i,t,e,n,s){return s!==void 0?(s.minX=i,s.maxX=t,s.minY=e,s.maxY=n,s):new Ml(i,t,e,n)}const Dl=Ml,Oe=[0,0,0],Wt=5;class ym{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,D(kg(this.resolutions_,function(s,r){return r-s},!0),17);let e;if(!t.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!e)e=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,D(this.origins_.length==this.resolutions_.length,20));const n=t.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ye(n)),D(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,D(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:ar,D(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(s,r){const o=new Dl(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,e,n){const s=this.getTileRangeForExtentAndZ(t,e);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,l=s.maxY;a<=l;++a)n([e,r,a])}forEachTileCoordParentTileRange(t,e,n,s){let r,o,a,l=null,c=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,s);c>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),r=Ie(o,o,a,a,n)):r=this.getTileRangeForExtentAndZ(l,c,n),e(c,r))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const r=t[1]*2,o=t[2]*2;return Ie(r,r+1,o,o+1,e)}const s=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;const s=t[0],r=t[1],o=t[2];if(e===s)return Ie(r,o,r,o,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,e-s),c=Math.floor(r*l),h=Math.floor(o*l);if(e<s)return Ie(c,c,h,h,n);const u=Math.floor(l*(r+1))-1,d=Math.floor(l*(o+1))-1;return Ie(c,u,h,d,n)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,n)}getTileRangeExtent(t,e,n){const s=this.getOrigin(t),r=this.getResolution(t),o=Ft(this.getTileSize(t),this.tmpSize_),a=s[0]+e.minX*o[0]*r,l=s[0]+(e.maxX+1)*o[0]*r,c=s[1]+e.minY*o[1]*r,h=s[1]+(e.maxY+1)*o[1]*r;return qe(a,c,l,h,n)}getTileRangeForExtentAndZ(t,e,n){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,Oe);const s=Oe[1],r=Oe[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,Oe);const o=Oe[1],a=Oe[2];return Ie(s,o,r,a,n)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),s=Ft(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*s[0]*n,e[1]-(t[2]+.5)*s[1]*n]}getTileCoordExtent(t,e){const n=this.getOrigin(t[0]),s=this.getResolution(t[0]),r=Ft(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*r[0]*s,a=n[1]-(t[2]+1)*r[1]*s,l=o+r[0]*s,c=a+r[1]*s;return qe(o,a,l,c,e)}getTileCoordForCoordAndResolution(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}getTileCoordForXYAndResolution_(t,e,n,s,r){const o=this.getZForResolution(n),a=n/this.getResolution(o),l=this.getOrigin(o),c=Ft(this.getTileSize(o),this.tmpSize_);let h=a*(t-l[0])/n/c[0],u=a*(l[1]-e)/n/c[1];return s?(h=Un(h,Wt)-1,u=Un(u,Wt)-1):(h=jn(h,Wt),u=jn(u,Wt)),Ko(o,h,u,r)}getTileCoordForXYAndZ_(t,e,n,s,r){const o=this.getOrigin(n),a=this.getResolution(n),l=Ft(this.getTileSize(n),this.tmpSize_);let c=(t-o[0])/a/l[0],h=(o[1]-e)/a/l[1];return s?(c=Un(c,Wt)-1,h=Un(h,Wt)-1):(c=jn(c,Wt),h=jn(h,Wt)),Ko(n,c,h,r)}getTileCoordForCoordAndZ(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const n=rr(this.resolutions_,t,e||0);return Z(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return Tl(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,n=new Array(e);for(let s=this.minZoom;s<e;++s)n[s]=this.getTileRangeForExtentAndZ(t,s);this.fullTileRanges_=n}}const $l=ym;function Fl(i){let t=i.getDefaultTileGrid();return t||(t=Am(i),i.setDefaultTileGrid(t)),t}function Tm(i,t,e){const n=t[0],s=i.getTileCoordCenter(t),r=Tr(e);if(!Bs(r,s)){const o=X(r),a=Math.ceil((r[0]-s[0])/o);return s[0]+=o*a,i.getTileCoordForCoordAndZ(s,n)}return t}function Cm(i,t,e,n){n=n!==void 0?n:"top-left";const s=kl(i,t,e);return new $l({extent:i,origin:dg(i,n),resolutions:s,tileSize:e})}function bm(i){const t=i||{},e=t.extent||bt("EPSG:3857").getExtent(),n={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:kl(e,t.maxZoom,t.tileSize,t.maxResolution)};return new $l(n)}function kl(i,t,e,n){t=t!==void 0?t:a_,e=Ft(e!==void 0?e:ar);const s=Nt(i),r=X(i);n=n>0?n:Math.max(r/e[0],s/e[1]);const o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=n/Math.pow(2,l);return a}function Am(i,t,e,n){const s=Tr(i);return Cm(s,t,e,n)}function Tr(i){i=bt(i);let t=i.getExtent();if(!t){const e=180*mn.degrees/i.getMetersPerUnit();t=qe(-e,-e,e,e)}return t}class wm extends vm{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const e=[256,256];this.tileGrid&&Ft(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new Pl(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const n=this.getTileCacheForProjection(t);n&&n.expireCache(e)}forEachLoadedTile(t,e,n,s){const r=this.getTileCacheForProjection(t);if(!r)return!1;let o=!0,a,l,c;for(let h=n.minX;h<=n.maxX;++h)for(let u=n.minY;u<=n.maxY;++u)l=Fi(e,h,u),c=!1,r.containsKey(l)&&(a=r.get(l),c=a.getState()===w.LOADED,c&&(c=s(a)!==!1)),c||(o=!1);return o}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,n,s,r){return G()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Fl(t)}getTileCacheForProjection(t){const e=this.getProjection();return D(e===null||Me(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,n){const s=this.getTileGridForProjection(n),r=this.getTilePixelRatio(e),o=Ft(s.getTileSize(t),this.tmpSize);return r==1?o:Bp(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=e!==void 0?e:this.getProjection();const n=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=Tm(n,t,e)),pm(t,n)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)}useTile(t,e,n,s){}}class Rm extends ae{constructor(t,e){super(t),this.tile=e}}const xm=wm;function Lm(i,t){const e=/\{z\}/g,n=/\{x\}/g,s=/\{y\}/g,r=/\{-y\}/g;return function(o,a,l){if(o)return i.replace(e,o[0].toString()).replace(n,o[1].toString()).replace(s,o[2].toString()).replace(r,function(){const c=o[0],h=t.getFullTileRange(c);return D(h,55),(h.getHeight()-o[2]-1).toString()})}}function Im(i,t){const e=i.length,n=new Array(e);for(let s=0;s<e;++s)n[s]=Lm(i[s],t);return Om(n)}function Om(i){return i.length===1?i[0]:function(t,e,n){if(!t)return;const s=_m(t),r=Ge(s,i.length);return i[r](t,e,n)}}function Sm(i){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(i);if(e){const n=e[1].charCodeAt(0),s=e[2].charCodeAt(0);let r;for(r=n;r<=s;++r)t.push(i.replace(e[0],String.fromCharCode(r)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(i),e){const n=parseInt(e[2],10);for(let s=parseInt(e[1],10);s<=n;s++)t.push(i.replace(e[0],s.toString()));return t}return t.push(i),t}class Cr extends xm{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Cr.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,n=st(e),s=e.getState();let r;s==w.LOADING?(this.tileLoadingKeys_[n]=!0,r=ls.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=s==w.ERROR?ls.TILELOADERROR:s==w.LOADED?ls.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new Rm(r,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=Sm(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Im(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,n){}useTile(t,e,n){const s=Fi(t,e,n);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}const Nm=Cr;class Pm extends Nm{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Mm,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:Sl,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(const s in this.tileCacheForProjection){const r=this.tileCacheForProjection[s];r.expireCache(r==n?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!Me(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!Me(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||Me(e,t)))return this.tileGrid;const n=st(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Fl(t)),this.tileGridForProjection[n]}getTileCacheForProjection(t){const e=this.getProjection();if(!e||Me(e,t))return this.tileCache;const n=st(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Pl(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(t,e,n,s,r,o){const a=[t,e,n],l=this.getTileCoordForTileUrlFunction(a,r),c=l?this.tileUrlFunction(l,s,r):void 0,h=new this.tileClass(a,c!==void 0?w.IDLE:w.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(S.CHANGE,this.handleTileChange.bind(this)),h}getTile(t,e,n,s,r){const o=this.getProjection();if(!o||!r||Me(o,r))return this.getTileInternal(t,e,n,s,o||r);const a=this.getTileCacheForProjection(r),l=[t,e,n];let c;const h=Nl(l);a.containsKey(h)&&(c=a.get(h));const u=this.getKey();if(c&&c.key==u)return c;const d=this.getTileGridForProjection(o),f=this.getTileGridForProjection(r),g=this.getTileCoordForTileUrlFunction(l,r),_=new xs(o,d,r,f,l,g,this.getTilePixelRatio(s),this.getGutter(),(m,y,E,T)=>this.getTileInternal(m,y,E,T,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return _.key=u,c?(_.interimTile=c,_.refreshInterimChain(),a.replace(h,_)):a.set(h,_),_}getTileInternal(t,e,n,s,r){let o=null;const a=Fi(t,e,n),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(t,e,n,s,r,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(t,e,n,s,r,l),c.getState()==w.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}setTileGridForProjection(t,e){const n=bt(t);if(n){const s=st(n);s in this.tileGridForProjection||(this.tileGridForProjection[s]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function Mm(i,t){i.getImage().src=t}const Dm=Pm;class $m extends Dm{constructor(t){t=t||{};const e=t.projection!==void 0?t.projection:"EPSG:3857",n=t.tileGrid!==void 0?t.tileGrid:bm({extent:Tr(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const Vl=$m,Fm='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class km extends Vl{constructor(t){t=t||{};let e;t.attributions!==void 0?e=t.attributions:e=[Fm];const n=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",s=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:n,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:s,wrapX:t.wrapX,zDirection:t.zDirection})}}const Vm=km,Zn={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Km extends gr{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(Zn.PRELOAD)}setPreload(t){this.set(Zn.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(Zn.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(Zn.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const zm=Km;class Gm extends ol{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return G()}getData(t){return null}prepareFrame(t){return G()}renderFrame(t,e){return G()}loadedTileCallback(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}createLoadedTileFinder(t,e,n){return(s,r)=>{const o=this.loadedTileCallback.bind(this,n,s);return t.forEachLoadedTile(e,s,r,o)}}forEachFeatureAtCoordinate(t,e,n,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===dn.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=dn.LOADED&&e!=dn.ERROR&&t.addEventListener(S.CHANGE,this.boundHandleImageChange_),e==dn.IDLE&&(t.load(),e=t.getState()),e==dn.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const jm=Gm;let $e=null;function Um(){$e=Qe(1,1,void 0,{willReadFrequently:!0})}class Ym extends jm{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=je(),this.pixelTransform=je(),this.inversePixelTransform=je(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,n){$e||Um(),$e.clearRect(0,0,1,1);let s;try{$e.drawImage(t,e,n,1,1,0,0,1,1),s=$e.getImageData(0,0,1,1).data}catch{return $e=null,null}return s}getBackground(t){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(t.viewState.resolution)),n||void 0}useContainer(t,e,n){const s=this.getLayer().getClassName();let r,o;if(t&&t.className===s&&(!n||t&&t.style.backgroundColor&&Ni(To(t.style.backgroundColor),To(n)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=Qe();const l=o.canvas;r.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const s=ye(n),r=Si(n),o=Oi(n),a=Ii(n);lt(e.coordinateToPixelTransform,s),lt(e.coordinateToPixelTransform,r),lt(e.coordinateToPixelTransform,o),lt(e.coordinateToPixelTransform,a);const l=this.inversePixelTransform;lt(l,s),lt(l,r),lt(l,o),lt(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,e,n){const s=this.getLayer();if(s.hasListener(t)){const r=new bl(t,this.inversePixelTransform,n,e);s.dispatchEvent(r)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(Jt.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(Jt.POSTRENDER,t,e)}getRenderTransform(t,e,n,s,r,o,a){const l=r/2,c=o/2,h=s/e,u=-h,d=-t[0]+a,f=-t[1];return yn(this.tempTransform,l,c,h,u,-n,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const Hm=Ym;class Wm extends Hm{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=ve(),this.tmpTileRange_=new Dl(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),n=t.getState(),s=e.getUseInterimTilesOnError();return n==w.LOADED||n==w.EMPTY||n==w.ERROR&&!s}getTile(t,e,n,s){const r=s.pixelRatio,o=s.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(t,e,n,r,o);return c.getState()==w.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),s=lt(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!Bs(r,s))return null;const o=e.pixelRatio,a=e.viewState.projection,l=e.viewState,c=n.getRenderSource(),h=c.getTileGridForProjection(l.projection),u=c.getTilePixelRatio(e.pixelRatio);for(let d=h.getZForResolution(l.resolution);d>=h.getMinZoom();--d){const f=h.getTileCoordForCoordAndZ(s,d),g=c.getTile(d,f[1],f[2],o,a);if(!(g instanceof Sl||g instanceof xs)||g instanceof xs&&g.getState()===w.EMPTY)return null;if(g.getState()!==w.LOADED)continue;const _=h.getOrigin(d),m=Ft(h.getTileSize(d)),y=h.getResolution(d),E=Math.floor(u*((s[0]-_[0])/y-f[1]*m[0])),T=Math.floor(u*((_[1]-s[1])/y-f[2]*m[1])),p=Math.round(u*c.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),E+p,T+p)}return null}loadedTileCallback(t,e,n){return this.isDrawableTile(n)?super.loadedTileCallback(t,e,n):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex],s=t.viewState,r=s.projection,o=s.resolution,a=s.center,l=s.rotation,c=t.pixelRatio,h=this.getLayer(),u=h.getSource(),d=u.getRevision(),f=u.getTileGridForProjection(r),g=f.getZForResolution(o,u.zDirection),_=f.getResolution(g);let m=t.extent;const y=t.viewState.resolution,E=u.getTilePixelRatio(c),T=Math.round(X(m)/y*c),p=Math.round(Nt(m)/y*c),C=n.extent&&Ve(n.extent);C&&(m=_n(m,Ve(n.extent)));const b=_*T/2/E,A=_*p/2/E,R=[a[0]-b,a[1]-A,a[0]+b,a[1]+A],I=f.getTileRangeForExtentAndZ(m,g),O={};O[g]={};const $=this.createLoadedTileFinder(u,r,O),U=this.tmpExtent,k=this.tmpTileRange_;this.newTiles_=!1;const rt=l?Ts(s.center,y,l,t.size):void 0;for(let et=I.minX;et<=I.maxX;++et)for(let F=I.minY;F<=I.maxY;++F){if(l&&!f.tileCoordIntersectsViewport([g,et,F],rt))continue;const N=this.getTile(g,et,F,t);if(this.isDrawableTile(N)){const K=st(this);if(N.getState()==w.LOADED){O[g][N.tileCoord.toString()]=N;let Rt=N.inTransition(K);Rt&&n.opacity!==1&&(N.endTransition(K),Rt=!1),!this.newTiles_&&(Rt||!this.renderedTiles.includes(N))&&(this.newTiles_=!0)}if(N.getAlpha(K,t.time)===1)continue}const ut=f.getTileCoordChildTileRange(N.tileCoord,k,U);let ot=!1;ut&&(ot=$(g+1,ut)),ot||f.forEachTileCoordParentTileRange(N.tileCoord,$,k,U)}const H=_/o*c/E;yn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/c,1/c,l,-T/2,-p/2);const V=qg(this.pixelTransform);this.useContainer(e,V,this.getBackground(t));const x=this.context,W=x.canvas;hl(this.inversePixelTransform,this.pixelTransform),yn(this.tempTransform,T/2,p/2,H,H,0,-T/2,-p/2),W.width!=T||W.height!=p?(W.width=T,W.height=p):this.containerReused||x.clearRect(0,0,T,p),C&&this.clipUnrotated(x,t,C),u.getInterpolate()||(x.imageSmoothingEnabled=!1),this.preRender(x,t),this.renderedTiles.length=0;let B=Object.keys(O).map(Number);B.sort(sr);let tt,Tt,Y;n.opacity===1&&(!this.containerReused||u.getOpaque(t.viewState.projection))?B=B.reverse():(tt=[],Tt=[]);for(let et=B.length-1;et>=0;--et){const F=B[et],N=u.getTilePixelSize(F,c,r),ot=f.getResolution(F)/_,K=N[0]*ot*H,Rt=N[1]*ot*H,on=f.getTileCoordForCoordAndZ(ye(R),F),Te=f.getTileCoordExtent(on),Ce=lt(this.tempTransform,[E*(Te[0]-R[0])/_,E*(R[3]-Te[3])/_]),Sn=E*u.getGutterForProjection(r),Nn=O[F];for(const ki in Nn){const Pt=Nn[ki],an=Pt.tileCoord,Pn=on[1]-an[1],Vi=Math.round(Ce[0]-(Pn-1)*K),xt=on[2]-an[2],be=Math.round(Ce[1]-(xt-1)*Rt),dt=Math.round(Ce[0]-Pn*K),ft=Math.round(Ce[1]-xt*Rt),Mt=Vi-dt,Yt=be-ft,ln=g===F,cn=ln&&Pt.getAlpha(st(this),t.time)!==1;let Ae=!1;if(!cn)if(tt){Y=[dt,ft,dt+Mt,ft,dt+Mt,ft+Yt,dt,ft+Yt];for(let Mn=0,jl=tt.length;Mn<jl;++Mn)if(g!==F&&F<Tt[Mn]){const gt=tt[Mn];Ln([dt,ft,dt+Mt,ft+Yt],[gt[0],gt[3],gt[4],gt[7]])&&(Ae||(x.save(),Ae=!0),x.beginPath(),x.moveTo(Y[0],Y[1]),x.lineTo(Y[2],Y[3]),x.lineTo(Y[4],Y[5]),x.lineTo(Y[6],Y[7]),x.moveTo(gt[6],gt[7]),x.lineTo(gt[4],gt[5]),x.lineTo(gt[2],gt[3]),x.lineTo(gt[0],gt[1]),x.clip())}tt.push(Y),Tt.push(F)}else x.clearRect(dt,ft,Mt,Yt);this.drawTileImage(Pt,t,dt,ft,Mt,Yt,Sn,ln),tt&&!cn?(Ae&&x.restore(),this.renderedTiles.unshift(Pt)):this.renderedTiles.push(Pt),this.updateUsedTiles(t.usedTiles,u,Pt)}}return this.renderedRevision=d,this.renderedResolution=_,this.extentChanged=!this.renderedExtent_||!Es(this.renderedExtent_,R),this.renderedExtent_=R,this.renderedPixelRatio=c,this.renderedProjection=r,this.manageTilePyramid(t,u,f,c,r,m,g,h.getPreload()),this.scheduleExpireCache(t,u),this.postRender(x,t),n.extent&&x.restore(),x.imageSmoothingEnabled=!0,V!==W.style.transform&&(W.style.transform=V),this.container}drawTileImage(t,e,n,s,r,o,a,l){const c=this.getTileImage(t);if(!c)return;const h=st(this),u=e.layerStatesArray[e.layerIndex],d=u.opacity*(l?t.getAlpha(h,e.time):1),f=d!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,n,s,r,o),f&&this.context.restore(),d!==u.opacity?e.animate=!0:l&&t.endTransition(h)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const n=function(s,r,o){const a=st(s);a in o.usedTiles&&s.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,e);t.postRenderFunctions.push(n)}}updateUsedTiles(t,e,n){const s=st(e);s in t||(t[s]={}),t[s][n.getKey()]=!0}manageTilePyramid(t,e,n,s,r,o,a,l,c){const h=st(e);h in t.wantedTiles||(t.wantedTiles[h]={});const u=t.wantedTiles[h],d=t.tileQueue,f=n.getMinZoom(),g=t.viewState.rotation,_=g?Ts(t.viewState.center,t.viewState.resolution,g,t.size):void 0;let m=0,y,E,T,p,C,b;for(b=f;b<=a;++b)for(E=n.getTileRangeForExtentAndZ(o,b,E),T=n.getResolution(b),p=E.minX;p<=E.maxX;++p)for(C=E.minY;C<=E.maxY;++C)g&&!n.tileCoordIntersectsViewport([b,p,C],_)||(a-b<=l?(++m,y=e.getTile(b,p,C,s,r),y.getState()==w.IDLE&&(u[y.getKey()]=!0,d.isKeyQueued(y.getKey())||d.enqueue([y,h,n.getTileCoordCenter(y.tileCoord),T])),c!==void 0&&c(y)):e.useTile(b,p,C,r));e.updateCacheSize(m,r)}}const Xm=Wm;class Zm extends zm{constructor(t){super(t)}createRenderer(){return new Xm(this)}}const Kl=Zm;function Bn(i,t){return lt(i.inversePixelTransform,t.slice(0))}/*!
  * ol-contextmenu - v5.2.0
  * https://github.com/jonataswalker/ol-contextmenu
  * Built: Mon Mar 13 2023 13:25:53 GMT-0300 (Brasilia Standard Time)
  */var Bm=Object.defineProperty,qm=(i,t,e)=>t in i?Bm(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,at=(i,t,e)=>(qm(i,typeof t!="symbol"?t+"":t,e),e);class Qm{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const br=Qm,Jm={PROPERTYCHANGE:"propertychange"};class tE{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const eE=tE;function Ls(){}function zl(i){for(const t in i)delete i[t]}function nE(i){let t;for(t in i)return!1;return!t}class iE extends eE{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),s=n[t]||(n[t]=[]);s.includes(e)||s.push(e)}dispatchEvent(t){const e=typeof t=="string",n=e?t:t.type,s=this.listeners_&&this.listeners_[n];if(!s)return;const r=e?new br(t):t;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];let l;for(let c=0,h=s.length;c<h;++c)if("handleEvent"in s[c]?l=s[c].handleEvent(r):l=s[c].call(this,r),l===!1||r.propagationStopped){l=!1;break}if(--o[n]===0){let c=a[n];for(delete a[n];c--;)this.removeEventListener(n,Ls);delete o[n]}return l}disposeInternal(){this.listeners_&&zl(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){const n=this.listeners_&&this.listeners_[t];if(n){const s=n.indexOf(e);s!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[s]=Ls,++this.pendingRemovals_[t]):(n.splice(s,1),n.length===0&&delete this.listeners_[t]))}}}const sE=iE,rE={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function _i(i,t,e,n,s){if(n&&n!==i&&(e=e.bind(n)),s){const o=e;e=function(){i.removeEventListener(t,e),o.apply(this,arguments)}}const r={target:i,type:t,listener:e};return i.addEventListener(t,e),r}function Go(i,t,e,n){return _i(i,t,e,n,!0)}function Is(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),zl(i))}class oE extends sE{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(rE.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=_i(this,t[r],e);return s}return _i(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const s=t.length;n=new Array(s);for(let r=0;r<s;++r)n[r]=Go(this,t[r],e)}else n=Go(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)aE(n);else if(Array.isArray(t))for(let s=0,r=t.length;s<r;++s)this.removeEventListener(t[s],e);else this.removeEventListener(t,e)}}function aE(i){if(Array.isArray(i))for(let t=0,e=i.length;t<e;++t)Is(i[t]);else Is(i)}const lE=oE;let cE=0;function hE(i){return i.ol_uid||(i.ol_uid=String(++cE))}class jo extends br{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}class uE extends lE{constructor(t){super(),this.on,this.once,this.un,hE(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new jo(n,t,e)),n=Jm.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new jo(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const s=this.values_||(this.values_={});if(n)s[t]=e;else{const r=s[t];s[t]=e,r!==e&&this.notify(t,r)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],nE(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}const dE=uE,fE={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};function Uo(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}class gE extends dE{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Uo(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Uo(this.element);for(let e=0,n=this.listenerKeys.length;e<n;++e)Is(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Ls&&this.listenerKeys.push(_i(t,fE.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const _E=gE;class pE extends br{constructor(t,e,n){super(t),this.map=e,this.frameState=n!==void 0?n:null}}const mE=pE;class EE extends mE{constructor(t,e,n,s,r,o){super(t,e,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const vE=EE;var Ar=(i=>(i.CONTEXTMENU="contextmenu",i.CLICK="click",i.DBLCLICK="dblclick",i))(Ar||{}),Qt=(i=>(i.BEFOREOPEN="beforeopen",i.OPEN="open",i.CLOSE="close",i.ADD_MENU_ENTRY="add-menu-entry",i))(Qt||{});class Yo extends vE{constructor(t){super(t.type,t.map,t.originalEvent)}}const yE={width:150,scrollAt:4,eventType:Ar.CONTEXTMENU,defaultItems:!0,items:[]},Xt="ol-ctx-menu",Q={namespace:Xt,container:`${Xt}-container`,separator:`${Xt}-separator`,submenu:`${Xt}-submenu`,hidden:`${Xt}-hidden`,icon:`${Xt}-icon`,zoomIn:`${Xt}-zoom-in`,zoomOut:`${Xt}-zoom-out`,unselectable:"ol-unselectable"},Ho=[{text:"Zoom In",classname:`${Q.zoomIn} ${Q.icon}`,callback:(i,t)=>{const e=t.getView();e.animate({zoom:Number(e.getZoom())+1,duration:700,center:i.coordinate})}},{text:"Zoom Out",classname:`${Q.zoomOut} ${Q.icon}`,callback:(i,t)=>{const e=t.getView();e.animate({zoom:Number(e.getZoom())-1,duration:700,center:i.coordinate})}}];var Os={},TE={get exports(){return Os},set exports(i){Os=i}};function wr(){}wr.prototype={on:function(i,t,e){var n=this.e||(this.e={});return(n[i]||(n[i]=[])).push({fn:t,ctx:e}),this},once:function(i,t,e){var n=this;function s(){n.off(i,s),t.apply(e,arguments)}return s._=t,this.on(i,s,e)},emit:function(i){var t=[].slice.call(arguments,1),e=((this.e||(this.e={}))[i]||[]).slice(),n=0,s=e.length;for(n;n<s;n++)e[n].fn.apply(e[n].ctx,t);return this},off:function(i,t){var e=this.e||(this.e={}),n=e[i],s=[];if(n&&t)for(var r=0,o=n.length;r<o;r++)n[r].fn!==t&&n[r].fn._!==t&&s.push(n[r]);return s.length?e[i]=s:delete e[i],this}};TE.exports=wr;var CE=Os.TinyEmitter=wr;const pi=new CE;function mi(i){const t=document.createDocumentFragment(),e=document.createElement("div");for(e.innerHTML=i;e.firstChild;)t.append(e.firstChild);return t}function bE(i){var l,c;const t=document.importNode(i),e=i.offsetWidth;t.style.cssText=`position: fixed; top: 0; left: 0; overflow: auto; visibility: hidden; pointer-events: none; height: unset; max-height: unset; width: ${e}px`;const n=mi("<span>Foo</span>"),s=mi("<span>Foo</span>"),r=document.createElement("li"),o=document.createElement("li");r.append(n),o.append(s),t.append(r),t.append(o),(l=i.parentNode)==null||l.append(t);const a=t.offsetHeight/2;return(c=i.parentNode)==null||c.removeChild(t),a}function Wo(i,t,e=!1,n=!1){const s=`_${Math.random().toString(36).slice(2,11)}`;if(typeof t!="string"&&"text"in t){const c=`<span>${t.text}</span>`,h=mi(c),u=document.createElement("li");t.classname=t.classname||"",t.icon&&(t.classname===""?t.classname=Q.icon:t.classname.includes(Q.icon)===!1&&(t.classname+=` ${Q.icon}`),u.setAttribute("style",`background-image:url(${t.icon})`)),u.id=s,u.className=t.classname,u.append(h),i.append(u);const d={id:s,isSubmenu:e,isInsideSubmenu:n,isSeparator:!1,callback:"callback"in t?t.callback:null,data:"data"in t?t.data:null};return pi.emit(Qt.ADD_MENU_ENTRY,d,u),u}const r=`<li id="${s}" class="${Q.separator}"><hr></li>`,o=mi(r);i.append(o);const a=i.lastChild,l={id:s,isSubmenu:!1,isInsideSubmenu:!1,isSeparator:!0,callback:null,data:null};return pi.emit(Qt.ADD_MENU_ENTRY,l,a),a}function Ss(i,t,e,n){t.forEach(s=>{if(typeof s!="string"&&"items"in s&&Array.isArray(s.items)){const r=Wo(i,s,!0);r.classList.add(Q.submenu);const o=document.createElement("ul");o.classList.add(Q.container),o.style.width=`${e}px`,r.append(o),Ss(o,s.items,e,!0)}else Wo(i,s,!1,n)})}function cs(i,t){if(!i)throw new Error(t)}class AE extends _E{constructor(t={}){cs(typeof t=="object","@param `opts` should be object type!");const e=document.createElement("div");super({element:e}),at(this,"map"),at(this,"container"),at(this,"coordinate",[]),at(this,"pixel",[]),at(this,"contextMenuEventListener"),at(this,"entryCallbackEventListener"),at(this,"mapMoveListener"),at(this,"lineHeight",0),at(this,"disabled"),at(this,"opened"),at(this,"items",[]),at(this,"menuEntries",new Map),at(this,"options"),this.options={...yE,...t};const n=document.createElement("ul");e.append(n),e.style.width=`${this.options.width}px`,e.classList.add(Q.container,Q.unselectable,Q.hidden),this.container=e,this.contextMenuEventListener=s=>{this.handleContextMenu(s)},this.entryCallbackEventListener=s=>{this.handleEntryCallback(s)},this.mapMoveListener=()=>{this.handleMapMove()},this.disabled=!1,this.opened=!1,window.addEventListener("beforeunload",()=>{this.removeListeners()},{once:!0})}clear(){for(const t of this.menuEntries.keys())this.removeMenuEntry(t);this.container.replaceChildren(),this.container.append(document.createElement("ul"))}enable(){this.disabled=!1}disable(){this.disabled=!0}getDefaultItems(){return Ho}countItems(){return this.menuEntries.size}extend(t){cs(Array.isArray(t),"@param `items` should be an Array."),Ss(this.container.firstElementChild,t,this.options.width)}closeMenu(){this.opened=!1,this.container.classList.add(Q.hidden),this.dispatchEvent(Qt.CLOSE)}isOpen(){return this.opened}updatePosition(t){cs(Array.isArray(t),"@param `pixel` should be an Array."),this.isOpen()&&(this.pixel=t,this.positionContainer())}pop(){const t=Array.from(this.menuEntries.keys()).pop();t&&this.removeMenuEntry(t)}shift(){const t=Array.from(this.menuEntries.keys()).shift();t&&this.removeMenuEntry(t)}push(t){t&&this.extend([t])}setMap(t){if(super.setMap(t),t){this.map=t,this.map.getViewport().addEventListener(this.options.eventType,this.contextMenuEventListener,!1),this.map.on("movestart",()=>{this.handleMapMove()}),pi.on(Qt.ADD_MENU_ENTRY,(n,s)=>{this.handleAddMenuEntry(n,s)},this),this.items=this.options.defaultItems?this.options.items.concat(Ho):this.options.items,Ss(this.container.firstElementChild,this.items,this.options.width);const e=this.getMenuEntriesLength();this.lineHeight=e>0?this.container.offsetHeight/e:bE(this.container)}else this.removeListeners(),this.clear()}removeListeners(){this.map.getViewport().removeEventListener(this.options.eventType,this.contextMenuEventListener,!1),pi.off(Qt.ADD_MENU_ENTRY)}removeMenuEntry(t){const e=document.getElementById(t);e==null||e.remove(),e==null||e.removeEventListener("click",this.entryCallbackEventListener),this.menuEntries.delete(t)}handleContextMenu(t){var e;this.coordinate=this.map.getEventCoordinate(t),this.pixel=this.map.getEventPixel(t),this.dispatchEvent(new Yo({type:Qt.BEFOREOPEN,map:this.map,originalEvent:t})),!this.disabled&&(this.options.eventType===Ar.CONTEXTMENU&&(t.stopPropagation(),t.preventDefault()),setTimeout(()=>{this.openMenu(t)}),(e=t.target)==null||e.addEventListener("pointerdown",n=>{this.opened&&(n.stopPropagation(),this.closeMenu())},{once:!0}))}openMenu(t){this.opened=!0,this.positionContainer(),this.container.classList.remove(Q.hidden),this.dispatchEvent(new Yo({type:Qt.OPEN,map:this.map,originalEvent:t}))}getMenuEntriesLength(){return Array.from(this.menuEntries).filter(([,t])=>t.isSeparator===!1&&t.isSubmenu===!1&&t.isInsideSubmenu===!1).length}positionContainer(){const t=this.map.getSize()||[0,0],e={w:t[0]-this.pixel[0],h:t[1]-this.pixel[1]},n=this.getMenuEntriesLength(),s={w:this.container.offsetWidth,h:Math.round(this.lineHeight*n)},r=e.w>=s.w?this.pixel[0]+5:this.pixel[0]-s.w;this.container.style.left=`${r}px`,this.container.style.top=e.h>=s.h?`${this.pixel[1]-10}px`:`${this.pixel[1]-s.h}px`,this.container.style.right="auto",this.container.style.bottom="auto",e.w-=s.w;const o=c=>Array.from(c.children).filter(h=>h.tagName==="LI"&&h.classList.contains(Q.submenu));let a=0;const l=(c,h)=>{a+=1,o(c).forEach(u=>{const d=h>=s.w?s.w-8:(s.w+8)*-1,f=u.querySelector(`ul.${Q.container}`),g=Math.round(this.lineHeight*Array.from(f.children).filter(_=>_.tagName==="LI").length);f.style.left=`${d}px`,f.style.right="auto",f.style.top=e.h>=g+s.h?"0":`-${f.offsetHeight-25}px`,f.style.bottom="auto",f.style.zIndex=String(a),o(f).length>0&&l(f,h-s.w)})};l(this.container.firstElementChild,e.w)}handleMapMove(){this.closeMenu()}handleEntryCallback(t){var r;t.preventDefault(),t.stopPropagation();const e=t.currentTarget,n=this.menuEntries.get(e.id);if(!n)return;const s={coordinate:this.coordinate,data:n.data};this.closeMenu(),(r=n.callback)==null||r.call(n,s,this.map)}handleAddMenuEntry(t,e){this.menuEntries.set(t.id,t),this.positionContainer(),"callback"in t&&typeof t.callback=="function"&&e.addEventListener("click",this.entryCallbackEventListener,!1)}}const wE="/tileserver-web/assets/osm_logo-b6356be0.png",RE="/tileserver-web/";let xE=document.getElementById("nav-list");const LE=[{server:"gauss",folder:null},{server:"gauss",folder:"osmhrb"},{server:"humboldt",folder:null},{server:"humboldt",folder:"osmhrb"},{server:"tile",folder:null},{server:"tile",folder:"osmhrb"}];LE.map(function({server:i,folder:t}){let e=document.createElement("li"),n=document.createElement("a");n.href=RE+"index.html?server="+i+"&folder="+t,n.innerHTML="Subdomain: "+i+" Unterverzeichnis: "+t,e.appendChild(n),xE.appendChild(e)});const IE=ci("server")!==null?ci("server"):"tile",OE=ci("folder")!==null?"/"+ci("folder")+"/":"/",SE=new Kl({source:new Vm}),Rr="https://"+IE+".openstreetmap.de"+OE+"{z}/{x}/{y}.png";sessionStorage.setItem("tileUrl",Rr);document.getElementById("logo").src=wE;document.getElementById("header-h1").innerHTML=Rr;const xr=new Kl({source:new Vl({attributions:["| © sobuskutkowacy pola OpenStreetMap. | © OpenStreetMap Mitwirkende."],url:Rr,maxZoom:20})}),Je=new Jp({layers:[SE,xr],target:"map",view:new Lt({center:xg([10.33649,51.006271]),projection:"EPSG:3857",zoom:6,maxZoom:20,constrainResolution:!0})}),Gl=document.getElementById("swipe");xr.on("prerender",function(i){const t=i.context,e=Je.getSize(),n=e[0]*(Gl.value/100),s=Bn(i,[n,0]),r=Bn(i,[e[0],0]),o=Bn(i,[n,e[1]]),a=Bn(i,e);t.save(),t.beginPath(),t.moveTo(s[0],s[1]),t.lineTo(o[0],o[1]),t.lineTo(a[0],a[1]),t.lineTo(r[0],r[1]),t.closePath(),t.clip()});xr.on("postrender",function(i){i.context.restore()});Gl.addEventListener("input",function(){Je.render()});var NE=new AE({width:170,defaultItems:!1,items:[{text:"Kachelinfo",classname:"open_tile_cb",callback:Pg}]});Je.addControl(NE);let Ei=Je.getView().getZoom();document.getElementById("zoomlevel").innerHTML="Zoom: "+Ei;sessionStorage.setItem("zoomlevel",Ei);Je.on("moveend",function(i){var t=Je.getView().getZoom();Ei!=t&&(document.getElementById("zoomlevel").innerHTML="Zoom: "+t,sessionStorage.setItem("zoomlevel",t),Ei=t)});
